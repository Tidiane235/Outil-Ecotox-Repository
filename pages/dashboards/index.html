<!--
=========================================================
*  Codé à l'aide de Material Dashboard 2 PRO - v3.1.0
=========================================================

* Product Page:  https://www.creative-tim.com/product/material-dashboard-pro 
* Copyright 2024 Creative Tim (https://www.creative-tim.com)
* Coded by Creative Tim

=========================================================
-->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="https://tidiane235.github.io/Outil-Ecotox-Repository/assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <title>
   Outil écotox CEAEQ
  </title>

   <!-- Partie 1. Importation de librairies externes pour les tableaux, les figures, et pour la génération automatique de documents Word et PDF  -->

  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,900" />
  <!-- Nucleo Icons -->
  <link  type="text/css"  href="https://tidiane235.github.io/Outil-Ecotox-Repository/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="https://tidiane235.github.io/Outil-Ecotox-Repository/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <!-- CSS Files -->
  <link id="pagestyle" href="https://tidiane235.github.io/Outil-Ecotox-Repository/assets/css/material-dashboard.css?v=3.1.0"  type="text/css"  rel="stylesheet"/>
<!-- Ressources diagramme composition -->
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Ressources  pour importation excel -->
<script src="https://unpkg.com/read-excel-file@4.x/bundle/read-excel-file.min.js"></script>

<!-- Ressources  pour le radar dans la section ecotox composés-->
<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
<script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<!-- Libraries DOCX pour avis écotox (non utilisée pour l'instant) -->

 <script src="https://unpkg.com/docx@5.0.2/build/index.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>

 
<!-- Importation de JS PDF pour avis écotox    -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
 <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>

<!-- Importation de autotable pour JS PDF, pour les tableaux  -->
<!--  Pas oublier d'installer sur le terminal : npm install jspdf --save npm i jspdf-invoice-template,  et  npm i jspdf-autotable, npm install jspdf jspdf-autotable --force  -->
<!--  Pas oublier d'installer sur le terminal : npm install jspdf jspdf-autotable -->
  

 <script src= https://unpkg.com/jspdf-autotable></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.16/jspdf.plugin.autotable.min.js"></script>

<!-- Importation de InvoiceTemplate pour JS PDF , ( pour l'installer entrer dans le terminal : npm i jspdf-invoice-template ) -->
<script src="https://unpkg.com/jspdf-invoice-template@1.4.0/dist/index.js"></script>




<!-- datable -->

<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.datatables.net/2.2.1/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.1/js/dataTables.buttons.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.1/js/buttons.dataTables.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/3.2.1/js/buttons.print.min.js"></script>

<script src="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.css"></script>
<script src="https://cdn.datatables.net/buttons/3.2.1/css/buttons.dataTables.css"></script>



<!-- Importation pour graphique, zone composition chimique  -->

    <link href='//fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>
		<script src="https://cdn.zingchart.com/zingchart.min.js"></script>

<!-- Importation pour icon menu  -->
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>

</head>




<!-- Corp HTML principal de l'application  ! -->


<div >

<body class="g-sidenav-show  bg-gray-100" > 

       
  <!--========================================================= ! -->
  <!--* Barre d'erreur  -->
  <!--========================================================= ! -->

  <div class = formulaire-Erreur style="display: none;" >  
    <div class="bg-gradient-dark shadow-dark border-radius-lg py-3 pe-1">
      
      <h4 class="text-white font-weight-bolder text-center mt-2" style="font-size: 30px; padding: 20px;;">Erreur</h4>
      
    </div>
     
    <div id = "corp_formulaire_erreur">
      
    </div>

    <button class="btn btn-primary mt-4"  id = 'ok_erreur' style="top:30%;"> Ok </button>     
  </div>
   
  <!--========================================================= ! -->
  <!--* Menu de recherche flottant -->
  <!--========================================================= ! -->

  <!-- FORMULAIRES  -->
  <!--  Modifier  -->
  <div id = "formulaire"  class = "formulaire_table_modifier_TABLE_Liste_generale"  style = " display : none ; z-index: 100005;"> </div> 
  <!-- Supprimer -->
  <div id = "formulaire"  class = "formulaire_table_supprimer_TABLE_Liste_generale"  style = " display : none ; z-index: 10 005; "> </div> 
  <!--Ajouter -->
  <div id = "formulaire"  class = "formulaire_table_ajouter_TABLE_Liste_generale"  style = "display : none ; z-index: 10 005;">  </div> 
 <!-- Rechercher  FIN SECTION -->

  <div class="menu_recherche" style="text-align:center; display: none;">

<!--* input --> 
    <div class="container-fluid py-2">
      <div class="row">
        <div class="col-12 col-md-6 col-lg-4 mx-auto my-5">
          <h3 class="mt-5 text-center">Rechercher</h3>
          <h5 class="font-weight-normal opacity-6 text-center mb-5">Rechercher un composé chimique ou un mélange complexe</h5>
          <div class="card mb-9">
            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
              <div class="bg-gradient-dark shadow-dark border-radius-lg py-3 pe-1">
                <h4 class="text-white font-weight-bolder text-center mt-2">Entrer les critères de recherche</h4>
              </div>
            </div>
            <div class="card-body" >
              <form id="form" class="form">
                <div class="input-group input-group-outline my-3">
                  <label class="form-label">Nom (Fr) :</label>
                  <input  id = "input_Nom" type="text" class="form-control" onfocus="focused(this)" onfocusout="defocused(this)">
                  <small>Error message</small>
                </div>
                <div class="input-group input-group-outline my-3">
                  <label class="form-label">CAS (Chemical Abstracts Service) : </label>
                  <input id = "input_CAS" type="text" class="form-control" onfocus="focused(this)" onfocusout="defocused(this)">
                  <small>Error message</small>
                </div>
                <div class="input-group input-group-outline my-3">
                  <label class="form-label">Mot-clé :</label>
                  <input  id = "input_mot-clé" type="text" class="form-control" onfocus="focused(this)" onfocusout="defocused(this)">
                  <small>Error message</small>
                </div>
                <div class="input-group input-group-outline my-3">
                 
                 
                  <small>Error message</small>
                </div>
                <button  id = 'Rechercher_composé_substance'  class="btn btn-primary mt-4">Rechercher</button>
                <button id = 'Tout_afficher' class="btn btn-primary mt-4"  id = 'Tout_afficher'> Tout afficher </button>
                <button class="btn btn-primary mt-4"  id = 'fermer_menue_recherche'> Fermer </button>
              </form>
            </div>
          </div>
        </div>
      </div>
      <footer class="footer py-4  ">
        <div class="container-fluid">
          <div class="row align-items-center justify-content-lg-between">
            <div class="col-lg-6 mb-lg-0 mb-4">
            
            </div>
          
              
                </li>
              </ul>
            </div>
          </div>
        </div>


        <div class="menue_recherche_partie_table" style="text-align:center;">
          <!--* table -->
<div class="table-responsive p-0">


<!--Table liste generale -->
<div class = boutons_Liste_generale ></div>

<div class = "Liste_generale">
<h3> Résultats de la recheche </h3>


<table class = TABLE_Liste_generale style = "border-collapse: collapse; width: 1100px; min-width: 1100px; height: 30px"> </table>

</div>
 <div  class = "pagination_Liste_generale"> 
  
                       
</div>


</div>   
     </div>    



                </div>

             
         
     
  <!--========================================================= ! -->
  <!--* Barre de navigation verticale de gauche -->
  <!--========================================================= ! -->

  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-radius-lg fixed-start ms-2  bg-white my-2" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-dark opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand px-4 py-3 m-0" href=" https://demos.creative-tim.com/material-dashboard-pro/pages/dashboards/analytics.html " target="_blank">
        <img src="/img/logo-ct-dark.png" class="navbar-brand-img" width="26" height="26" alt="main_logo">
        <span class="ms-1 text-sm text-dark">Outil Ecotox</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0 mb-2">
    <div class="collapse navbar-collapse  w-auto h-auto" id="sidenav-collapse-main">
      <ul class="navbar-nav">
    
        <hr class="horizontal dark mt-0" >

        <li class="nav-item" style="display: none;" ><!-- Corp HTML principal de l'application  ! -->
          <a data-bs-toggle="collapse" href="#dashboardsExamples" class="nav-link text-dark active" aria-controls="dashboardsExamples" role="button" aria-expanded="false">
            <i class="material-symbols-rounded opacity-5">space_dashboard</i>
            <span class="nav-link-text ms-1 ps-1">Dashboards</span>
          </a>
          <div class="collapse  show " id="dashboardsExamples">
            <ul class="nav ">
              <li class="nav-item ">
                <a class="nav-link text-dark " href="../../pages/dashboards/analytics.html">
                  <span class="sidenav-mini-icon"> A </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Composition </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="../../pages/dashboards/newpage.html">
                  <span class="sidenav-mini-icon"> A </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Nouvelle page </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="../../pages/dashboards/discover.html">
                  <span class="sidenav-mini-icon"> D </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Discover </span>
                </a>
              </li>
              <li class="nav-item active">
                <a class="nav-link text-dark active" href="../../pages/dashboards/sales.html">
                  <span class="sidenav-mini-icon"> S </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Sales </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="../../pages/dashboards/automotive.html">
                  <span class="sidenav-mini-icon"> A </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Automotive </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="../../pages/dashboards/smart-home.html">
                  <span class="sidenav-mini-icon"> S </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Smart Home </span>
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li class="nav-item mt-3">
          

          <!--* Composés chimiques -->

          <h6 class="ps-3  ms-2 text-uppercase text-xs font-weight-bolder text-dark">Composés chimiques</h6>
        </li>
        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#pagesExamples" class="nav-link text-dark " aria-controls="pagesExamples" role="button" aria-expanded="false">
            <i class="material-symbols-rounded opacity-5 {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">contract</i>
            <span class="nav-link-text ms-1 ps-1">Voir composés chimiques</span>
          </a>
         

          <div class="collapse " id="pagesExamples">
            <ul class="nav ">
              <li class="nav-item ">

                <hr class="horizontal dark" />
                <h6 class="ps-3  ms-2 text-uppercase text-xs font-weight-bolder text-dark" style="font: size 9px;;">Inorganiques</h6>
                <hr class="horizontal dark" />


                <!--* Métaux -->

                <a class="nav-link text-dark " data-bs-toggle="collapse" aria-expanded="false" href="#vrMétaux">
                  <span class="sidenav-mini-icon"> M </span>

                  <span class="sidenav-normal  ms-1  ps-1"> Métaux + Métalloïdes <b class="caret"></b></span>
                  
                </a>


                <div class="collapse " id="vrMétaux">
                  <ul class="nav nav-sm flex-column" id = "Navigation_Métaux">
                   
                  </ul>
                </div>


                <hr class="horizontal dark" />
                <h6 class="ps-3  ms-2 text-uppercase text-xs font-weight-bolder text-dark">Organiques</h6>
                <hr class="horizontal dark" />

                  <!--*BTEX -->

                  <a class="nav-link text-dark " data-bs-toggle="collapse" aria-expanded="false" href="#vrBTEX">
                    <span class="sidenav-mini-icon"> M </span>
  
                    <span class="sidenav-normal  ms-1  ps-1">BTEX<b class="caret"></b></span>
                    
                  </a>
  
  
                  <div class="collapse " id="vrBTEX">
                    <ul class="nav nav-sm flex-column" id = "Navigation_BTEX">
                   
                    </ul>
                  </div>
  
                  <!--*HAP -->

                  <a class="nav-link text-dark " data-bs-toggle="collapse" aria-expanded="false" href="#vrHAP">
                    <span class="sidenav-mini-icon"> M </span>
  
                    <span class="sidenav-normal  ms-1  ps-1">HAP<b class="caret"></b></span>
                    
                  </a>
  
  
                  <div class="collapse " id="vrHAP">
                    <ul class="nav nav-sm flex-column" id = "Navigation_HAP" >
                    
                    </ul>
                  </div>


              
            </ul>
          </div>
        </li>




           <!--* Mélanges complexes -->

        <li class="nav-item">
          <hr class="horizontal dark" />
          <h6 class="ps-3  ms-2 text-uppercase text-xs font-weight-bolder text-dark">Mélanges complexes</h6>
          <hr class="horizontal dark" />
        
        </li>

        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#basicExamples" class="nav-link text-dark " aria-controls="basicExamples" role="button" aria-expanded="false">
            <i class="material-symbols-rounded opacity-5 {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">upcoming</i>

            <span class="nav-link-text ms-1 ps-1">Voir mélanges complexes</span>
          </a>

          <div class="collapse " id="basicExamples">


            <hr class="horizontal dark" />
            <h6 class="ps-3  ms-2 text-uppercase text-xs font-weight-bolder text-dark">Divers produits</h6>
            <hr class="horizontal dark" />



            <ul class="nav ">

              <li class="nav-item ">

                <!--* Produits pétroliers -->


                <a class="nav-link text-dark " data-bs-toggle="collapse" aria-expanded="false" href="#pétroliers">
                  <span class="sidenav-mini-icon"> U </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Produits pétroliers <b class="caret"></b></span>
                </a>
                <div class="collapse " id="pétroliers">
                  <ul class="nav nav-sm flex-column" id = "Navigation_Produits_pétroliers">

              

             
                  </ul>
                </div>

                <hr class="horizontal dark" />
                <h6 class="ps-3  ms-2 text-uppercase text-xs font-weight-bolder text-dark">Eaux usées</h6>
                <hr class="horizontal dark" />


                <a class="nav-link text-dark " data-bs-toggle="collapse" aria-expanded="false" href="#eaux_incendie">
                  <span class="sidenav-mini-icon"> U </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Eaux d'incendies <b class="caret"></b></span>
                </a>
                <div class="collapse " id="eaux_incendie">
                  <ul class="nav nav-sm flex-column" id = "Navigation_Eauxincendie">

              
                  </ul>
                </div>



              </li>
          
            </ul>
          </div>
        </li>
        <li class="nav-item" style="display: none;">
          <a data-bs-toggle="collapse" href="#componentsExamples" class="nav-link text-dark " aria-controls="componentsExamples" role="button" aria-expanded="false">
            <i class="material-symbols-rounded opacity-5 {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">view_in_ar</i>
            <span class="nav-link-text ms-1 ps-1">Components</span>
          </a>
          <div class="collapse " id="componentsExamples">
            <ul class="nav ">
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/alerts/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> A </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Alerts </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/badge/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> B </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Badge </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/buttons/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> B </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Buttons </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/cards/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> C </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Card </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/carousel/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> C </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Carousel </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/collapse/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> C </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Collapse </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/dropdowns/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> D </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Dropdowns </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/forms/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> F </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Forms </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/modal/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> M </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Modal </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/navs/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> N </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Navs </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/navbar/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> N </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Navbar </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/pagination/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> P </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Pagination </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/popovers/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> P </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Popovers </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/progress/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> P </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Progress </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/spinners/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> S </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Spinners </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/tables/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> T </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Tables </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark " href="https://www.creative-tim.com/learning-lab/bootstrap/tooltips/material-dashboard" target="_blank">
                  <span class="sidenav-mini-icon"> T </span>
                  <span class="sidenav-normal  ms-1  ps-1"> Tooltips </span>
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li class="nav-item" style="display: none;">
          <a class="nav-link text-dark" href="https://github.com/creativetimofficial/ct-material-dashboard-pro/blob/master/CHANGELOG.md" target="_blank">
            <i class="material-symbols-rounded opacity-5 {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">receipt_long</i>
            <span class="nav-link-text ms-1 ps-1">Changelog</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>



  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    
      <!--========================================================= ! -->
      <!--* Barre de navigation horizontale -->
      <!--========================================================= ! -->
      
    <nav  class="navbar navbar-main navbar-expand-lg position-sticky mt-2 top-1 px-0 py-1 mx-3 shadow-none border-radius-lg z-index-sticky" id="navbarBlur" data-scroll="true" style="z-index: 8000;">
      

      <div class="container-fluid py-1 px-2">
        
        <div class="sidenav-toggler sidenav-toggler-inner d-xl-block d-none ">
          <a href="javascript:;" class="nav-link text-body p-0">
            <div class="sidenav-toggler-inner">
              <i class="sidenav-toggler-line"></i>
              <i class="sidenav-toggler-line"></i>
              <i class="sidenav-toggler-line"></i>
            </div>
          </a>
        </div>
        <nav aria-label="breadcrumb" class="ps-2">
          <ol class="breadcrumb bg-transparent mb-0 p-0">
        
          </ol>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">

            <div class="dropdown">
              <button type="button" id="ouvrir_menu_recherche" data-bs-toggle="dropdown" aria-expanded="false">
                <p > Rechercher</p>
              </button>
            
            </div>
         
            <div style="display: none;">
            <div class="input-group input-group-outline">
              <label class="form-label">Mots-clé</label>
              <input type="text" class="form-control">
            </div>
          <div> </div>

            <div class="input-group input-group-outline">
              <label class="form-label">Nom</label>
              <input type="text" class="form-control">
            </div>
            <div> </div> 
            <div class="input-group input-group-outline">
              <label class="form-label">CAS</label>
              <input type="text" class="form-control">
            </div>
          </div>
        </div>

          <div class = "substances"  > 
            <button class="btn bg-light mb-0 text-end"  id = 'bouton_Propriétés_physico-chimique_substances'> Propriétés physiques et chimiques </button>
            <button class="btn bg-light mb-0 text-end"  id = 'bouton_Composition_chimique'> Composition chimique </button>
            <button class="btn bg-light mb-0 text-end"  id = 'bouton_Données_écotoxicologiques_substances'> Données écotoxicologiques </button>
            
            </div>
            
            <div class = "composés" >
            <button class="btn bg-light mb-0 text-end" id = 'bouton_Propriétés_physico-chimique_composés'> Propriétés physiques et chimiques </button>
            <button class="btn bg-light mb-0 text-end" id = 'bouton_Critères_de_qualité'> Critères de qualité</button>
            <button class="btn bg-light mb-0 text-end"  id = 'bouton_Données_écotoxicologiques_composés'> Données écotoxicologiques </button>
            </div>
          
          <div>   </div>
          <ul class="navbar-nav  justify-content-end">
           
            <li class="nav-item">
              <a href="javascript:;" class="nav-link py-0 px-1 line-height-0">
                <i class="material-symbols-rounded fixed-plugin-button-nav">
              settings
            </i>
              </a>
            </li>
           
                <span class="position-absolute top-5 start-100 translate-middle badge rounded-pill bg-danger border border-white small py-1 px-2">
                  <span class="small">11</span>
                  <span class="visually-hidden">unread notifications</span>
                </span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end p-2 me-sm-n4" aria-labelledby="dropdownMenuButton">
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex align-items-center py-1">
                      <span class="material-symbols-rounded">email</span>
                      <div class="ms-2">
                        <h6 class="text-sm font-weight-normal my-auto">
                          Check new messages
                        </h6>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex align-items-center py-1">
                      <span class="material-symbols-rounded">podcasts</span>
                      <div class="ms-2">
                        <h6 class="text-sm font-weight-normal my-auto">
                          Manage podcast session
                        </h6>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex align-items-center py-1">
                      <span class="material-symbols-rounded">shopping_cart</span>
                      <div class="ms-2">
                        <h6 class="text-sm font-weight-normal my-auto">
                          Payment successfully completed
                        </h6>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
               <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav"> 
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                </div>
              </a>
            </li>
          </ul>
        </div>
      </div>

       <!----------------------------------------------------->
 <!-- 2.TITRE DE LA PAGE ET AFFICHAGE DE LA SELECTION -->
 <!-----------------------------------------------------> 
  
 






 <!---  <div class = "barre" style = "width: 1920px; height: 3px; background-color: rgb(0, 0, 0);"></div>-->


  



    </nav>
    
    

       <!--========================================================= ! -->
       <!--* Bloc du haut -->
       <!--========================================================= ! -->
    

    

    <div class="container-fluid py-2">

   

      <div class="row" >
        <div class="col-sm-4">
          <div class="card">
            <div class="card-body p-3 position-relative">
              <div class="row" >
                <div class="col-7 text-start">
                  <p class="text-sm mb-1 text-capitalize font-weight-bold">Nom :</p>
                  <h5 class="font-weight-bolder mb-0"  id = "Haut_nom" >
                    Diesel
                  </h5>
                  <span class="text-sm text-end text-success font-weight-bolder mt-auto mb-0" style="display: none;">+55% <span class="font-weight-normal text-secondary">since last month</span></span>
                </div>
                <div class="col-5">
                  <div class="dropdown text-end">
                    <a href="javascript:;" class="cursor-pointer text-secondary" id="dropdownUsers1" data-bs-toggle="dropdown" aria-expanded="false">
                      <span class="text-xs text-secondary">Mélange complexe</span>
                    </a>
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-4 mt-sm-0 mt-4">
          <div class="card">
            <div class="card-body p-3 position-relative">
              <div class="row">
                <div class="col-7 text-start">
                  <p class="text-sm mb-1 text-capitalize font-weight-bold">Numéro CAS :</p>
                  <h5 class="font-weight-bolder mb-0"  id = "Haut_cas" >
                    68334-30-5
                  </h5>
                  <span class="text-sm text-end text-success font-weight-bolder mt-auto mb-0" style="display: none;">+12% <span class="font-weight-normal text-secondary">since last month</span></span>
                </div>
                <div class="col-5">
                  <div class="dropdown text-end">
                    <a href="javascript:;" class="cursor-pointer text-secondary" id="dropdownUsers2" data-bs-toggle="dropdown" aria-expanded="false">
                      <span class="text-xs text-secondary" >Mélange complexe</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end px-2 py-3" aria-labelledby="dropdownUsers2">
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Last 7 days</a></li>
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Last week</a></li>
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Last 30 days</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-4 mt-sm-0 mt-4">
          <div class="card">
            <div class="card-body p-3 position-relative">
              <div class="row">
                <div class="col-7 text-start">
                  <p class="text-sm mb-1 text-capitalize font-weight-bold">Symbole/formule : </p>
                  <h5 class="font-weight-bolder mb-0"  id = "Haut_symb" >
                    X
                  </h5>
                  <span class="font-weight-normal text-secondary text-sm" style="display: none;" ><span class="font-weight-bolder text-success">+$213</span> since last month</span>
                </div>
                <div class="col-5">
                  <div class="dropdown text-end">
                    <a href="javascript:;" class="cursor-pointer text-secondary" id="dropdownUsers3" data-bs-toggle="dropdown" aria-expanded="false">
                      <span class="text-xs text-secondary">Mélange complexe</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end px-2 py-3" aria-labelledby="dropdownUsers3">
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Last 7 days</a></li>
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Last week</a></li>
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Last 30 days</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>






                <!--=========================================================-->
                 <!--* Critères de qualité -->
                 <!--=========================================================-->
                 <div class="mt-4"  id = "Z_CQC" style="overflow-x:scroll; overflow: hidden; max-width:100%;" >
                  <div class="card mb-4">
                    <div class="card-header pb-0">
                     
                    </div>
                    <div class="card-body p-3">
          
          
                        
                      <div class="row">

    
    <div  class = "Section_Critères_de_qualité"  style = "display: inline;">
     


 <!-- criteres_de_qualite_eaux -->
      
 <div class = "criteres_de_qualite_eaux">
    <!-- TITRE -->
   <h6 > Critères de qualité pour les milieux aquatiques </h6>
 
   <!-- BOUTONS -->
   <div class = "boutons_criteres_de_qualite_eaux"></div>
   <!-- TABLE -->
   <table class = "TABLE_criteres_de_qualite_eaux" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
   <P> <strong> Informations supplémentaires :</strong></P>
   <P id = inf_abrev> <strong>Abrev :</strong></P>
   <P id = inf_note > <strong>Note :</strong></P>
   <P id = inf_ref > <strong>Références :</strong></P>
 </div>


    <!--Modifier -->
    <div id = "formulaire" class = "formulaire_table_modifier_TABLE_criteres_de_qualite_eaux"  style = " display : none "> </div>
   <!-- Supprimer -->
   <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_criteres_de_qualite_eaux"  style = " display : none "> </div> 
   <!-- Ajouter -->
   <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_criteres_de_qualite_eaux"  style = "display : none ">  </div>
  


<!-- criteres_de_qualite_sols-->
      
<div class = "criteres_de_qualite_sols">
  <!-- TITRE -->
 <h6 class="mb-0" >  Critères de qualité pour les milieux terrestres </h6>

 <!-- BOUTONS -->
 <div class = "boutons_criteres_de_qualite_sols"></div>
 <!-- TABLE -->
 <table class = "TABLE_criteres_de_qualite_sols" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
</div>


  <!--Modifier -->
  <div id = "formulaire" class = "formulaire_table_modifier_TABLE_criteres_de_qualite_sols"  style = " display : none "> </div>
 <!-- Supprimer -->
 <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_criteres_de_qualite_sols"  style = " display : none "> </div> 
 <!-- Ajouter -->
 <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_criteres_de_qualite_sols"  style = "display : none ">  </div>



<!-- 5.3 : qualité pour les sédiments -->
<div class = "criteres_de_qualite_sediments">
  <h6 class="mb-0"  > Critères de qualité pour les sédiments </h6>
  
  <!-- BOUTONS -->
  <div class = boutons_criteres_de_qualite_sediments></div>

  <table class = TABLE_criteres_de_qualite_sediments style = "border-collapse: collapse; width: 1100px; height: 15px"> </table>
  <P > Légende: CER : Concentration d’effets rares. CSE : Concentration seuil produisant un effet. CEO : Concentration d’effets occasionnels.
    CEP : Concentration produisant un effet probable. CEF : Concentration d’effets fréquents. </P>

</div>

  <!-- FORMULAIRES  -->
    <!--  Modifier  -->
    <div id = "formulaire"  class = "formulaire_table_modifier_TABLE_criteres_de_qualite_sediments"  style = " display : none "> </div> 
    <!-- Supprimer -->
    <div id = "formulaire"  class = "formulaire_table_supprimer_TABLE_criteres_de_qualite_sediments"  style = " display : none "> </div> 
    <!--Ajouter -->
    <div id = "formulaire"  class = "formulaire_table_ajouter_TABLE_criteres_de_qualite_sediments"  style = "display : none ">  </div> 

    
     </div>
          
          
          
                        </div>
          
          
                        <div class="col-lg-6 col-md-5">
                          <div id="map" class="mt-0 mt-lg-n4"></div>
                        </div>
                      </div>
                    </div>
                            </div>
          
                 <!--=========================================================-->
                 <!--*  Propriétés physiques et chimiques pour les composés-->
                 <!--=========================================================-->

                 <div class="mt-4" id = Z_PPCC style="overflow-x:scroll; overflow: hidden; max-width:100%;">
                  <div class="card mb-4">
                    <div class="card-header pb-0">
                      <h6 class="mb-0"> Propriétés physiques et chimiques (composés) </h6>
                    </div>
                    <div class="card-body p-3">
          
          
                        
                      <div class="row">
                   
       <!------------------------------------------------------->
    <!-- 3. SECTION POUR LES PROPRIETES PHYSICO-CHIMIQUES COMP --> 
    <!-------------------------------------------------------->
    <div class = "Section_Propriété_physique_et_chimique_composé" style=" width: 100%;  overflow: scroll;" > 
 
     <!-- proprites_physiques_et_chimiques_composes -->

  <div class = "proprites_physiques_et_chimiques_composes">


  
    <!-- BOUTONS -->
    <div class = "boutons_proprites_physiques_et_chimiques_composes"></div>
  
    <table class = "TABLE_proprites_physiques_et_chimiques_composes" > </table>
  </div>
  
      <!-- Modifier -->
      <div id = "formulaire" class = "formulaire_table_modifier_TABLE_proprites_physiques_et_chimiques_composes"  style = " display : none "> </div> 
      <!-- Supprimer -->
      <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_proprites_physiques_et_chimiques_composes"  style = " display : none "> </div> 
      <!--Ajouter -->
      <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_proprites_physiques_et_chimiques_composes"  style = "display : none ">  </div> 


    </div>
          
          
                        </div>
          
          
                        <div class="col-lg-6 col-md-5">
                          <div id="map" class="mt-0 mt-lg-n4"></div>
                        </div>
                      </div>
                    </div>
                            </div>
          

                  <!--=========================================================-->
                 <!--* Données écotoxicologiques pour les composés -->
                 <!--=========================================================-->
                 <div class="mt-4"  id = "Z_DEC" style="overflow-x:scroll; overflow: hidden; max-width:100%; max-height: 15%; height:15% ;" >
                  <div class="card mb-4">
                    <div class="card-header pb-0">
                     
                    </div>
                    <div class="card-body p-3">
          
          
                        
                      <div class="row">

     <!------------------------------------------------->
     <!-- 6. SECTION POUR LES DONNEES ECOTOXICOLOGIQUES COMP [HAP, Prioritaire] -->
     <!-------------------------------------------------->

     <div  class = "Section_Données_ecotox_composé" > 

   

      
    
     <!-- ecotox_compose_organismes_aquatiques-->
      
<div class = "ecotox_compose_organismes_aquatiques">
  <!-- TITRE -->
 <!--<h3 > ecotox_compose_organismes_aquatiques </h3>-->

 <!-- BOUTONS -->
 <div class = "boutons_ecotox_compose_organismes_aquatiques"></div>
 <!-- TABLE -->
 <!-- <table class = "TABLE_ecotox_compose_organismes_aquatiques" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>-->
</div>


  <!--Modifier -->
  <div id = "formulaire" class = "formulaire_table_modifier_TABLE_ecotox_compose_organismes_aquatiques"  style = " display : none "> </div>
 <!-- Supprimer -->
 <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_ecotox_compose_organismes_aquatiques"  style = " display : none "> </div> 
 <!-- Ajouter -->
 <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_ecotox_compose_organismes_aquatiques"  style = "display : none ">  </div>



<!-- ecotox_compose_organisme_terrestre -->
      
<div class = "ecotox_compose_organisme_terrestre" style="overflow-x:scroll; overflow: hidden; max-width:100%; max-height: 30%;" >
  <!-- TITRE -->
 <!--<h3 > ecotox_compose_organisme_terrestre </h3>-->

 <!-- BOUTONS -->
 <div class = "boutons_ecotox_compose_organisme_terrestre"></div>
 <!-- TABLE -->
 <!--<table class = "TABLE_ecotox_compose_organisme_terrestre" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>-->
</div>

  <!--Modifier -->
  <div id = "formulaire" class = "formulaire_table_modifier_TABLE_ecotox_compose_organisme_terrestre"  style = " display : none "> </div>
 <!-- Supprimer -->
 <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_ecotox_compose_organisme_terrestre"  style = " display : none "> </div> 
 <!-- Ajouter -->
 <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_ecotox_compose_organisme_terrestre"  style = "display : none ">  </div>



      <!-- Invertébrés aquatiques -->
      
    
    <div class = "toxicite_invertebres_aquatiques_COMPO" style = " height: 15%, ">
       <!-- TITRE -->
      <h6 class="mb-0" > Organismes aquatiques </h6>
    
      <!-- BOUTONS -->
      <div class = "boutons_toxicite_invertebres_aquatiques_COMPO"></div>
      <!-- TABLE -->
      <table class = "TABLE_toxicite_invertebres_aquatiques_COMPO" style = "border-collapse: collapse; width: 1100px; height: 30px, "> </table>
    </div>


       <!--Modifier -->
       <div id = "formulaire" class = "formulaire_table_modifier_TABLE_toxicite_invertebres_aquatiques_COMPO"  style = " display : none "> </div>
      <!-- Supprimer -->
      <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_toxicite_invertebres_aquatiques_COMPO"  style = " display : none "> </div> 
      <!-- Ajouter -->
      <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_toxicite_invertebres_aquatiques_COMPO"  style = "display : none ">  </div>
     
      <div class = "Radar_ecotox"> 

        <style>
          #chartdiv2 {
            width: 100%;
            height: 1250px;
            font-size: 50px;
          }
          </style>
        
        <div id="chartdiv2"></div>
      
      
      </div>
    
    <!-- Poissons -->

  <div class = "toxicite_poissons_COMPO">

  <h6 class="mb-0" > Organismes terrestres </h6>

  <!-- BOUTONS -->
  <div class = "boutons_toxicite_poissons_COMPO"></div>

  <table class = "TABLE_toxicite_poissons_COMPO" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
</div>

    <!-- Modifier -->
    <div id = "formulaire" class = "formulaire_table_modifier_TABLE_toxicite_poissons_COMPO"  style = " display : none "> </div> 
    <!-- Supprimer -->
    <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_toxicite_poissons_COMPO"  style = " display : none "> </div> 
    <!--Ajouter -->
    <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_toxicite_poissons_COMPO"  style = "display : none ">  </div> 
     
 
    </div>

          
          
                        </div>
          
          
                        <div class="col-lg-6 col-md-5">
                          <div id="map" class="mt-0 mt-lg-n4"></div>
                        </div>
                      </div>
                    </div>
                            </div>
                  <!--=========================================================-->
                 <!--* Liste des mélanges complexes -->
                 <!--=========================================================-->

                <div class="mt-4" id = Z_LMC >
                  <div class="card mb-4">
                    <div class="card-header pb-0">
                      <h6 class="mb-0">Liste des variantes </h6>
                    </div>
                    <div class="card-body p-3">
                      <div class="row">
                        <div class = boutons_Liste_substances></div>
                        <div id = "section_liste_mélanges_complexes"   class="col-lg-6 col-md-7" style=" width: 100%;  overflow: scroll;">
                          <div class = "Liste_substances"  >
                             
                          
                            <!-- BOUTONS -->
                           
                          
                        
                            <table class = TABLE_Liste_substances style=" font-size: 88% ; zoom :95%" > </table>
                            
                          </div>
                       
                          
                              <!-- FORMULAIRES  -->
                              <!--  Modifier  -->
                              <div id = "formulaire"  class = "formulaire_table_modifier_TABLE_Liste_substances"  style = " display : none "> </div> 
                              <!-- Supprimer -->
                              <div id = "formulaire"  class = "formulaire_table_supprimer_TABLE_Liste_substances"  style = " display : none "> </div> 
                              <!--Ajouter -->
                              <div id = "formulaire"  class = "formulaire_table_ajouter_TABLE_Liste_substances"  style = "display : none ">  </div> 
          
                        </div>
                        </div>
                        <div class="col-lg-6 col-md-5">
                          <div id="map" class="mt-0 mt-lg-n4"></div>
                        </div>
                      </div>
                    </div>
                  </div>
        

                 <!--=========================================================-->
                 <!--* Propriétés physiques et chimiques pour les mélanges complexes-->
                 <!--=========================================================-->

                 <div class="mt-4" id = Z_PPCMC  style="display: none;">
        <div class="card mb-4">
          <div class="card-header pb-0">
            <h6 class="mb-0"> Propriétés physiques et chimiques (mélange complexe) </h6>
          </div>
          <div class="card-body p-3">


              
            <div class="row">
         

    <!------------------------------------------------------->
    <!-- 3. SECTION POUR LES PROPRIETES PHYSICO-CHIMIQUES (Mélanges complexes) --> 
    <!-------------------------------------------------------->


    <div class = "Section_Propriété_physique_et_chimique_substance" >

     
 
      <div class = "Propriete_physique_et_chimique_substance" >
       
       
       <!-- BOUTONS -->
       <div class = boutons_Propriete_physique_et_chimique_substance ></div>
     
       <table class = TABLE_Propriete_physique_et_chimique_substance > </table>
       
     </div>
     
       <!-- FORMULAIRES  -->
         <!--  Modifier  -->
         <div id = "formulaire"  class = "formulaire_table_modifier_TABLE_Propriete_physique_et_chimique_substance"  style = " display : none "> </div> 
         <!-- Supprimer -->
         <div id = "formulaire"  class = "formulaire_table_supprimer_TABLE_Propriete_physique_et_chimique_substance"  style = " display : none "> </div> 
         <!--Ajouter -->
         <div id = "formulaire"  class = "formulaire_table_ajouter_TABLE_Propriete_physique_et_chimique_substance"  style = "display : none ">  </div> 
 
 
      </div>



              </div>


              <div class="col-lg-6 col-md-5">
                <div id="map" class="mt-0 mt-lg-n4"></div>
              </div>
            </div>
          </div>
                  </div>


                 <!--=========================================================-->
                 <!--* Données écotoxicologiques pour les mélanges complexes-->
                 <!--=========================================================-->


                 <div class = "Section_Données_ecotox_substance"  >
                  <!--* organismes aquatiques-->
                 <div class="mt-4" id = Z_DECMC  style="overflow-x:scroll; overflow: hidden; max-width:100%;">
                  <div class="card mb-4">
                    <div class="card-header pb-0">
                      <h6 class="mb-0">  Données ecotoxicologiques pour les organismes aquatiques (mélange complexe) </h6>
                    </div>
                    <div class="card-body p-3">
          
          
                        
                      <div class="row">
                   
        
              
              <!-- ecotox_substances_organismes_aquatiques-->
      
              <div class = "ecotox_substances_organismes_aquatiques">
                <!-- TITRE -->
              
              
               <!-- BOUTONS -->
               <div class = "boutons_ecotox_substances_organismes_aquatiques"></div>
               <!-- TABLE -->
               <table class = "TABLE_ecotox_substances_organismes_aquatiques"> </table>
              </div>
              
              
                <!--Modifier -->
                <div id = "formulaire" class = "formulaire_table_modifier_TABLE_ecotox_substances_organismes_aquatiques"  style = " display : none "> </div>
               <!-- Supprimer -->
               <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_ecotox_substances_organismes_aquatiques"  style = " display : none "> </div> 
               <!-- Ajouter -->
               <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_ecotox_substances_organismes_aquatiques"  style = "display : none ">  </div>
              
          
              </div>
          
                        </div>
          
          
                        <div class="col-lg-6 col-md-5">
                          <div id="map" class="mt-0 mt-lg-n4"></div>
                        </div>
                      </div>
                    </div>
                           
                  <!--* organismes terrestres-->
                    <div class="mt-4"  id = Z_DECMC2 style="overflow-x:scroll; overflow: hidden; max-width:100%;" >
                      <div class="card mb-4">
                        <div class="card-header pb-0">
                          <h6 class="mb-0">  Données ecotoxicologiques pour les organismes terrestres (mélange complexe) </h6>
                        </div>
                        <div class="card-body p-3">
              
              
                            
                          <div class="row">
                       
            
                  
               
 <!-- ecotox_substances_organisme_terrestre -->
      
<div class = "ecotox_substances_organisme_terrestre">
  <!-- TITRE -->


 <!-- BOUTONS -->
 <div class = "boutons_ecotox_substances_organisme_terrestre"></div>
 <!-- TABLE -->
 <table class = "TABLE_ecotox_substances_organisme_terrestre" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
</div>


  <!--Modifier -->
  <div id = "formulaire" class = "formulaire_table_modifier_TABLE_ecotox_substances_organisme_terrestre"  style = " display : none "> </div>
 <!-- Supprimer -->
 <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_ecotox_substances_organisme_terrestre"  style = " display : none "> </div> 
 <!-- Ajouter -->
 <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_ecotox_substances_organisme_terrestre"  style = "display : none ">  </div>

                  
              
                  </div>
              
                            </div>
              
              
                            <div class="col-lg-6 col-md-5">
                              <div id="map" class="mt-0 mt-lg-n4"></div>
                            </div>
                          </div>
                        </div>

                    
                          </div>


      
      </div>



                 <!--=========================================================-->
                 <!--* Composition des mélanges complexes-->
                 <!--=========================================================-->



        <div class="row mt-4" id = "Z_CGPH" style="display: none;">
          <div class="col-lg-4 col-sm-6" style="width: 50%;" >
          <div class="card h-100">
            <div class="card-header pb-0 p-3">
              <div class="d-flex justify-content-between">
                <h6 class="mb-0">Composition</h6>
          
                <div id="chartdiv" style="zoom: 40%; font-size: 170%" ></div>
                
              
              </div>
            </div>       

            <div class="card-body pb-0 p-3 mt-4" >


              <div class="row">
                <div class="col-7 text-start" >
                  <div class="chart">
                 
                    
                  </div>
                </div>
             
              </div>
            </div>
            <div class="card-footer pt-0 pb-0 p-3 d-flex align-items-center" style="display: none;">
              <div class="w-60">
                <p class="text-sm" s style="display: none;">
                  More than <b>1,200,000</b> sales are made using referral marketing, and <b>700,000</b> are from social media.
                </p>
              </div>
              <div class="w-40 text-end">
                <a style="display: none;" class="btn bg-light mb-0 text-end" href="javascript:;">Read more</a>
              </div>
            </div>
          </div>
         </div>



        <div class="col-lg-8 col-sm-6 mt-sm-0 mt-4"  style="width: 47%;">
          <div class="card">
            <div class="card-header pb-0 p-3" >
              <div class="d-flex justify-content-between">
                <h6 class="mb-0">Courbe des critères</h6>



             
               


            
                <button style="display: none;"  type="button" class="btn btn-icon-only btn-rounded btn-outline-secondary mb-0 ms-2 btn-sm d-flex align-items-center justify-content-center" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-original-title="See which ads perform better">
                  <i style="display: none;" class="material-symbols-rounded text-sm">priority_high</i>
                </button>
              </div>
             
            </div>
            <div class="card-body p-3">
               <!--<div  id="myChart" class="chart--container"><a class="zc-ref" href="https://www.zingchart.com/" style="zoom: 40%; font-size: 170% ;display: none;" > Outil Ecotox </a></div>-->
              <div class="chart">

                   <!-- Graphique ici -->
                   <div> 
                    
                    <div> 
                        <canvas id="coursesChart"
                            width="700" height="300"></canvas> 
                    </div> 
                   
                <canvas style="display: none;"  id="chart-line" class="chart-canvas" height="300"></canvas>
                <!-- -->

              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-4">
        <div class="col-lg-8">
          <div class="card h-100">
            <div class="card-header pb-0 p-3">
              <div class="d-flex justify-content-between">


      <!--========================================================= ! -->
      <!--* Composition chimique -->
      <!--========================================================= ! -->
    

                <h6 class="mb-0">Composition chimique du mélange complexe</h6>
              </div>
            </div>
            <div class="card-body p-3">
     
    
      
    <div class = "Section_Composition" >

  
  
      <!-- BOUTONS -->
      <div class = "boutons_composition_substances"></div>
      <form class = dureté  method ="post"> 
        <label  class = label_dureté  for = "pH"> Chercher critères (exemples : (CVAA, CVAC, VAFe))  </label>
        <input  class = input_dureté id = "input_mode_analyse_compo" type = "text">
       <label class = label_dureté for = "Dureté"> </label>
   </form>
      <h3>  </h3>
      <h3>  </h3>

     
      <div class = "Paramètre_critères_formu"> Veuillez cliquer sur une des lignes afin de choisir un critère spécifique. <table class = "table_paramètres_critères" style=" font-size: 20px; zoom : 55%">
        <caption>
          Veuillez cliquer sur une des lignes afin de choisir un critère spécifique.
        </caption>
        <thead>
          <tr style=" font-size: 25px;">
            <th > Nom_compo </th>
            <th scope="col"> No cas </th>
            <th scope="col"> Abrev </th>
            <th scope="col"> Valeur </th>
            <th scope="col"> Note </th>
            <th scope="col"> Forme </th> 
            <th scope="col"> Code </th>
            <th scope="col"> Références </th>
          
           
          </tr>
        </thead>
        <tbody class = "body_table_paramètres_critères" > </tbody></table></div>
       



        <div class = "Paramètre_ecotox_formu">
          
         
         Veuillez cliquer sur une des lignes afin de choisir un critère spécifique.</h2> <table class = "table_paramètres_ecotox" id = "tablerapideecotox" style=" font-size: 20px; zoom : 55%">
           
           
            
          <thead>
         
            <tr style=" font-size: 25px;">
              
                <th>categorie</th>
                <th>nom_fr</th>
                <th>nom_en</th>
                <th>cas</th>
                <th>symbole_formule</th>
                <th>mots_cles</th>
                <th>groupe_organisme</th>
                <th>espece</th>
                <th>nom_commun</th>
                <th>parametre</th>
                <th>cible</th>
                <th>duree_exposition</th>
                <th>unite_duree</th>
                <th>valeur_min</th>
                <th>valeur_moy</th>
                <th>valeur_max</th>
                <th>unite_valeur</th>
                <th>stade_de_vie</th>
                <th>type_d_exposition</th>
                <th>milieu_de_test</th>
                <th>effet_détails</th>
                <th>base_de_donnees</th>
                <th>reference_citation</th>
                <th>reference_titre</th>
          
            </tr>
          </thead>
          <tbody class = "body_table_ecotox_rapide" > </tbody></table></div>




      

      <h2 class = titre_section id = "CompositionS"> </h2>
      
      <div class = "composition_substances">

      <table class = "TABLE_composition_substances" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>

      

       <div class = "Paramètre_critères"  > 
      
      
       </div>


    </div>
    
        <!-- Modifier -->
        <div id = "formulaire" class = "formulaire_table_modifier_TABLE_composition_substances"  style = " display : none "> </div> 
        <!-- Supprimer -->
        <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_composition_substances"  style = " display : none "> </div> 
        <!--Ajouter -->
        <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_composition_substances"  style = "display : none ">  </div> 

    </div>
              <div class="chart">
                <canvas id="chart-bar" class="chart-canvas" height="340" style="display: none;"></canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4 mt-lg-0 mt-4">
          <div class="card">
            <div class="card-header pb-0 p-3">

              <div class="d-flex justify-content-between">
                <div class = "section_rapport" style = "font-size: 9px;" >  </div>  <!--* Section commentaires à droite -->
              </div>

            </div>
         
          </div>
        </div>

   </div>

      </div>







 <!-- Script  HTML Ancient OUTIL ECOTOX à supprimer à la fin ! -->

 <div style="display:inline;">

  
  <!--Page   ------------------------style="display: inline-flex;  float: left;----->
  
<div class = "La_page_entière" style="display: inline-flex;  float: left;
       clear: none;">


 

   <!--Partie  du haut  ----------------------------->

<div class ="Page_partie_du_haut"   >


  
</div>

  <!--Partie centrale ------------------------------>

  <div class="main-content" id="panel" style="display: none;  float: left;
       clear: none;"  >


 
    <!-- Corp de la page -->

  


  
      <!-- Rechercher -->
      <h3> </h3>
      <h3> </h3>
      <h3> </h3>
      <h3> </h3>

      <P >  Rechercher un composé ou une substance  </P>
      <div class = Dureté style = "align-items: center" >
    
        <form class = dureté method ="post" > 
             <label class = label_dureté for = "pH"> Nom (Francais) </label>
             <input class = input_dureté  id = "input_Nom" type = "text" >
             <label class = label_dureté for = "Dureté"> </label>
        </form>
        <h3></h3>
        <form class = dureté  method ="post"> 
            <label  class = label_dureté  for = "pH"> CAS </label>
            <input  class = input_dureté id = "input_CAS" type = "text">
           <label class = label_dureté for = "Dureté"> </label>
       </form>
       <h3></h3>
       <form  class = dureté method ="post" > 
        <label class = label_dureté for = "pH"> Utiliser un mot-clé </label>
        <input  class = input_dureté id = "input_mot-clé" type = "text">
        <label class = label_dureté for = "Dureté"> </label>
       </form>
       <h3></h3>
    </div>
       
      <button class = confirmer_annuler style= "font-size: 25px;"  id = 'Rechercher_composé_substance'> Chercher </button>
      <button class = confirmer_annuler   style= "font-size: 25px;" id = 'Tout_afficher'> Tout afficher </button>
      
      <h3></h3>
      <!-- BOUTONS -->






      <div class="container-fluid pt-3 DIV_1">
          <div class="card mb-4">
              <div class="card-header pb-0">
        
              </div>
              <div class="card-body px-0 pt-0 pb-2">
                  <div class="table-responsive p-0">

                     <!--Table liste generale -->
                    <div class = boutons_Liste_generale></div>

                    <div class = "Liste_generale">
                      <h3 > Résultats de la recheche </h3>
                      
                      
                      <table class = TABLE_Liste_generale style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
                  
                    </div>
                       <div  class = "pagination_Liste_generale"> 
                        
                                             
                    </div>
                    
                      <!-- FORMULAIRES  -->
                        <!--  Modifier  -->
                        <div id = "formulaire"  class = "formulaire_table_modifier_TABLE_Liste_generale"  style = " display : none "> </div> 
                        <!-- Supprimer -->
                        <div id = "formulaire"  class = "formulaire_table_supprimer_TABLE_Liste_generale"  style = " display : none "> </div> 
                        <!--Ajouter -->
                        <div id = "formulaire"  class = "formulaire_table_ajouter_TABLE_Liste_generale"  style = "display : none ">  </div> 
                       <!-- Rechercher  FIN SECTION -->
                  </div>
              </div>
          </div>
          <div class="card mb-4">
              <div class="card-header pb-0 Zone_table_model">
                 
              </div>
              <div class="card-body px-0 pt-0 pb-2">
                  <div class="table-responsive p-0">
                     
                  
                   
                              
                            
                  </div>
              </div>
          </div>
          <div class="row mt-4 removable">
              <div class="col-lg-8 col-md-6">
                  <div class="card mb-4">
                      <div class="card-header pb-0 TS">
                          <div class="row">
                              <div class="col-lg-6 col-7">
                                
                              </div>
                              <div class="col-lg-6 col-5 my-auto text-end">
                                  <div class="dropdown float-lg-end pe-4">
                                      <a class="cursor-pointer" id="dropdownTable" data-bs-toggle="dropdown" aria-expanded="false">
                                          <i class="fa fa-ellipsis-v text-secondary" aria-hidden="true"></i>
                                      </a>
                                      <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5" aria-labelledby="dropdownTable" style="font-size: 45px;">
                                          <li><a class="dropdown-item border-radius-md" href="javascript:;"> Composition </a></li>
                                          <li><a class="dropdown-item border-radius-md" href="javascript:;"> Toxicité </a></li>
                                          <li><a class="dropdown-item border-radius-md" href="javascript:;"> Propriétés </a></li>
                                      </ul>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="card-body px-0 pb-2">
                          <div class="table-responsive">

                            
                                
  <!------------------------------------------>
  <!-- 4. SECTION POUR LES COMPOSITIONS -------->
  <!------------------------------------------>
  
    
  <div class = "Section_Composition" >

    <h3> Composition chimique du mélange complexe </h3>

    <!-- BOUTONS -->
    <div class = "boutons_composition_substances"></div>
    <form class = dureté  method ="post"> 
      <label  class = label_dureté  for = "pH"> Chercher critères (exemples : (CVAA, CVAC, VAFe))  </label>
      <input  class = input_dureté id = "input_mode_analyse_compo" type = "text">
     <label class = label_dureté for = "Dureté"> </label>
 </form>
    <h3>  </h3>
    <h3>  </h3>

   
    <div class = "Paramètre_critères_formu"> Veuillez cliquer sur une des lignes afin de choisir un critère spécifique. <table class = "table_paramètres_critères" style=" font-size: 20px;">
      <caption>
        Veuillez cliquer sur une des lignes afin de choisir un critère spécifique.
      </caption>
      <thead>
        <tr>
          <th > Nom_compo </th>
          <th scope="col"> no cas </th>
          <th scope="col"> Abrev du critère </th>
          <th scope="col"> Valeur </th>
          <th scope="col"> Note </th>
          <th scope="col"> Forme </th> 
          <th scope="col"> Code </th>
          <th scope="col"> Références </th>
        
         
        </tr>
      </thead>
      <tbody class = "body_table_paramètres_critères" > </tbody></table></div>
     
    

    <h2 class = titre_section id = "CompositionS">  </h2>
    
    <div class = "composition_substances">

    <table class = "TABLE_composition_substances" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>

    

     <div class = "Paramètre_critères"  > 
    
    
     </div>


  </div>
  
      <!-- Modifier -->
      <div id = "formulaire" class = "formulaire_table_modifier_TABLE_composition_substances"  style = " display : none "> </div> 
      <!-- Supprimer -->
      <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_composition_substances"  style = " display : none "> </div> 
      <!--Ajouter -->
      <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_composition_substances"  style = "display : none ">  </div> 

  </div>







<!------------------------------------------------------->
  <!-- 3. SECTION POUR LES PROPRIETES PHYSICO-CHIMIQUES COMP --> 
  <!-------------------------------------------------------->
  <div class = "Section_Propriété_physique_et_chimique_composé" > 
    <h2 class = titre_section> ---Propriétés physiques et chimiques (composé) --- </h2>
    <div class = "barre" style = "width: 1920px; height: 3px; background-color: rgb(0, 0, 0);"></div>

   <!-- proprites_physiques_et_chimiques_composes -->

<div class = "proprites_physiques_et_chimiques_composes">

  <h3> Propriétés physiques et chimiques  </h3>

  <!-- BOUTONS -->
  <div class = "boutons_proprites_physiques_et_chimiques_composes"></div>

  <table class = "TABLE_proprites_physiques_et_chimiques_composes" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
</div>

    <!-- Modifier -->
    <div id = "formulaire" class = "formulaire_table_modifier_TABLE_proprites_physiques_et_chimiques_composes"  style = " display : none "> </div> 
    <!-- Supprimer -->
    <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_proprites_physiques_et_chimiques_composes"  style = " display : none "> </div> 
    <!--Ajouter -->
    <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_proprites_physiques_et_chimiques_composes"  style = "display : none ">  </div> 


  </div>



    <!------------------------------------------------->
   <!-- 6. SECTION POUR LES DONNEES ECOTOXICOLOGIQUES COMP [HAP, Prioritaire] -->
   <!-------------------------------------------------->

  <div  class = "Section_Données_ecotox_composé" > 

    <h2 class = "titre_section" >--- Données écotoxicologiques (composés) ---</h2> 

    
  
   <!-- ecotox_compose_organismes_aquatiques-->
    
<div class = "ecotox_compose_organismes_aquatiques">
<!-- TITRE -->
<!--<h3 > ecotox_compose_organismes_aquatiques </h3>-->

<!-- BOUTONS -->
<div class = "boutons_ecotox_compose_organismes_aquatiques"></div>
<!-- TABLE -->
<!-- <table class = "TABLE_ecotox_compose_organismes_aquatiques" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>-->
</div>


<!--Modifier -->
<div id = "formulaire" class = "formulaire_table_modifier_TABLE_ecotox_compose_organismes_aquatiques"  style = " display : none "> </div>
<!-- Supprimer -->
<div id = "formulaire" class = "formulaire_table_supprimer_TABLE_ecotox_compose_organismes_aquatiques"  style = " display : none "> </div> 
<!-- Ajouter -->
<div id = "formulaire" class = "formulaire_table_ajouter_TABLE_ecotox_compose_organismes_aquatiques"  style = "display : none ">  </div>



<!-- ecotox_compose_organisme_terrestre -->
    
<div class = "ecotox_compose_organisme_terrestre">
<!-- TITRE -->
<!--<h3 > ecotox_compose_organisme_terrestre </h3>-->

<!-- BOUTONS -->
<div class = "boutons_ecotox_compose_organisme_terrestre"></div>
<!-- TABLE -->
<!--<table class = "TABLE_ecotox_compose_organisme_terrestre" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>-->
</div>


<!--Modifier -->
<div id = "formulaire" class = "formulaire_table_modifier_TABLE_ecotox_compose_organisme_terrestre"  style = " display : none "> </div>
<!-- Supprimer -->
<div id = "formulaire" class = "formulaire_table_supprimer_TABLE_ecotox_compose_organisme_terrestre"  style = " display : none "> </div> 
<!-- Ajouter -->
<div id = "formulaire" class = "formulaire_table_ajouter_TABLE_ecotox_compose_organisme_terrestre"  style = "display : none ">  </div>



    <!-- Invertébrés aquatiques -->
    
  
  <div class = "toxicite_invertebres_aquatiques_COMPO">
     <!-- TITRE -->
    <h3 > Organismes aquatiques </h3>
  
    <!-- BOUTONS -->
    <div class = "boutons_toxicite_invertebres_aquatiques_COMPO"></div>
    <!-- TABLE -->
    <table class = "TABLE_toxicite_invertebres_aquatiques_COMPO" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
  </div>


     <!--Modifier -->
     <div id = "formulaire" class = "formulaire_table_modifier_TABLE_toxicite_invertebres_aquatiques_COMPO"  style = " display : none "> </div>
    <!-- Supprimer -->
    <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_toxicite_invertebres_aquatiques_COMPO"  style = " display : none "> </div> 
    <!-- Ajouter -->
    <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_toxicite_invertebres_aquatiques_COMPO"  style = "display : none ">  </div>
   
    <div class = "Radar_ecotox"> 

      <style>
        #chartdiv2 {
          width: 100%;
          height: 1250px;
          font-size: 50px;
        }
        </style>
      
      <div id="chartdiv2"></div>
    
    
    </div>
  
  <!-- Poissons -->

<div class = "toxicite_poissons_COMPO">

<h3> Organismes terrestres </h3>

<!-- BOUTONS -->
<div class = "boutons_toxicite_poissons_COMPO"></div>

<table class = "TABLE_toxicite_poissons_COMPO" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
</div>

  <!-- Modifier -->
  <div id = "formulaire" class = "formulaire_table_modifier_TABLE_toxicite_poissons_COMPO"  style = " display : none "> </div> 
  <!-- Supprimer -->
  <div id = "formulaire" class = "formulaire_table_supprimer_TABLE_toxicite_poissons_COMPO"  style = " display : none "> </div> 
  <!--Ajouter -->
  <div id = "formulaire" class = "formulaire_table_ajouter_TABLE_toxicite_poissons_COMPO"  style = "display : none ">  </div> 
   

  </div>

<!------------------------------------------------->
  <!-- 6. SECTION POUR LES DONNEES ECOTOXICOLOGIQUES SUB -->
  <!-------------------------------------------------->
  <div class = "Section_Données_ecotox_substance">

    <h2 class = titre_section> --- Données ecotoxicologiques (mélange complexe) --- </h2> 


     <!-- ecotox_substances_organismes_aquatiques-->
    
<div class = "ecotox_substances_organismes_aquatiques">
<!-- TITRE -->
<h3 >  Données ecotoxicologiques pour les organismes aquatiques </h3>

<!-- BOUTONS -->
<div class = "boutons_ecotox_substances_organismes_aquatiques"></div>
<!-- TABLE -->
<table class = "TABLE_ecotox_substances_organismes_aquatiques" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
</div>


<!--Modifier -->
<div id = "formulaire" class = "formulaire_table_modifier_TABLE_ecotox_substances_organismes_aquatiques"  style = " display : none "> </div>
<!-- Supprimer -->
<div id = "formulaire" class = "formulaire_table_supprimer_TABLE_ecotox_substances_organismes_aquatiques"  style = " display : none "> </div> 
<!-- Ajouter -->
<div id = "formulaire" class = "formulaire_table_ajouter_TABLE_ecotox_substances_organismes_aquatiques"  style = "display : none ">  </div>




<!-- ecotox_substances_organisme_terrestre -->
    
<div class = "ecotox_substances_organisme_terrestre">
<!-- TITRE -->
<h3 >  Données ecotoxicologiques pour les organismes terrestres </h3>

<!-- BOUTONS -->
<div class = "boutons_ecotox_substances_organisme_terrestre"></div>
<!-- TABLE -->
<table class = "TABLE_ecotox_substances_organisme_terrestre" style = "border-collapse: collapse; width: 1100px; height: 30px"> </table>
</div>


<!--Modifier -->
<div id = "formulaire" class = "formulaire_table_modifier_TABLE_ecotox_substances_organisme_terrestre"  style = " display : none "> </div>
<!-- Supprimer -->
<div id = "formulaire" class = "formulaire_table_supprimer_TABLE_ecotox_substances_organisme_terrestre"  style = " display : none "> </div> 
<!-- Ajouter -->
<div id = "formulaire" class = "formulaire_table_ajouter_TABLE_ecotox_substances_organisme_terrestre"  style = "display : none ">  </div>


  
  </div>


                          </div>
                      </div>
                  </div>


                
                  <div class="card mb-4 Zone_graphique" style="display: none;">
                      <div class="card-header pb-0">
                        
                         
                      </div>
                      <div class="card-body p-3">
                        <div id="myChart" class="chart--container"><a class="zc-ref" href="https://www.zingchart.com/"> Outil Ecotox </a></div>
                          <div class="chart">
                              <div class="chartjs-size-monitor">
                                  <div class="chartjs-size-monitor-expand">
                                      <div class=""></div>
                                  </div>
                                  <div class="chartjs-size-monitor-shrink">
                                      <div class=""></div>
                                  </div>
                              </div>
                              <div class="chartjs-size-monitor">
                                  <div class="chartjs-size-monitor-expand">
                                      <div class=""></div>
                                  </div>
                                  <div class="chartjs-size-monitor-shrink">
                                      <div class=""></div>
                                  </div>
                              </div>
                              <canvas id="chart-line" class="chart-canvas chartjs-render-monitor" height="375" width="707" style="display: block; height: 300px; width: 565.6px; box-sizing: border-box;"></canvas>
                          </div>
                      </div>
                  </div>
              </div>


                  <div class="col-lg-4 col-md-6" > 
                        <div class = "diagramme_composition" style=" display: none; box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);"> 
                      
                          <!-- Styles -->
                         <style>
                        #chartdiv {
                        width: 100%;
                        height: 900px;
                         }
                   
                        </style>
                        
                       
                       <div id="chartdiv"></div>
                       
                       
                       
                       </div>

            <div class = "infoCompo" style ="display: none; width: 650px;" >
              <div class="col-lg-4 col-md-6">
                  <div class="card mb-4 h-100" style ="width: 650px;">
                      <div class="card-header pb-0" >

                             <h2 class = "titre_rapport"> Commentaires </h2>
                            <div class = "section_rapport" style = "font-size: 9px;">  </div> 
                         
                            
                              </div>
                          </div>
                      </div>
               

                  </div>


              </div>
          </div>
      </div>
      <footer class="footer pt-3 pb-4">
          <div class="container-fluid">
              <div class="row align-items-center justify-content-lg-between">
                  <div class="col-lg-6 mb-lg-0 mb-4">
              
                  </div>
                  <div class="col-lg-6">
                    
                  </div>
              </div>
          </div>
      </footer>
  </div>

</div>




<!-- Paramètres du milieu -->
<div>
  <footer class="footer py-4  ">
   <div class="container-fluid">
     <div class="row align-items-center justify-content-lg-between">
       <div class="col-lg-6 mb-lg-0 mb-4">
         <div class="copyright text-center text-sm text-muted text-lg-start">
           © <script>
             document.write(new Date().getFullYear())
           </script>,
          Centre d’Expertise en Analyse Environnementale du Québec (CEAEQ).</a>
           
         </div>
       </div>
       <div class="col-lg-6">
         <ul class="nav nav-footer justify-content-center justify-content-lg-end">
        
         </ul>
       </div>
     </div>
   </div>
  </footer>
</div>


</main>


</body>

  <!-- Paramètres du milieu (barre de navigation verticale à la droite de l'application) ! -->

  <div class="fixed-plugin"  style="zoom:90%;">

    <a class="fixed-plugin-button text-dark position-fixed px-3 py-2">
      <i class="material-symbols-rounded py-2">settings</i>
    </a>
    <div class="card shadow-lg" style="z-index: 9005;">
      <div class="card-header pb-0 pt-3">
        <div class="float-start">
          <h5 class="mt-3 mb-0">Paramètres du milieu</h5>
          <p>Changer le pH, la dureté, etc.</p>
        </div>
        <div class="float-end mt-4">
          <button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
            <i class="material-symbols-rounded">clear</i>
          </button>
        </div>
        <!-- End Toggle Button -->
      </div>
      <hr class="horizontal dark my-1">
      <div class="card-body pt-sm-3 pt-0">
        <!-- Sidebar Backgrounds -->
     

        <form class = dureté method ="post"  > 
        
        
        
     </form>

        
        <!-- Sidenav Type -->
        <div class="mt-3">
          <h6 class="mb-0"  id = "Info_TEMP"> Changer la température  [T = 25 °C]</h6>
          <hr class="horizontal dark my-3">

          <div class="input-group input-group-outline">
            <label class="form-label"> Température (°C)</label>
            <input id = "input_temp"  type="text" class="form-control">
          </div>

          <hr class="horizontal dark my-3">
          <h6 class="mb-0" id = "Info_PH"  >Changer le pH [pH = 7 ]</h6>
          <hr class="horizontal dark my-3">

         
          <div class="input-group input-group-outline">
            <label class="form-label"> pH </label>
            <input id = "input_ph" type="text" class="form-control">
          </div>

          <hr class="horizontal dark my-3">

          <h6 class="mb-0" id = "Info_dureté" >  Changer la dureté [Dureté = 36.317 mg/L]</h6>
          <hr class="horizontal dark my-3">

          <div class="input-group input-group-outline">
            <label class="form-label"> Dureté minimale (mg/L) </label>
            <input id = "input_durete_min" type="text" class="form-control">
          </div>

          <div class="input-group input-group-outline">
            <label class="form-label"> Dureté moyenne (mg/L) </label>
            <input id = "input_durete" type="text" class="form-control">
          </div>


          <div class="input-group input-group-outline">
            <label class="form-label"> Dureté maximale (mg/L) </label>
            <input id = "input_durete_max" type="text" class="form-control">
          </div>



          <hr class="horizontal dark my-3">
          <div class="input-group input-group-outline">
            <label class="form-label"> Calcium  (mg/L) </label>
            <input id = "input_ca" type="text" class="form-control">
          </div>
          <hr class="horizontal dark my-3">

          <div class="input-group input-group-outline">
            <label class="form-label"> Magnésium  (mg/L) </label>
            <input id = "input_mg" type="text" class="form-control">
          </div>


          <hr class="horizontal dark my-3">
          <h6 class="mb-0" id = "Info_COD"  > Changer la concentration
             en carbone organique dissous (COD) (mg/L)[COD = 5 mg/L] </h6>
          <hr class="horizontal dark my-3">


          <div class="input-group input-group-outline">
            <label class="form-label"> COD (mg/L) </label>
            <input id = "input_COD" type="text" class="form-control">
          </div>



        <!-- code non utilisé -->
        <div class="mt-3 d-flex" style="display: none;">
          <h6 style="display: none;"  class="mb-0">Métaux extractibles totaux</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input style="display: none;" class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarFixed" onclick="navbarFixed(this)">
          </div>
        </div>
    
        <div class="mt-2 d-flex">
          <h6 style="display: none;"v class="mb-0">Critère pour les sols</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input style="display: none;"  class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarMinimize" onclick="navbarMinimize(this)">
          </div>
        </div>
        
        <div class="mt-2 d-flex">
          <h6 style="display: none;"  class="mb-0">Critère pour l'eau</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input style="display: none;"  class="form-check-input mt-1 ms-auto" type="checkbox" id="dark-version" onclick="darkMode(this)">
          </div>
        </div>

    
      
        <a  id = 'Recalculer_critères' class="btn btn-outline-dark w-100" >Confirmer</a>
        <div class="w-100 text-center">
          
        </div>
      </div>
    </div>
  </div>
  </div>



</div>


  <!--   Core JS Files   -->
  <script src="/js/core/popper.min.js"></script>
  <script src="/js/core/bootstrap.min.js"></script>
  <script src="/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="/js/plugins/smooth-scrollbar.min.js"></script>
  <!-- Kanban scripts -->
  <script src="/js/plugins/dragula/dragula.min.js"></script>
  <script src="/js/plugins/jkanban/jkanban.min.js"></script>
  <script src="/js/plugins/chartjs.min.js"></script>
  <script>
    var ctx1 = document.getElementById("chart-line").getContext("2d");
    //var ctx2 = document.getElementById("chart-pie").getContext("2d");
    var ctx3 = document.getElementById("chart-bar").getContext("2d");
  </script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="/js/material-dashboard.min.js?v=3.1.0"></script>

<!-- Script principal -->

  <script>
   
            console.log("Lancement du script de l'outil écotox")
      
           
            //-function Ouvrir_page (){document.getElementsByClassName("outil-ecotox")[0].style.display = "inline"}//
          //-  window.setTimeout(Ouvrir_page, 500);//
          
          
          /*
            //------------------------------------------------------------//
            //--------Barre de navigation verticale-----------------------//
            //------------------------------------------------------------//
      
            Etat_barre = "Fermé"
      
            document.getElementsByClassName("lists")[0].style.display = 'none'
            document.getElementsByClassName("nom_logo")[0].style.display = 'none'
            document.getElementsByClassName("contenu_barre_verticale")[0].style.width = '100px'
         
      
      
            document.getElementsByClassName("contenu_barre_verticale")[0].addEventListener('mouseover', event => {
              document.getElementsByClassName("lists")[0].style.display = 'inline' 
                document.getElementsByClassName("nom_logo")[0].style.display = 'inline' 
                document.getElementsByClassName("contenu_barre_verticale")[0].style.width = '650px' 
                 Etat_barre = "Ouvert"
            } )
      
            document.getElementsByClassName("contenu_barre_verticale")[0].addEventListener('mouseout', event => {
              document.getElementsByClassName("lists")[0].style.display = 'none'
                 document.getElementsByClassName("nom_logo")[0].style.display = 'none'
                document.getElementsByClassName("contenu_barre_verticale")[0].style.width = '100px'
                 Etat_barre = "Fermé"
                
            } )*/
      
      


            function traitement_CAS (cas_cible){
cas_normalisé = cas_cible.replaceAll("-", "")
while (cas_normalisé.length < 10) {
  cas_normalisé = '0' + cas_normalisé
}

return  cas_normalisé
}



function NORMALISER_CAS (cas_entrée) {
   
   cas_normalisé = traitement_CAS (cas_entrée)
   i = 1
   a = 1
   L = cas_normalisé.length
   CAS_normalisé_sortie = cas_normalisé[L - 1]
   insertion = ""
   
while (i < 10) {
     x = L - 1 - a

     if (i !== 1  &&  i !== 4  &&  x > 0  ){  CAS_normalisé_sortie  =  cas_normalisé[x] + CAS_normalisé_sortie 
      a = a + 1
   }
   if (i === 1   ||  i === 4  &&  x > 0  )  { CAS_normalisé_sortie  =  '-' + CAS_normalisé_sortie }

   if (  x < 0  )  { CAS_normalisé_sortie  =  '0' + CAS_normalisé_sortie }
     
     i = i + 1

}
       return  CAS_normalisé_sortie

    
 }



            //------------------------------------------------------------//
            //--------Barre de navigation horizontale -----------------------//
            //------------------------------------------------------------//
            Laisser_temps_pour_chargement = "on"
            Formulaire_actuel = {}
            Formulaire_actuel.état = "neutre"

            function Activer_bouton (){Laisser_temps_pour_chargement = "on"}
            function Activer_ouverture_formulaire (){Formulaire_actuel.état = "fermé"}//
            
      
            function Barre_de_navigation_horizontal() {
            try{
         
           fetch("https://outil-ecotox-repository-api2.onrender.com/" + "SQL_Liste_generale")
            .then((response) => response.json())
            .then((tableau_importations)=> {
      
              Données_liste_générale = tableau_importations
      
            
            Eléments_Navigation_horizontal= [["Métaux","Navigation_Métaux"], ["BTEX","Navigation_BTEX"], ["HAP","Navigation_HAP"], ["Produits pétroliers", "Navigation_Produits_pétroliers"], ["Eaux_incendie", "Navigation_Eauxincendie"] ]
            Eléments_Navigation_horizontal.forEach(élément_de_navigation =>{
      
              Colonne_navigation_horizontal = document.getElementById(élément_de_navigation[1])
              Colonne_navigation_horizontal.innerHTML = ``
              Filtre_Navigation_horizontal = Données_liste_générale.filter((ligne_liste_générale)=>  (ligne_liste_générale.mots_clés.includes(élément_de_navigation[0]) === true) )
               
              if ( Filtre_Navigation_horizontal.length !== 0 ){
                Filtre_Navigation_horizontal.forEach(ligne_Filtre =>{
      
                   let li = document.createElement('li')
                   Nom_Maj_1er_lettre =  ligne_Filtre.nom_fr.charAt(0).toUpperCase() + ligne_Filtre.nom_fr.slice(1)
                   li.innerHTML = `
                 <li class="nav-item">
                      <a class="nav-link text-dark " target="_blank">
                        <span class="sidenav-mini-icon"> B </span>
                        <span class="sidenav-normal  ms-1  ps-1"> ${Nom_Maj_1er_lettre} </span>
                      </a>
                    </li>`



                   Colonne_navigation_horizontal.appendChild(li)
      
                   li.addEventListener("click", () => {

                    if(Laisser_temps_pour_chargement === "on"){   Utilisateur.nom =  ligne_Filtre.nom_fr
                    Utilisateur.nom_En = ligne_Filtre.nom_en
                    Utilisateur.description =  ligne_Filtre.mots_clés
                    Utilisateur.mots_clés_recherche =  ligne_Filtre.mots_clés
                    Utilisateur.cas =  ligne_Filtre.cas
                    Utilisateur.type =  ligne_Filtre.catégorie
                    Utilisateur.symbole =  ligne_Filtre.symbole_formule


                    document.getElementById("Haut_nom").innerHTML =   Utilisateur.nom 
                    document.getElementById("Haut_cas").innerHTML =  Utilisateur.cas
                    document.getElementById("Haut_symb").innerHTML = Utilisateur.symbole 
      
                    
                    document.getElementsByClassName('titre_section')[0].innerHTML = "Veuillez sélectionner un des mélanges complexes dans le tableau ci-dessus."
                    document.getElementById("CompositionS").style.display = "none"
                    document.getElementById("Z_PPCC").style.display = "none"
                    document.getElementById("Z_DEC").style.display = "none"

                    Table_actuel.select = "neutre"
                    Formulaire_actuel.état = "ouvert"

                    Chargement_Page(Utilisateur)
                    Laisser_temps_pour_chargement = "off"

                  }
                    else {console.log('Chargement en cours avant la réutilisation du bouton')}
 
                    window.setTimeout(Activer_bouton,750)
                    window.setTimeout(Activer_ouverture_formulaire,650)

      
               
                      
                   })
      
                    })
              }
              
             
            })
      
           
         
      
      
      
            
      
      
      
      
          
          })
              }
      
              catch(e){ result.success= "Échec de l'importation"}
            
            }
      
            Barre_de_navigation_horizontal()

            /*
            //------------------------------------------------------------//
            //-------- Quelques petits réajustements du style visuel de la page----//
            //------------------------------------------------------------//
      
            document.getElementById("sidenav-main").style.height = "850px"
      
             */

            //- "Utilisateur" est l'objet qui va permettre à l'utilisateur de choisir les composés/mélanges complexe de son choix.
      
            Utilisateur = {}
      
            //------ Ouvrir par défaut l'outil sur la page du mélange complexe "Diesel" : 
      
            Utilisateur.nom = "Diesel"
            Utilisateur.nom_En ="Diesel fuel oil"
            Utilisateur.description = "[carburant, Produits pétroliers, hydrocarbure]"
            Utilisateur.mots_clés_recherche = "[carburant, Produits pétroliers, hydrocarbure]"
            Utilisateur.cas = "68334-30-5"
            Utilisateur.type = "Mélange complexe"
            Utilisateur.symbole = "X"


            FILTRE_SUBSTANCE = "X"
      
            //------ Divers autres Objets pour controler, filtrer et modifier, ou alors, collecter certaines données des tables 
      
            //------ Table_actuel permet Permet d'indiquer au programme la dernière table qui a été ouverte par la fonction Readtodos(), 
      
            Table_actuel = {}
            Table_actuel.select = "neutre"
      
          
      
            Recherche_utilisateur = {}
            Composé = {}
      
            Utilisateur_2 = {}
      
            Selection_Utilisateur = {}
      
            Selection_Utilisateur.choix_substances = "neutre"
            
            Utilisateur.choix_substance = "neutre"
            Rapport = {}
            Rapport.état = "ON"   //------ Évite de générer le rapport une infinité de fois.
      
      
            Mode_Analyse = {}
            Mode_Analyse.choix_paramètre = ""  //------ Utilisateur choisi quel paramètre analyser (coloration des case après comparaison avec les critères de qualité dans la partie composition)
      
            Modifier = {}
      
            Page_utilisateur = {}
            Page_utilisateur.défaut = 1  //------ Page selectionnée par l'utilisateur
      
      
            Collecteur_AVIS = {}
      
            Grand_collecteur_criteres = {}  //------ Collecte les critères de qualité, des composés présents dans le mélange complexe selectionné, dans le but de générer l'avis.
      
           Ne_pas_filtrer = {}  //------ Permettre à l'utilisateur d'afficher toutes les données du tableau général
           Ne_pas_filtrer.état = "ON" 
      
      
           Paramètres_critères = {}
           Paramètres_critères.état = "fermé"
      
           Selection_utilisateur_codecri = {}  //------ Permet à l'utilisateur de choisir entre de critères du même type (ex : deux CVAA ayant un code différent) 
      
           Limiteur = 1
           Limiteur2 = 1


           Données_excel = {}
           Données_excel.importation = 'vide'

          //-------------------------------------------------------------------------------- //
          //------Importation d'autres données,  écotox, criteres de qualité et autre ------ //
          //-------------------------------------------------------------------------------- //
      
            Importation = {}
      
            function IMPORTER(TABLE_DATA) {
            try{
         
           fetch("https://outil-ecotox-repository-api2.onrender.com/" + TABLE_DATA)
            .then((response) => response.json())
            .then((tableau_importation)=> {
      
           Importation[TABLE_DATA] = tableau_importation
            console.log(TABLE_DATA, tableau_importation)
          
          })
              }
      
              catch(e){ result.success= "Échec de l'importation"}
            
            }
            IMPORTER("SQL_Liste_generale")
            IMPORTER("table_ADORE_algues")
            IMPORTER("table_ADORE_poissons")
            IMPORTER("table_ADORE_invertebres")
            IMPORTER("table_eau")
            IMPORTER("SQL_toxicite_invertebres_aquatiques_COMPO")
            IMPORTER("table_notes")
            IMPORTER("table_refer")
            IMPORTER("table_criref")
            IMPORTER("table_crinote")
            IMPORTER("import_ecotox")
      
      
          //----------------------------------------------------------------------------------//
          //------ Barre d'erreur-//
          //----------------------------------------------------------------------------------//

          Bouton_ok = document.getElementById('ok_erreur')
          Bouton_ok.addEventListener("click", () => {
            formulaire_erreur = document.getElementsByClassName("formulaire-Erreur")[0]
            corp_formulaire_erreur = document.getElementById("corp_formulaire_erreur")
            corp_formulaire_erreur.innerHTML = ""

            formulaire_erreur.style.display = "none"

          })



        table_ecotox_rapide = document.getElementsByClassName('Paramètre_ecotox_formu')[0]
        table_ecotox_rapide.addEventListener("click", (event) => {
          table_ecotox_rapide.style.display = "none"


        })



          //----------------------------------------------------------------------------------//
          //------ Modification de la dureté, du pH et d'autres paramètres pour l'utilisateur-//
          //----------------------------------------------------------------------------------//
            Dureté_utilisateur = {}
            Dureté_utilisateur.ph = 7
            Dureté_utilisateur.Ca = 3
            Dureté_utilisateur.Mg = 7
            Dureté_utilisateur.température = 25
            Dureté_utilisateur.dureté =  2.497 * Dureté_utilisateur.Ca + 4.118 * Dureté_utilisateur.Mg 
            Dureté_utilisateur.duretéMIN = 1
            Dureté_utilisateur.duretéMAX = 400
            Dureté_utilisateur.cod = 5
      
            ph_utilisateur = document.getElementById('input_ph')
            Ca_utilisateur = document.getElementById('input_ca')
            Mg_utilisateur  = document.getElementById('input_mg')
            Du_utilisateur  = document.getElementById('input_durete')
            DuMAX_utilisateur  = document.getElementById("input_durete_max")
            DuMIN_utilisateur  = document.getElementById("input_durete_min")
            COD_utilisateur = document.getElementById("input_COD")
            Temp_utilisateur  = document.getElementById('input_temp')
      
      
      
            bouton_calculer_dureté = document.getElementById('Recalculer_critères')
            zone_dureté = document.getElementById("Info_dureté")
            zone_température = document.getElementById("Info_TEMP")
            zone_ph = document.getElementById("Info_PH")
            zone_COD = document.getElementById("Info_COD")
      
    
            bouton_calculer_dureté.addEventListener("click", () => {


              Vérification_1 = 'OK'

              formulaire_erreur = document.getElementsByClassName("formulaire-Erreur")[0]
              corp_formulaire_erreur = document.getElementById("corp_formulaire_erreur")
              corp_formulaire_erreur.innerHTML = ""



              if(ph_utilisateur.value < 0 || ph_utilisateur.value > 14 ){
                Vérification_1 = 'NON'
                let ph_erreur = document.createElement('p') 
                ph_erreur.innerHTML =`Le pH doit être compris entre 0 et 14.`
                corp_formulaire_erreur.appendChild(ph_erreur)
               
              }


              if(ph_utilisateur.value  !== ""){
           
                   if (isNaN(ph_utilisateur.value)) {
                         Vérification_1 = 'NON'
                         let ph_erreur2 = document.createElement('p') 
                ph_erreur2.innerHTML =`La valeur du pH doit être numérique et strictement positive. Les nombres décimaux doivent être écrits avec des points (19.5) et non des virgules (19,5). De plus, attention aux espaces`
                corp_formulaire_erreur.appendChild(ph_erreur2)
                        }
          
              }



              if(Ca_utilisateur.value !== ""){  if( Ca_utilisateur.value < 0 ){
                Vérification_1 = 'NON'
                let ca_erreur = document.createElement('p') 
                ca_erreur.innerHTML =`La valeur de Ca doit être strictement positive.`
                corp_formulaire_erreur.appendChild(ca_erreur)
               
              }}

              if(Ca_utilisateur.value  !== ""){
           if (isNaN(Ca_utilisateur.value)) {
                 Vérification_1 = 'NON'
                 let ca_erreur2 = document.createElement('p') 
       ca_erreur2.innerHTML =`La valeur de Ca doit être numérique. Les nombres décimaux doivent être écrits avec des points (19.5) et non des virgules (19,5). De plus, attention aux espaces`
        corp_formulaire_erreur.appendChild(ca_erreur2)
                }
  
      }
            
              if( Mg_utilisateur.value < 0 ){
                Vérification_1 = 'NON'
                let mg_erreur = document.createElement('p') 
                mg_erreur.innerHTML =`La valeur de Mg doit être strictement positive.`
                corp_formulaire_erreur.appendChild(mg_erreur)
               
              }
              if(Mg_utilisateur.value  !== ""){
           if (isNaN(Mg_utilisateur.value)) {
                 Vérification_1 = 'NON'
                 let mg_erreur2 = document.createElement('p') 
      mg_erreur2.innerHTML =`La valeur de Mg doit être numérique. Les nombres décimaux doivent être écrits avec des points (19.5) et non des virgules (19,5). De plus, attention aux espaces`
        corp_formulaire_erreur.appendChild(mg_erreur2)
                }
  
      }

 
              if(Temp_utilisateur.value < -273.15 ){
                Vérification_1 = 'NON'
                let t1_erreur = document.createElement('p') 
                t1_erreur.innerHTML =`La température ne peut pas être inférieure à - 273.15 °C `
                corp_formulaire_erreur.appendChild(t1_erreur)
               
              }

              if(Temp_utilisateur.value   !== ""){
           if (isNaN(Temp_utilisateur.value )) {
                 Vérification_1 = 'NON'
                 let t_erreur = document.createElement('p') 
     t_erreur.innerHTML =`La valeur de la température doit être numérique. Les nombres décimaux doivent être écrits avec des points (19.5) et non des virgules (19,5). De plus, attention aux espaces`
        corp_formulaire_erreur.appendChild(t_erreur)
                }
  
      }


              if( Du_utilisateur.value < 0 || DuMAX_utilisateur.value < 0 || DuMIN_utilisateur.value < 0  ){
                Vérification_1 = 'NON'
                let d_erreur = document.createElement('p') 
                d_erreur.innerHTML =`La valeur de la dureté doit être strictement positive.`
                corp_formulaire_erreur.appendChild(d_erreur)
               
              }


              if( DuMAX_utilisateur.value === "" & DuMIN_utilisateur.value !== "" || DuMAX_utilisateur.value !== "" & DuMIN_utilisateur.value === "" ){
                Vérification_1 = 'NON'
                let d_erreur = document.createElement('p') 
                d_erreur.innerHTML =`Il manque une borne à votre intervalle.`
                corp_formulaire_erreur.appendChild(d_erreur)
               
              }

             

              limite_dureté_modele = 400

              if( Du_utilisateur.value > limite_dureté_modele || DuMIN_utilisateur.value > limite_dureté_modele || DuMAX_utilisateur.value > limite_dureté_modele  ){
                Vérification_1 = 'NON'
                let d_erreur = document.createElement('p') 
                d_erreur.innerHTML =`Au-delà de  ${limite_dureté_modele} mg/L, le modèle atteint ses limites.`
                corp_formulaire_erreur.appendChild(d_erreur)
               
              }

              function vérifier_type_valeur(entrée) {

                if(entrée !== ""){
           if (isNaN(entrée)) {
                 Vérification_1 = 'NON'
                 let d_erreur2 = document.createElement('p') 
                d_erreur2.innerHTML =`La valeur de la dureté doit être numérique. Les nombres décimaux doivent être écrits avec des points (19.5) et non des virgules (19,5). De plus, attention aux espaces`
                corp_formulaire_erreur.appendChild(d_erreur2)
                }
  
      }


              }


              vérifier_type_valeur(DuMAX_utilisateur.value)
              vérifier_type_valeur(DuMIN_utilisateur.value)
              vérifier_type_valeur(Du_utilisateur.value )


              if(   Vérification_1 === 'OK'){
            console.log("Calcul de la dureté en cours")
      
              if (ph_utilisateur.value !== "" ){ Dureté_utilisateur.ph = ph_utilisateur.value}
              if (Ca_utilisateur.value !== "" ){ Dureté_utilisateur.Ca = Ca_utilisateur.value}
              if (Mg_utilisateur.value !== "" ){ Dureté_utilisateur.Mg = Mg_utilisateur.value}
              if (Temp_utilisateur.value !== "" ){Dureté_utilisateur.température = Temp_utilisateur.value}
              if (COD_utilisateur.value !== "" ){Dureté_utilisateur.cod =  COD_utilisateur.value}

              if (DuMAX_utilisateur.value !== "" ){Dureté_utilisateur.duretéMAX =  DuMAX_utilisateur.value}
              if (DuMIN_utilisateur.value !== "" ){Dureté_utilisateur.duretéMIN =   DuMIN_utilisateur.value}
              if (DuMAX_utilisateur.value !== "" & DuMIN_utilisateur.value !== ""){
                Du_utilisateur.value = DuMIN_utilisateur.value/2 + DuMAX_utilisateur.value/2 

              }
       
              if (Du_utilisateur.value !== "" ){
                
                Dureté_utilisateur.dureté = Du_utilisateur.value
                Ca_utilisateur.value = ""
                Mg_utilisateur.value = ""
                Dureté_utilisateur.Ca = 0
                Dureté_utilisateur.Mg = 0
                
      
      
                }

              else  {Dureté_utilisateur.dureté = 2.497 * Dureté_utilisateur.Ca + 4.118 * Dureté_utilisateur.Mg } 
      

                
              zone_ph.innerHTML =  `Changer le ph [pH = ${Dureté_utilisateur.ph} ]`
              zone_température.innerHTML = `Changer la température [T = ${Dureté_utilisateur.température} °C]`
              zone_dureté.innerHTML = `Changer la dureté [Dureté =  ${Dureté_utilisateur.dureté}  mg/L]`
              zone_COD.innerHTML = ` Changer la concentrationen carbone organique dissous (COD) (mg/L)[COD = ${ Dureté_utilisateur.cod}  mg/L]`
              if (DuMAX_utilisateur.value !== "" & DuMIN_utilisateur.value !== ""){
                 zone_dureté.innerHTML = `Changer la dureté [Dureté =  ${Dureté_utilisateur.dureté}  mg/L, Intervalle : ( ${DuMIN_utilisateur.value} - ${DuMAX_utilisateur.value}) mg/L]`}


              readTodos("SQL_composition_substances", "TABLE_composition_substances")}
      
              else{ formulaire_erreur = document.getElementsByClassName("formulaire-Erreur")[0]
              formulaire_erreur.style.display = "inline"}
      
      
            })
      
             
            //---------------------------------------//
            //------ Zone de recherche principale----//
            //---------------------------------------//


             zone_recherche = document.getElementsByClassName("menu_recherche")[0]
             Bouton_fermer = document.getElementById('fermer_menue_recherche')
             Bouton_fermer.addEventListener("click", () => {
              zone_recherche.style.display = "none"
             })

             Bouton_recherche_barre = document.getElementById('ouvrir_menu_recherche')
             Bouton_recherche_barre.addEventListener("click", () => {
              zone_recherche.style.display = "inline"
             })


             Nom_à_rechercher = document.getElementById('input_Nom')
             CAS_à_rechercher = document.getElementById('input_CAS')
             Mot_clé_à_rechercher = document.getElementById('input_mot-clé')
      
             bouton_rechercher = document.getElementById('Rechercher_composé_substance')
             bouton_tout_afficher = document.getElementById('Tout_afficher')
      
             bouton_tout_afficher.addEventListener("click", () => {
              
              Page_utilisateur.défaut = 1
              Ne_pas_filtrer.état = "ON" 
      
              Recherche_utilisateur.nom = ""
              Recherche_utilisateur.cas =  ""
              Recherche_utilisateur.mots_clés_recherche  =  ""
           
              Liste_filtre = Object.keys(Recherche_utilisateur).map((key) => [key, Recherche_utilisateur[key]])
              readTodosRechercher("SQL_Liste_generale", "TABLE_Liste_generale", Liste_filtre )
      
              style_formulaire(["Liste_generale"])
       document.getElementsByClassName("Liste_generale")[0].addEventListener("mouseover", () => {  if (Formulaire_actuel.état !== "ouvert")
                {if (Table_actuel.select !== "Liste_generale"){
                  readTodosRechercher("SQL_Liste_generale", "TABLE_Liste_generale", Liste_filtre), 
                   Table_actuel.select = "Liste_generale"
                   }   }})
      
      
             })
      
             bouton_rechercher.addEventListener("click", () => {

                 
              formulaire_erreur = document.getElementsByClassName("formulaire-Erreur")[0]
              corp_formulaire_erreur = document.getElementById("corp_formulaire_erreur")
              Vérification_2 = 'OK'

              

              if(Nom_à_rechercher.value.includes("--") === true || Nom_à_rechercher.value.includes("'") === true || Nom_à_rechercher.value.includes("-- #") === true || 
              CAS_à_rechercher.value.includes("--") === true ||CAS_à_rechercher.value.includes("'") === true || CAS_à_rechercher.value.includes("-- #") === true || 
              Mot_clé_à_rechercher.value.includes("--") === true || Mot_clé_à_rechercher.value.includes("'") === true || Mot_clé_à_rechercher.value.includes("-- #") === true  
            
            
            ){
                    Vérification_2 = 'NON'
                    let erreur_filtre = document.createElement('p') 
                    erreur_filtre.innerHTML =`Veuillez éviter d'insérer les caractères suivants : --, --',',  -- #,#, delete from, delete`
                    corp_formulaire_erreur.appendChild(erreur_filtre)
                    console.log(   Vérification_2)
              }


                
                 if(Vérification_2 === 'OK'){
                Page_utilisateur.défaut = 1
                Ne_pas_filtrer.état = "OFF" 
                
                Recherche_utilisateur.nom = Nom_à_rechercher.value
                Recherche_utilisateur.cas =  CAS_à_rechercher.value
                Recherche_utilisateur.mots_clés_recherche  =  Mot_clé_à_rechercher.value
           
                Liste_filtre = Object.keys(Recherche_utilisateur).map((key) => [key, Recherche_utilisateur[key]])
      
           
      
                 console.log("Recherche utilisateur en cours : ",Liste_filtre)
           
                 readTodosRechercher("SQL_Liste_generale", "TABLE_Liste_generale", Liste_filtre )
      
      
                 style_formulaire(["Liste_generale"])
       document.getElementsByClassName("Liste_generale")[0].addEventListener("mouseover", () => {  if (Formulaire_actuel.état !== "ouvert")
                {if (Table_actuel.select !== "Liste_generale"){
                  readTodosRechercher("SQL_Liste_generale", "TABLE_Liste_generale", Liste_filtre), 
                   Table_actuel.select = "Liste_generale"
                   }   }})
      
               
      
                  
                  
             }
             else { formulaire_erreur.style.display = "inline"}
            }  )
      
                
      






             //------ Ajustement du style des formulaires--------------------- //
      
             touts_les_formulaires =  document.querySelectorAll("formulaire") 
         
      
             liste_selection = ["toxicite_invertebres_aquatiques_COMPO","toxicite_poissons_COMPO"]
             
      
             function style_formulaire(liste){
              liste.forEach(selection =>{
                table = "TABLE_" + selection
      
                      formu_table_modifier =  "formulaire_table_modifier" + "_" + table
                      bouton_formulaire_modifier =   "boutons_formulaire_modifier" + "_" + table
                      in_modifier = "input_modifier" + "_" + table
      
                      formu_table_supprimer = "formulaire_table_supprimer" + "_" + table
                      bouton_formulaire_supprimer = "boutons_formulaire_supprimer" + "_" + table
                      in_supprimer = "input_supprimer" + "_" + table
      
                      formu_table_ajouter = "formulaire_table_ajouter" + "_" + table
                      bouton_formulaire_ajouter = "boutons_formulaire_ajouter" + "_" + table
                      in_ajouter = "input_ajouter" + "_" + table
      
                      Liste_des_formulaires_selection = [formu_table_modifier, formu_table_ajouter, formu_table_supprimer]
                      Liste_des_formulaires_selection.forEach(formulaire =>{ 
                      cible = document.getElementsByClassName(formulaire)[0]
                      cible.style["font-size"] = "25px"
                      cible.style["lace-items"] = "center"
                      cible.style["background"] = "#ffffff"
                      cible.style["padding"] = "1px"
                      cible.style["width"] = "900px"
                      cible.style["height"] = "1400px"
                      cible.style["text-align"] = "center"
                      cible.style["position"] = "fixed"
                      cible.style["top"] = "50%"
                      cible.style["left"] = "50%"
                      cible.style["transform"] = "translate(-50%, -50%)"
                      cible.style["border-radius"] = "8px"
                      cible.style["box-shadow"] = "0 0 10px #929292"
                      cible.style["z-index"] = "10000"

                      if (selection === "Liste_generale"){cible.style["z-index"] = "10500"}

                      cible.style["overflow"] = "hidden"
                      cible.style["overflow-y"] = "scroll"
                      cible.style["overflow-x"] = "scroll"
                      cible.style["zoom"] = "50%"
                      if (formulaire ===  formu_table_supprimer){
                        cible.style["height"] = "auto"
      
                      }
                    
                    
                    })

                  
      
      
                      /*-Liste_des_boutons_du_formulaire = [bouton_formulaire_modifier,  bouton_formulaire_supprimer,  bouton_formulaire_ajouter]
                      Liste_des_boutons_du_formulaire.forEach(bouton_formulaire =>{ 
                        
                        bouton_cible = document.getElementsByClassName(bouton_formulaire)
                        console.log("boutons", bouton_formulaire)
                        bouton_cible.style["background-color"] = "#639dde"
                        bouton_cible.style["color"] = "#ffffff"
                        bouton_cible.style["border-radius"] = "4px"
                        bouton_cible.style["margin"] = "5px"
                        bouton_cible.style["padding"] = "1px"
                        bouton_cible.style["font-size"] = "18px" 
      
                       })*/
          
         
          
                  
                      })
      
             }
      
      
              //------------------------------------------------------------------------------------------------------------------------------------------------------------//
              //------ Définition d'une fonction d'activation des tables autres que la table générale la table affichant la liste des substances appartenant à la même famille --//
              //-------------------------------------------------------------------------------------------------------------------------------------------------------------//
      
             function activer_table(nom_table){
      readTodos("SQL_" + nom_table, "TABLE_" + nom_table)
      document.getElementsByClassName(nom_table)[0].addEventListener("mouseover", () => {
      if (Formulaire_actuel.état !== "ouvert"){if (Table_actuel.select !== nom_table){readTodos("SQL_" + nom_table, "TABLE_" + nom_table), Table_actuel.select = nom_table,  console.log("TABLE : ", nom_table)}}
      
      })
      }
      
            Liste_Des_Tableaux_Composés = ["toxicite_poissons_COMPO","toxicite_invertebres_aquatiques_COMPO", "propriétés_physico-chimiques_composés", "critères_de_qualité_milieux_aquatiques","critères_de_qualité_milieux_terrestres", "critères_de_qualité_sédiments"]
            
            Liste_Des_Tableaux_Substances = ["propriétés ", "composition"]
      
      
      
            //--------------------------------------------------------------------------------//
            //------Ouvrir les onglets principaux---------------------------------------------//
            //--------------------------------------------------------------------------------//
      
      
      
            function Chargement_Page(objet_utilisateur){
      
              //------------- Chargement de la page pour les composés (Ions, molécules et atomes
         
      
               if (objet_utilisateur.type === "Composé"){
               
              
               table_liste_substances = document.getElementsByClassName("Liste_substances")[0]
               table_liste_substances.style.display = "none" 
               Boutons_substance = document.getElementsByClassName("substances")[0]
               Boutons_composé = document.getElementsByClassName("composés")[0]
      
               document.getElementsByClassName('diagramme_composition')[0].style.display = "none" 
               document.getElementsByClassName("infoCompo")[0].style.display = "none" 
               document.getElementsByClassName("card mb-4 Zone_graphique")[0].style.display = "none" 

               document.getElementById('Z_LMC').style.display = 'none'
               document.getElementById('Z_PPCMC').style.display = 'none'
               document.getElementById('Z_DECMC').style.display = 'none'
               document.getElementById('Z_DECMC2').style.display = 'none'
                document.getElementById('Z_CGPH').style.display = 'none'

               document.getElementById('Z_CQC').style.display = "inline-flex"
               
               
      
               Boutons_substance.style.display = "none" 
               Boutons_composé.style.display = "inline" 
               document.getElementsByClassName("Section_Propriété_physique_et_chimique_substance")[0].style.display = "none" 
               document.getElementsByClassName("Section_Composition")[0].style.display = "none" 
               document.getElementsByClassName("Section_Données_ecotox_substance")[0].style.display = "none" 
               FILTRE_SUBSTANCE === "neutre"


      
      
            //------------------------------------------------------------------------ //
            //------ COMPOSÉ : CONFIGURATION DES TROIS BOUTONS PRINCIPAUX ----------- //
            //------------------------------------------------------------------------ //
      
                  section_Critères_de_qualité = document.getElementsByClassName("Section_Critères_de_qualité")[0]
                  section_Propriétés_physico_chimique_composés = document.getElementsByClassName("Section_Propriété_physique_et_chimique_composé")[0]
                  section_Données_écotoxicologiques_composés = document.getElementsByClassName("Section_Données_ecotox_composé")[0]
      
                  section_Propriétés_physico_chimique_composés.style.display = "none"
                  section_Critères_de_qualité.style.display = "inline"
                  section_Données_écotoxicologiques_composés.style.display = "none"
      
                  bouton_Propriétés_physico_chimique_composés = document.getElementById("bouton_Propriétés_physico-chimique_composés")
                  bouton_Critères_de_qualité = document.getElementById("bouton_Critères_de_qualité")
                  bouton_Données_écotoxicologiques_composés = document.getElementById("bouton_Données_écotoxicologiques_composés")
      
                  bouton_Propriétés_physico_chimique_composés.addEventListener("click", () => {
                   
                    
                    section_Propriétés_physico_chimique_composés.style.display = "inline"
                    section_Critères_de_qualité.style.display = "none"
                    section_Données_écotoxicologiques_composés.style.display = "none"

                    document.getElementById('Z_CQC').style.display = "none"
                     document.getElementById('Z_DEC').style.display = "none"
                     document.getElementById('Z_PPCC').style.display = "inline-flex"
      
                   style_formulaire(["proprites_physiques_et_chimiques_composes"])
         
                    activer_table("proprites_physiques_et_chimiques_composes")
                   
      
                    // readTodos("SQL_proprites_physiques_et_chimiques_composes", "TABLE_proprites_physiques_et_chimiques_composes")
      
      // document.getElementsByClassName("proprites_physiques_et_chimiques_composes")[0].addEventListener("mouseover", () => {
      
      // if (Formulaire_actuel.état !== "ouvert"){if (Table_actuel.select !== "proprites_physiques_et_chimiques_composes"){ readTodos("SQL_proprites_physiques_et_chimiques_composes", "TABLE_proprites_physiques_et_chimiques_composes")}}
      
        // })
        Table_actuel.select = "neutre" })    
      
      
                    bouton_Critères_de_qualité.addEventListener("click", () => {
                    
                  
                    section_Propriétés_physico_chimique_composés.style.display = "none"
                    section_Critères_de_qualité.style.display = "inline"
                    section_Données_écotoxicologiques_composés.style.display = "none"

                     document.getElementById('Z_CQC').style.display = "inline-flex"
                     document.getElementById('Z_DEC').style.display = "none"
                     document.getElementById('Z_PPCC').style.display = 'none'


      
                    style_formulaire(["criteres_de_qualite_eaux", "criteres_de_qualite_sols","criteres_de_qualite_sediments"])
                   
                    activer_table("criteres_de_qualite_eaux")
                    activer_table("criteres_de_qualite_sols")
                    activer_table("criteres_de_qualite_sediments")
              
             Table_actuel.select = "neutre"
             },
             )    
      
                    bouton_Données_écotoxicologiques_composés.addEventListener("click", () => {
                   
      
                    section_Propriétés_physico_chimique_composés.style.display = "none"
                    section_Critères_de_qualité.style.display = "none"
                    section_Données_écotoxicologiques_composés.style.display = "inline"

                     document.getElementById('Z_CQC').style.display = "none"
                    document.getElementById('Z_PPCC').style.display = 'none'
                     document.getElementById('Z_DEC').style.display = "inline-flex"
        
                      style_formulaire(["toxicite_poissons_COMPO", "toxicite_invertebres_aquatiques_COMPO",  "ecotox_compose_organismes_aquatiques", "ecotox_compose_organisme_terrestre", "toxicite_poissons_COMPO"])
                     // Démarrer_Tableau("toxicite_invertebres_aquatiques_COMPO")
                     //Démarrer_Tableau("toxicite_poissons_COMPO")
                    
                    //TEST DEBUT
      
                 // "activer_table("ecotox_compose_organismes_aquatiques")"
                //  "activer_table("ecotox_compose_organisme_terrestre")" //
                   activer_table("toxicite_poissons_COMPO")
      
                  readTodos("SQL_toxicite_invertebres_aquatiques_COMPO", "TABLE_toxicite_invertebres_aquatiques_COMPO")
      
                   document.getElementsByClassName("toxicite_invertebres_aquatiques_COMPO")[0].addEventListener("mouseover", () => {
      
                  if (Formulaire_actuel.état !== "ouvert"){if (Table_actuel.select !== "toxicite_invertebres_aquatiques_COMPO"){readTodos("SQL_toxicite_invertebres_aquatiques_COMPO", "TABLE_toxicite_invertebres_aquatiques_COMPO", Utilisateur), Table_actuel.select = "toxicite_invertebres_aquatiques_COMPO",  console.log("Selection de la table :", "toxicite_invertebres_aquatiques_COMPO")}}
      
                     })
                    
                     
                    //TEST fin----------------------------------------------- 
                                         
             }
            
                    
             )     
             activer_table("toxicite_invertebres_aquatiques_COMPO")
             activer_table("criteres_de_qualite_eaux")
             activer_table("criteres_de_qualite_sols")
             activer_table("criteres_de_qualite_sediments")
             style_formulaire(["criteres_de_qualite_eaux","criteres_de_qualite_sols","criteres_de_qualite_sediments"])
           
             readTodos("SQL_toxicite_invertebres_aquatiques_COMPO", "TABLE_toxicite_invertebres_aquatiques_COMPO")
             readTodos("SQL_criteres_de_qualite_sediments","TABLE_criteres_de_qualite_sediments")
             readTodos("SQL_criteres_de_qualite_eaux","TABLE_criteres_de_qualite_eaux")
             readTodos("SQL_criteres_de_qualite_sols","TABLE_criteres_de_qualite_sols")
      
              Table_actuel.select = "neutre"
              
               }
      
              //-------------- Chargement de la page pour les mélanges complexes---------------//
              //--------------------------------------------------------------------------------//
      
              if (objet_utilisateur.type === "Mélange complexe"){
      
               table_liste_substances = document.getElementsByClassName("Liste_substances")[0]
               Boutons_substance = document.getElementsByClassName("substances")[0]
               Boutons_composé = document.getElementsByClassName("composés")[0]
      
                  //document.getElementsByClassName('diagramme_composition')[0].style.display = "inline" 
                  //document.getElementsByClassName("infoCompo")[0].style.display = "inline" 
                  //document.getElementsByClassName("card mb-4 Zone_graphique")[0].style.display = "inline"

             
                document.getElementById('Z_LMC').style.display = "inline-flex"
                document.getElementById('Z_CQC').style.display = 'none'
                document.getElementById('Z_PPCC').style.display = 'none'
                document.getElementById('Z_DEC').style.display = 'none'
                document.getElementById('Z_CGPH').style.display = 'none'
               
                document.getElementsByClassName('titre_section')[0].display = "none"
                 document.getElementById("CompositionS").style.display = "none"
                 // Activation du tableau affichant la liste de toutes les substances 
             
      
              readTodosRechercher("SQL_Liste_substances", "TABLE_Liste_substances")
               
       document.getElementsByClassName("Liste_substances")[0].addEventListener("mouseover", () => {
        if (Formulaire_actuel.état !== "ouvert"){
                {if (Table_actuel.select !== "Liste_substances"){
                  readTodosRechercher("SQL_Liste_substances", "TABLE_Liste_substances"), 
                   Table_actuel.select = "Liste_substances"
                   }   }}})
      
      
                table_liste_substances.style.display = "inline" 
      
              Boutons_composé = document.getElementsByClassName("composés")[0]
              Boutons_composé.style.display = "none" 
              Boutons_substance.style.display = "inline" 
              document.getElementsByClassName("Section_Critères_de_qualité")[0].style.display = "none" 
              document.getElementsByClassName("Section_Propriété_physique_et_chimique_composé")[0].style.display = "none" 
              document.getElementsByClassName("Section_Données_ecotox_composé")[0].style.display = "none" 
      
      
              Section_Composition = document.getElementsByClassName("Section_Composition")[0]
              Section_Propriété_physique_et_chimique_substance = document.getElementsByClassName("Section_Propriété_physique_et_chimique_substance")[0]
              Section_Données_ecotox_substance = document.getElementsByClassName("Section_Données_ecotox_substance")[0]
      
              Section_Données_ecotox_substance.style.display = "none"
              Section_Composition.style.display = "inline"
              Section_Propriété_physique_et_chimique_substance.style.display = "none"
      
              bouton_Propriétés_physico_chimique_substances = document.getElementById("bouton_Propriétés_physico-chimique_substances")
              bouton_Composition_chimique = document.getElementById("bouton_Composition_chimique")
              bouton_Données_écotoxicologiques_substances = document.getElementById("bouton_Données_écotoxicologiques_substances")
      
              //--------- bouton_Propriétés_physico_chimique_substances
              bouton_Propriétés_physico_chimique_substances.addEventListener("click", () => {
                    
                    
                    Section_Données_ecotox_substance.style.display = "none"
                    Section_Composition.style.display = "none"
                    Section_Propriété_physique_et_chimique_substance.style.display = "inline"



                    document.getElementById('Z_PPCMC').style.display = 'inline-flex'
                     document.getElementById('Z_DECMC').style.display = 'none'
                      document.getElementById('Z_DECMC2').style.display = 'none'
                      document.getElementById('Z_CGPH').style.display = 'none'
                    
                 



                    style_formulaire(["Propriete_physique_et_chimique_substance"])
                    activer_table("Propriete_physique_et_chimique_substance")
                     Table_actuel.select = "neutre"
             })    
             //---------  bouton_Composition_chimique
              bouton_Composition_chimique.addEventListener("click", () => {
                    
                    
                    Section_Données_ecotox_substance.style.display = "none"
                    Section_Composition.style.display = "inline"
                    Section_Propriété_physique_et_chimique_substance.style.display = "none"
                    style_formulaire(["composition_substances"])
                    activer_table("composition_substances")
                     Table_actuel.select = "neutre"

                     document.getElementById('Z_PPCMC').style.display = 'none'
                     document.getElementById('Z_DECMC').style.display = 'none'
                      document.getElementById('Z_DECMC2').style.display = 'none'
                      document.getElementById('Z_CGPH').style.display = 'inline-flex'
             })    
      
            //---------  bouton_Données_écotoxicologiques_substances
              bouton_Données_écotoxicologiques_substances.addEventListener("click", () => {
                  
                    
                    Section_Données_ecotox_substance.style.display = "inline"
                    Section_Composition.style.display = "none"
                    Section_Propriété_physique_et_chimique_substance.style.display = "none"

                    document.getElementById('Z_PPCMC').style.display = 'none'
                    document.getElementById('Z_DECMC').style.display = 'inline-flex'
                         document.getElementById('Z_DECMC2').style.display = 'inline-flex'
                    document.getElementById('Z_CGPH').style.display = 'none'
                    
                     style_formulaire(["ecotox_substances_organisme_terrestre", "ecotox_substances_organismes_aquatiques" ])
                     activer_table("ecotox_substances_organisme_terrestre")
                     activer_table("ecotox_substances_organismes_aquatiques")
                      Table_actuel.select = "neutre"
             })  
      
             // Ouverture des tables par défaut
             style_formulaire(["composition_substances", "Liste_substances"])
             
             activer_table("Propriete_physique_et_chimique_substance")
             activer_table("ecotox_substances_organisme_terrestre")
             activer_table("ecotox_substances_organismes_aquatiques")
             activer_table("composition_substances")
      
             Table_actuel.select = "neutre"
             readTodosRechercher("SQL_Liste_substances", "TABLE_Liste_substances")
             if (Table_actuel.select !== "Liste_substances"){
                  readTodosRechercher("SQL_Liste_substances", "TABLE_Liste_substances"), 
                   Table_actuel.select = "Liste_substances" }
      
              }
               
             
      
              //------ Changer titre (élément selectioné)
      
              /*titre = document.getElementsByClassName('titre')[0]
           
             titre.innerHTML = `<h1> <strong style = "color :  hsl(212, 65%, 63%) ; font-size: 45px ;" > ${objet_utilisateur.nom}</strong></h1>
              <h2> Numéro CAS : <strong style = "color :  hsl(212, 65%, 63%)"> ${objet_utilisateur.cas}</strong></h2>
              <h3>  ${Utilisateur.description} </h3>`
      
              if (objet_utilisateur.nom === "non disponible" ){
                
                titre.innerHTML = `<h1> <strong style = "color :  hsl(212, 65%, 63%) ; font-size: 45px ;" > ${Utilisateur.nom_En}</strong></h1>
              <h2> Numéro CAS : <strong style = "color :  hsl(212, 65%, 63%)"> ${objet_utilisateur.cas}</strong></h2>
              <h3>  ${Utilisateur.description} </h3>`
                
               }*/
           
      
              // readTodos("table_25","table_critères_de_qualité_milieux_aquatiques")
              // readTodos("table_15", "table_critères_de_qualité_milieux_Terrestre")
              // readTodos("SQL_criteres_de_qualite_sediments","TABLE_criteres_de_qualite_sediments")
              // readTodos("SQL_Liste_generale","TABLE_Liste_generale")
      
      
      
            }
      
      
            detection_lignes = 0
      
                      Chargement_Page(Utilisateur)
      
                      //--- LECTURE PAR DÉFAUT
                      
                      activer_table("criteres_de_qualite_eaux")
                      activer_table("criteres_de_qualite_sols")
                      activer_table("criteres_de_qualite_sediments")
                      style_formulaire(["criteres_de_qualite_eaux", "criteres_de_qualite_sols","criteres_de_qualite_sediments" ])
      
                      readTodos("SQL_criteres_de_qualite_eaux","TABLE_criteres_de_qualite_eaux")
                      readTodos("SQL_criteres_de_qualite_sols","TABLE_criteres_de_qualite_sols")     
                      readTodos("SQL_criteres_de_qualite_sediments","TABLE_criteres_de_qualite_sediments")
                    
      
          
                    //--- LECTURE PAR DÉFAUT À L'OUVERTURE DE L'APPLICATION-------------------------------------
       
      
      
           // Initialiser la table quand la souris la survole
           
      limite  = 0
      Reussite_importation = 0
         
      //---------------------------------------------------------------------------------------------------------------------------//
      //--------------- FONCTIONS POUR LES DONNEES DES TABLES ----------------------------------------------------------------------//
      //---------------------------------------------------------------------------------------------------------------------------//
      
       
       //---------------------------------------------------------------------------------------------------------------------------------
       function readTodos(table_SQL, table_HTML_à_afficher) {
      
       
      
      try{
         
          fetch("https://outil-ecotox-repository-api2.onrender.com/" + table_SQL)
           .then((response) => response.json())
           .then((tableau)=> {
      
              console.log("Table actuelle selectionnée : ", Table_actuel.select)
              console.log("READTODOS Lecture de la table SQL : ",  table_SQL )
              console.log("READTODOS Lecture de la table html : ", table_HTML_à_afficher)
             
      
              table_utilisateur = document.getElementsByClassName(table_HTML_à_afficher)
              
             
              
              //-------- Récupération d'informations sur de table (lignes, colonnes et variables sur les colonnes)-----------------------------------------
             
              if (table_HTML_à_afficher === "TABLE_toxicite_invertebres_aquatiques_COMPO"){Utilisateur.ECOTOX_eau = tableau}
             
              FILTRE_FINAL = Utilisateur
      
              if (table_HTML_à_afficher === "TABLE_composition_substances"){   FILTRE_SUBSTANCE = Utilisateur.choix_substance
                
              }
       
              Utilisateur[table_HTML_à_afficher] = tableau
      
      
               //------------------------------------------------------------------------------------
              
      
           
      
              // if (Importation.table_eau){ console.log("ADORE criteres eaux " ,  Importation.table_eau)}
               //if (Importation["table_ADORE_poissons"]){  console.log("ADORE poissons " ,  Importation["table_ADORE_poissons"])}
              // if (Importation["table_ADORE_invertebres"]){console.log("ADORE invertébrés " ,  Importation["table_ADORE_invertebres"])}
               //if (Importation["table_ADORE_algues"]){ console.log("ADORE algues " ,  Importation["table_ADORE_algues"])}
              // console.log("IMPORTATION  :: ", Importation["SQL_toxicite_invertebres_aquatiques_COMPO"] )
      
       if (table_HTML_à_afficher === "TABLE_composition_substances") { 
        
          //console.log(Importation["table_notes"])
          //console.log(Importation["table_refer"])
          //console.log(Importation["table_criref"])
          //console.log(Importation["table_crinote"])
      
      
        function verifier_ecotox (table_cible, cas){ 
              résultat = []
           Importation[table_cible].forEach(ligne =>{
               cas_ligne = ligne.test_cas
               if (cas !== "" && cas.length !== 0 ){ if(cas_ligne.includes(cas) === true || cas.includes(cas_ligne) === true ||cas_ligne === cas  ){
                résultat.push(ligne)}}
                })}
          
                  function verifier_criteres(cas){ 
               résultat = []
                Importation["table_eau"].forEach(ligne =>{
               cas_ligne = ligne.no_cas
               if (cas !== "" && cas.length !== 0 ){  if(cas_ligne.includes(cas) === true || cas_ligne.includes(cas) === true ){
                résultat.push(ligne)}}
               })}
      
                
                }
      
      
             //--------------------------------------------------------------------------------------
      
              Données = {}
              
              tableau_filtré =  Utilisateur[table_HTML_à_afficher].filter((ligne_tableau)=>  (ligne_tableau.catégorie === FILTRE_FINAL.type, ligne_tableau.cas  === FILTRE_FINAL.cas, ligne_tableau.nom_fr === FILTRE_FINAL.nom, ligne_tableau.symbole_formule  === FILTRE_FINAL.symbole, ligne_tableau.mots_clés  === FILTRE_FINAL.description, ligne_tableau.nom_en === FILTRE_FINAL.nom_En  ) )
             
              if (tableau_filtré.length !== 0){Utilisateur[table_HTML_à_afficher]  = tableau_filtré}
              if (tableau_filtré.length === 0){Utilisateur[table_HTML_à_afficher]  = [Utilisateur[table_HTML_à_afficher][0]]}
              
         
      
              Données.variables = Object.keys(Utilisateur[table_HTML_à_afficher][0]).map((key) => [key])
              Données.nombre_de_colonnes =  Données.variables.length
              Données.nombre_de_lignes = Utilisateur[table_HTML_à_afficher].length
              if  (table_HTML_à_afficher === "TABLE_toxicite_invertebres_aquatiques_COMPO"){Composé.invertébrés_aquatiques = tableau}
              if (table_HTML_à_afficher === "TABLE_toxicite_poissons_COMPO"){Composé.poissons = Utilisateur[table_HTML_à_afficher] }
           
              
        


               // --------------------------------------------------------------------------------- //
               //-----Calculer automatiquement les critères de qualité pour les eaux de certains métaux //
               // --------------------------------------------------------------------------------- //
          

  ln_dureté = Math.log(Dureté_utilisateur.dureté)

  if (DuMAX_utilisateur.value !== "" & DuMIN_utilisateur.value !== ""){
    ln_dureté_MIN = Math.log(Dureté_utilisateur.duretéMIN)
    ln_dureté_MAX = Math.log(Dureté_utilisateur.duretéMAX)
    
}


  Critères_MIN = {} //Collecter les critères de qualité calculés avec la dureté minimale.
  Critères_MAX = {} //Collecter les critères de qualité calculés avec la dureté maximale.


//-Chrome--------------------------------------------------------------------------------------------

VAFe_calculéeChrome =( 2*(Math.exp( (ln_dureté * 0.819) + 3.7256  )))/1000
CVAA_calculéChrome =( (Math.exp( (ln_dureté * 0.819) + 3.7256  )))/1000
CVAC_calculéChrome =( (Math.exp( 0.819*(ln_dureté) + 0.6848  )))/1000

function Calculer_critères_chrome(Objet_critères, ln_dureté_c, no_cas ){

  Objet_critères[no_cas] = {}
  Objet_critères[no_cas]["VAFe"] =( 2*(Math.exp( (ln_dureté_c * 0.819) + 3.7256  )))/1000
  Objet_critères[no_cas]["CVAA"] =( (Math.exp( (ln_dureté_c * 0.819) + 3.7256  )))/1000
  Objet_critères[no_cas]["CVAC"] =( (Math.exp( 0.819*(ln_dureté_c) + 0.6848  )))/1000


}



//-Argent-----------------------------------------------------------------------------

VAFe_calculéeArgent = ( (Math.exp( 1.72*(ln_dureté) - 6.52  )))/1000
CVAA_calculéArgent = ( (Math.exp( (1.72*(ln_dureté) - 6.52))))/2000
CVAC_calculéArgent = 0.00010



function Calculer_critères_argent(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (Math.exp( 1.72*(ln_dureté_c) - 6.52  )))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( (1.72*(ln_dureté_c) - 6.52))))/2000
Objet_critères[no_cas]["CVAC"] = 0.00010


}

 
//-Baryum---------------------------------------------------------------------------

VAFe_calculéeBaryum =( (Math.exp(1.0629*ln_dureté + 2.9285)))/1000
CVAA_calculéBaryum =( (Math.exp( (1.0629*(ln_dureté) +  2.2354))))/1000
CVAC_calculéBaryum = ( (Math.exp( (1.0629*(ln_dureté) +  1.1869))))/1000


function Calculer_critères_baryum(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (Math.exp(1.0629*ln_dureté_c + 2.9285)))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( (1.0629*(ln_dureté_c) +  2.2354))))/1000
Objet_critères[no_cas]["CVAC"] = ( (Math.exp( (1.0629*(ln_dureté_c) +  1.1869))))/1000


}


 //-Béryllium--------------------------------------------------------------------------

VAFe_calculéeBéryllium =( (Math.exp( 1.6839 *ln_dureté - 2.9672)  ))/1000
CVAA_calculéBéryllium =( (Math.exp( (1.6839*(ln_dureté) - 3.6603))))/1000
CVAC_calculéBéryllium = ( (Math.exp( (1.6839*(ln_dureté) - 5.8575))))/1000

function Calculer_critères_béryllium(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (Math.exp( 1.6839 *ln_dureté_c - 2.9672)  ))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( (1.6839*(ln_dureté_c) - 3.6603))))/1000
Objet_critères[no_cas]["CVAC"] = ( (Math.exp( (1.6839*(ln_dureté_c) - 5.8575))))/1000


}



 //-Cadmium------------------------------------------------------------

VAFe_calculéeCadmium =( (2*Math.exp( 1.0166  *ln_dureté - 3.924)  ))/1000
CVAA_calculéCadmium =( (Math.exp( (1.0166*(ln_dureté) - 3.924))))/1000
CVAC_calculéCadmium = ( (Math.exp( (0.7409*(ln_dureté) - 4.719))))/1000
CVAC_calculéCadmium_En_métaldissout = ( (Math.exp((1.101672 - (ln_dureté)*0.041838))))/1000


function Calculer_critères_cadmium(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (2*Math.exp( 1.0166  *ln_dureté_c - 3.924)  ))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( (1.0166*(ln_dureté_c) - 3.924))))/1000
Objet_critères[no_cas]["CVAC"] = ( (Math.exp( (0.7409*(ln_dureté_c) - 4.719))))/1000


}



//- Cuivre-----------------------------------------------------------

VAFe_calculéeCuivre =( (2*Math.exp( 0.9422 *ln_dureté - 1.7)  ))/1000
CVAA_calculéCuivre =( (Math.exp( (0.9422*(ln_dureté) - 1.7))))/1000
CVAC_calculéCuivre = ( (Math.exp( (0.8545*(ln_dureté) -1.702))))/1000



function Calculer_critères_cuivre(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (2*Math.exp( 0.9422 *ln_dureté_c - 1.7)  ))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( (0.9422*(ln_dureté_c) - 1.7))))/1000
Objet_critères[no_cas]["CVAC"] = ( (Math.exp( (0.8545*(ln_dureté_c) -1.702))))/1000


}


//- Manganèse-------------------------------------------------------

VAFe_calculéeManganèse =( (Math.exp( 0.8784 *ln_dureté + 4.9820)  ))/1000
CVAA_calculéManganèse =( (Math.exp( ((0.8784*(ln_dureté))+ 4.2889))))/1000
CVAC_calculéManganèse = ( (Math.exp( (0.8784*(ln_dureté) + 3.5199))))/1000

function Calculer_critères_manganèse(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (Math.exp( 0.8784 *ln_dureté_c + 4.9820)  ))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( ((0.8784*(ln_dureté_c))+ 4.2889))))/1000
Objet_critères[no_cas]["CVAC"] = ( (Math.exp( (0.8784*(ln_dureté_c) + 3.5199))))/1000


}


 //- Nickel---------------------------------------------------------


VAFe_calculéeNickel =( (2*Math.exp( 0.846 *ln_dureté + 2.255)  ))/1000
CVAA_calculéNickel =( (Math.exp( (0.846*(ln_dureté)+ 2.255))))/1000
CVAC_calculéNickel = ( (Math.exp( (0.846*(ln_dureté) + 0.0584))))/1000

function Calculer_critères_nickel(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (2*Math.exp( 0.846 *ln_dureté_c + 2.255)  ))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( (0.846*(ln_dureté_c)+ 2.255))))/1000
Objet_critères[no_cas]["CVAC"] = ( (Math.exp( (0.846*(ln_dureté_c) + 0.0584))))/1000


}

 
 //- Plomb---------------------------------------------


VAFe_calculéePlomb =( (2*Math.exp( 1.273 *ln_dureté - 1.46)  ))/1000
CVAA_calculéPlomb =( (Math.exp( (1.273*(ln_dureté) - 1.46))))/1000
CVAC_calculéPlomb = ( (Math.exp( (1.273*(ln_dureté) - 4.705))))/1000

function Calculer_critères_plomb(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (2*Math.exp( 1.273 *ln_dureté_c - 1.46)  ))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( (1.273*(ln_dureté_c) - 1.46))))/1000
Objet_critères[no_cas]["CVAC"] = ( (Math.exp( (1.273*(ln_dureté_c) - 4.705))))/1000


}


 //- Zinc---------------------------------------------------


VAFe_calculéeZinc =( (2*Math.exp( 0.8473 *ln_dureté + 0.884)  ))/1000
CVAA_calculéZinc =( (Math.exp( (0.8473*(ln_dureté) + 0.884))))/1000
CVAC_calculéZinc = ( (Math.exp( (0.8473*(ln_dureté) + 0.884))))/1000


function Calculer_critères_zinc(Objet_critères, ln_dureté_c, no_cas){

Objet_critères[no_cas] = {}
Objet_critères[no_cas]["VAFe"] =( (2*Math.exp( 0.8473 *ln_dureté_c + 0.884)  ))/1000
Objet_critères[no_cas]["CVAA"] =( (Math.exp( (0.8473*(ln_dureté_c) + 0.884))))/1000
Objet_critères[no_cas]["CVAC"] = ( (Math.exp( (0.8473*(ln_dureté_c) + 0.884))))/1000


}



if (DuMAX_utilisateur.value !== "" & DuMIN_utilisateur.value !== ""){

Calculer_critères_chrome(Critères_MIN, ln_dureté_MIN, "7440-47-3")
Calculer_critères_chrome(Critères_MAX, ln_dureté_MAX, "7440-47-3")

Calculer_critères_argent(Critères_MIN, ln_dureté_MIN, "7440-22-4")
Calculer_critères_argent(Critères_MAX, ln_dureté_MAX, "7440-22-4")

Calculer_critères_baryum(Critères_MIN, ln_dureté_MIN, "7440-39-3")
Calculer_critères_baryum(Critères_MAX, ln_dureté_MAX, "7440-39-3")


Calculer_critères_béryllium(Critères_MIN, ln_dureté_MIN, "7440-41-7")
Calculer_critères_béryllium(Critères_MAX, ln_dureté_MAX, "7440-41-7")


Calculer_critères_cadmium(Critères_MIN, ln_dureté_MIN, "7440-43-9")
Calculer_critères_cadmium(Critères_MAX, ln_dureté_MAX, "7440-43-9")


Calculer_critères_cuivre(Critères_MIN, ln_dureté_MIN, "7440-50-8")
Calculer_critères_cuivre(Critères_MAX, ln_dureté_MAX, "7440-50-8")

Calculer_critères_manganèse(Critères_MIN, ln_dureté_MIN, "7439-96-5")
Calculer_critères_manganèse(Critères_MAX, ln_dureté_MAX, "7439-96-5")


Calculer_critères_nickel(Critères_MIN, ln_dureté_MIN, "7440-02-0")
Calculer_critères_nickel(Critères_MAX, ln_dureté_MAX, "7440-02-0")

Calculer_critères_plomb(Critères_MIN, ln_dureté_MIN, "7439-92-1")
Calculer_critères_plomb(Critères_MAX, ln_dureté_MAX, "7439-92-1")

Calculer_critères_zinc(Critères_MIN, ln_dureté_MIN, "7440-66-6")
Calculer_critères_zinc(Critères_MAX, ln_dureté_MAX, "7440-66-6")


}


               // --------------------------------------------------------------------------------- //
               //-----BOUTONS AU DESSUS DES TABLEAUX ---------------------------------------------- //
               // --------------------------------------------------------------------------------- //

      
              Ajouter_une_ligne_de_données =  "Ajouter_une_ligne_de_données" + table_HTML_à_afficher
      
      
                  if  (table_HTML_à_afficher === "TABLE_toxicite_poissons_COMPO"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_toxicite_poissons_COMPO")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>
      <button class="btn bg-light mb-0 text-end" id = 'Mode_analyse'> Mode analyse  </button>`
                    
                  }
      
      
                  if  (table_HTML_à_afficher === "TABLE_toxicite_invertebres_aquatiques_COMPO"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_toxicite_invertebres_aquatiques_COMPO")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>
      <button class="btn bg-light mb-0 text-end" id = 'Filtrer_poissons'> Poissons  </button>
      <button class="btn bg-light mb-0 text-end" id = 'Filtrer_plantes_aqua'> Algues et Plantes aquatiques  </button>
      <button class="btn bg-light mb-0 text-end" id = 'Filtrer_invertébrés'> Invertébrés  </button>
      
      `
                    
                  }
      
                  if  (table_HTML_à_afficher === "TABLE_criteres_de_qualite_sediments"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_criteres_de_qualite_sediments")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>
     `
                    
                  }
      
                  if  (table_HTML_à_afficher === "TABLE_composition_substances"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_composition_substances")
                    boutons_critères[0].innerHTML = `<button class="btn bg-light mb-0 text-end" id = "pcritères"> Paramètre critères </button>
      <button class="btn bg-light mb-0 text-end"id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>
      <button class="btn bg-light mb-0 text-end" id = 'Mode_analyse_Compo'> Comparer  </button>
      <button class="btn bg-light mb-0 text-end" id = 'Avis'> Générer un rapport PDF  </button>
        <button class="btn bg-light mb-0 text-end" id = 'importer_excel'> IMPORTER (excel)  </button>
        <input type = "file" id = 'import_excel_input' style = "padding: 2px 30px;
  margin: 10px;" >
      
      `
      
                   //-----Bouton pour importer les données d'excel ---- //

                    input_excel = document.getElementById('import_excel_input')
                    btn_excel = document.getElementById( 'importer_excel')

                    input_excel.addEventListener('change', function() {
                      readXlsxFile(input_excel.files[0]).then(function(data_excel) {
                        console.log("IMPORTATION EXCEL : ", data_excel)
                       
                        Données_excel.importation =  data_excel

                      })
                    })

                    btn_excel.addEventListener("click", () => {
                     
                      if(Données_excel.importation !== 'vide'){
                        console.log("AFFICHER IMPORTATION EXCEL : ", Données_excel.importation[1][1])

                         //----- importation dans la base de données :
                         éviter_ligne_un = 0
                         Données_excel.importation.forEach(ligne_a_inserer =>{
                        
                          nomIMPORT = ligne_a_inserer[0]
                          symbolIMPORT = ligne_a_inserer[1]
                          casIMPORT = ligne_a_inserer[2]
                          minIMPORT = ligne_a_inserer[3]
                          moyIMPORT = ligne_a_inserer[4]
                          maxIMPORT = ligne_a_inserer[5]
                          uniteIMPORT = ligne_a_inserer[6]

                          Objet_a_importer = {}

                          Objet_a_importer["catégorie"+ table_HTML_à_afficher] = Utilisateur.type
                          Objet_a_importer["nom_fr"+ table_HTML_à_afficher] = Utilisateur.nom
                          Objet_a_importer["nom_en"+ table_HTML_à_afficher] = Utilisateur.nom_En 
                          Objet_a_importer["cas"+ table_HTML_à_afficher] = Utilisateur.cas
                          Objet_a_importer["symbole_formule"+ table_HTML_à_afficher] = Utilisateur.symbole
                          Objet_a_importer["mots_clés"+ table_HTML_à_afficher] = Utilisateur.description
                          if( table_HTML_à_afficher === "TABLE_composition_substances" || table_HTML_à_afficher === "TABLE_Propriete_physique_et_chimique_substance" || table_HTML_à_afficher === "TABLE_ecotox_substances_organismes_aquatiques" || table_HTML_à_afficher === "TABLE_ecotox_substances_organisme_terrestre"){
                            Objet_a_importer["nom_substance"+ table_HTML_à_afficher] = Utilisateur.choix_substance
      
                          }

                          Objet_a_importer["nom_composé"+ table_HTML_à_afficher] = nomIMPORT
                          Objet_a_importer["symbole_formule_composé"+ table_HTML_à_afficher] = symbolIMPORT
                          Objet_a_importer["cas_composé"+ table_HTML_à_afficher] =   casIMPORT
                          Objet_a_importer["valeur_min"+ table_HTML_à_afficher] = minIMPORT
                          Objet_a_importer["valeur_moy"+ table_HTML_à_afficher] =    moyIMPORT
                          Objet_a_importer["valeur_max"+ table_HTML_à_afficher] =  maxIMPORT 
                          Objet_a_importer["unité"+ table_HTML_à_afficher] =  uniteIMPORT

                          if( éviter_ligne_un !== 0){ 
                            
                            console.log("Objet excel à importer : ", Objet_a_importer, table_SQL,table_HTML_à_afficher,)

                              createTodos(table_SQL,table_HTML_à_afficher,  Objet_a_importer)
                          }

                         

                          éviter_ligne_un = éviter_ligne_un + 1

                         })



                      }
                    })

                    //-----Bouton pour afficher la liste détaillé des critères---- //
                    
                     bouton_Pcritères = document.getElementById('pcritères')
                     
                     bouton_Pcritères.addEventListener("click", () => {
      
                      if ( Paramètres_critères.état === "fermé"){document.getElementsByClassName("Paramètre_critères_formu")[0].style.display = "inline"
                        Paramètres_critères.état = "ouvert"
                      }
                      else {document.getElementsByClassName("Paramètre_critères_formu")[0].style.display = "none" 
                       Paramètres_critères.état = "fermé"}
      
                     })
      
      
                     //-----Mode analyse pour les compositions---- //
      
                    bouton_analyser_compo = document.getElementById('Mode_analyse_Compo')
                    bouton_analyser_compo.addEventListener("click", () => {
      
                     input_analyser_compo = document.getElementById('input_mode_analyse_compo')
                          
                          Mode_Analyse.choix_paramètreTD = input_analyser_compo.value
                          readTodos("SQL_composition_substances", "TABLE_composition_substances")
      
      
      
                    })
                    
                    //-----Générer un avis ----
      
                     //-----Fonction crée Avis ----
                     
                    
                    const CreerAvis = (nom, text_ref)=> {
      
      
                      let doc = new docx.Document()
      
      doc.addSection(
       {
         children : [
           new docx.Paragraph(
             {
               children : [
                       
                         new docx.TextRun({
                                  text: "Références : "+ nom,
                                  bold: true,
                                  size: 40,
                              }),
                              new docx.TextRun({
                                  text:  text_ref,
                                  
                                  size: 25,
                              }),
                              
      
               ]
      
             }
           )
            
      
         ]
      
       }
      
      )
      
                         
                         CreerLeDocument(doc, docx, FILTRE_SUBSTANCE)
                         
                    } 
                    
                    const CreerLeDocument = (doc, docx, nom_du_fichier) => {
      
                      docx.Packer.toBlob(doc).then(    blob => {             
                            saveAs(blob,  nom_du_fichier+ ".docx")
                          }  
                          )
      
                    }
      
                  
      
      
                      //-----Fonction crée Avis  FIN----
      
                      //-----Lier bouton creer avis à la fonction ----
      
                    bouton_avis = document.getElementById('Avis')
                    bouton_avis.addEventListener("click", () => {
                      if(FILTRE_SUBSTANCE){     
                        console.log("Génération d'un avis écotoxicologique pour le mélange complexe : ",  FILTRE_SUBSTANCE)
                       
      
                        // Rédiger section références
      
                        Section_référence_avis = ""
                        Section_référence_code_avis = ""
      
                        Collecteur_AVIS.DonnéesAVIS.forEach(donnée_rédaction =>{
                          choix_avancé_criteres_Ob =    Grand_collecteur_criteres[donnée_rédaction[1]][donnée_rédaction[1]]["choix_avancé_criteres"]
                          Liste_rédaction = Object.keys(choix_avancé_criteres_Ob).map((key) => [key])
                          Liste_rédaction.forEach(d_rédaction =>{ 
                            
                            Avis_abrev = Grand_collecteur_criteres[donnée_rédaction[1]][donnée_rédaction[1]]["choix_avancé_criteres"][d_rédaction ]["références"][0][0]
                            Avis_auteur = Grand_collecteur_criteres[donnée_rédaction[1]][donnée_rédaction[1]]["choix_avancé_criteres"][d_rédaction ]["références"][0][1]
                            Avis_année = Grand_collecteur_criteres[donnée_rédaction[1]][donnée_rédaction[1]]["choix_avancé_criteres"][d_rédaction ]["références"][0][2]
                            Avis_editeur = Grand_collecteur_criteres[donnée_rédaction[1]][donnée_rédaction[1]]["choix_avancé_criteres"][d_rédaction ]["références"][0][3]
                            Avis_titre = Grand_collecteur_criteres[donnée_rédaction[1]][donnée_rédaction[1]]["choix_avancé_criteres"][d_rédaction ]["références"][0][4]
                            Avis_code =  d_rédaction

      
                            Section_référence_code_avis = Section_référence_code_avis +","+ donnée_rédaction[1]  +" : "+ Avis_code +" "
      
                            source_finale = "                       "+ donnée_rédaction[1] +" =============== > ["+ Avis_abrev +" "+  Avis_auteur +" "+  Avis_année +" "+ Avis_editeur +" "+ Avis_titre+"]" +"\n" +"\n"+"-------------------------------"
                              if (donnée_rédaction[1].length !== 0) { Section_référence_avis =   Section_référence_avis + source_finale +  "         " }
                        
      
                          console.log("refajout",  
                          d_rédaction,donnée_rédaction[1], source_finale
                            )
                          })
                         
      
                         })
      
                         
                         console.log("Section_référence_avis",  
                         
                         Section_référence_avis
                            )
      
                            CreerAvis(FILTRE_SUBSTANCE, Section_référence_avis)
                     
                        const jsPDF = jsPDFInvoiceTemplate.jsPDF();
      
      
                       // console.log("DONNE AVIS AVIS GRAND", Grand_collecteur_criteres, "DONNE AVIS AVIS",  Collecteur_AVIS.DonnéesAVIS, Collecteur_donnés_avis_EAU)
      var props = {
       
          returnJsPDFDocObject: true,
          fileName:[["Rapport_" + FILTRE_SUBSTANCE] ] ,
          
          orientationLandscape: false,
          compress: true,
          logo: {
              //src: "https://raw.githubusercontent.com/edisonneza/jspdf-invoice-template/demo/images/logo.png",
              width: 53.33, //aspect ratio = width/height
              height: 26.66,
              margin: {
                  top: 0, //negative or positive num, from the current position
                  left: 0 //negative or positive num, from the current position
              }
          },
          business: {
              name: "Rapport d'évaluation des critères de qualité pour les eaux",
              address: "Complexe Scientifique",
              phone: "2700 rue Einstein Québec (Québec) G1P 3W8",
              email: "418 805-0749",
              email_1: "www.environnement.gouv.qc.ca",
              website: "Centre d’Expertise en Analyse Environnementale du Québec ",
              website2: "www.environnement.gouv.qc.ca",
          },
          contact: {
              label: "OBJET :",
              name: FILTRE_SUBSTANCE,
              address: "cas : " + Utilisateur.cas,
              phone: "Description  : " + Utilisateur.description ,
              email: "Symbole : " + Utilisateur.symbole,
              otherInfo: "Nom EN : " + Utilisateur.nom_En 
          },
          invoice: {
              label: " Paramètres : ",
              lat: "Paramètres:",
              num: " ",
              invDate: ` ( ph = ${Dureté_utilisateur.ph}, / [Mg] = ${ Dureté_utilisateur.Mg} mg/L / [Ca]  =  ${Dureté_utilisateur.Ca} mg/L)`,
              invGenDate:    `Dureté = ${ Dureté_utilisateur.dureté} mg/L `,
              headerBorder: false,
              tableBodyBorder: false,
              header: [
                {
                  title: "ID", 
                  style: { 
                    width: 10 
                  } 
                }, 
                { 
                  title: "Composé",
                  style: {
                    width: 30
                  } 
                }, 
                { 
                  title: "Unité",
                  style: {
                    width: 20
                  } 
                }, 
                { title: "CVAC"},
                { title: "CVAA"},
                { title: "VAFe"},
                { title: "min"},
                { title: "moy"},
                { title: "max"},
              ],
              table: Array.from(Array(Collecteur_AVIS.DonnéesAVIS.length), (item, index)=>([
                  index + 1,
                  Collecteur_AVIS.DonnéesAVIS[index][1],
                  "mg/L",
                  Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['CVAC'],
                  Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['CVAA'],
                  Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['VAFe'],
                  Collecteur_AVIS.DonnéesAVIS[index][3],
                  Collecteur_AVIS.DonnéesAVIS[index][4],
                  Collecteur_AVIS.DonnéesAVIS[index][5],
              ])),
              invTotalLabel: "Indice de toxicité (CVAC) :",
              invTotal: "x",
              invCurrency: "UT1*",
              row1: {
                  col1: "Indice de toxicité (CVAA) :",
                  col2: 'x',
                  col3: 'UT2*',
                  style: {
                      fontSize: 12 //optional, default 12
                  }
              },
              row2: {
                  col1: "Indice de toxicité (VAFe) :",
                  col2: 'x',
                  col3: 'UT3*',
                  style: {
                      fontSize: 12 //optional, default 12
                  }
              },
              invDescLabel: "Code des critères",
              invDesc: Section_référence_code_avis,
          },
          footer: {
              text: "---------- Document produit par l'outil Ecotox V.1 ----------",
          },
          pageEnable: true,
          pageLabel: "Page ",
      };
      
      
   
      var pdfObject = jsPDFInvoiceTemplate.default(props); //returns number of pages created
      
      //console.log("Objet PDF ",  pdfObject)
      
       window.jsPDF = window.jspdf.jsPDF;
      
      //-------CONVERTIR PDF sEN DOCX 
      
      
      
                      }
                   
      
                    } )
      
      
                    
                  }
      
      
                  if  (table_HTML_à_afficher === "TABLE_Propriete_physique_et_chimique_substance"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_Propriete_physique_et_chimique_substance")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
      
                  if  (table_HTML_à_afficher === "TABLE_proprites_physiques_et_chimiques_composes"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_proprites_physiques_et_chimiques_composes")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
      
                  if  (table_HTML_à_afficher === "TABLE_criteres_de_qualite_eaux"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_criteres_de_qualite_eaux")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end"  style="display: none;"  id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
                  if  (table_HTML_à_afficher === "TABLE_criteres_de_qualite_sols"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_criteres_de_qualite_sols")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
      
                  if  (table_HTML_à_afficher === "TABLE_ecotox_compose_organismes_aquatiques"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_ecotox_compose_organismes_aquatiques")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
                  if  (table_HTML_à_afficher === "TABLE_ecotox_compose_organisme_terrestre"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_ecotox_compose_organisme_terrestre")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
      
                  if  (table_HTML_à_afficher === "TABLE_ecotox_substances_organismes_aquatiques"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_ecotox_substances_organismes_aquatiques")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end"id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
                  if  (table_HTML_à_afficher === "TABLE_ecotox_substances_organisme_terrestre"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_ecotox_substances_organisme_terrestre")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
      
                  if  (table_HTML_à_afficher === "TABLE_Liste_substances"){
                    
                    boutons_critères = document.getElementsByClassName("boutons_Liste_substances")
                    boutons_critères[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter une ligne de données </button>`
                    
                  }
      
      
         // --------------------------------------------------------------------------------- /
      
      
      
                //-------------------------------------------------------//
                //-----Construction de la première ligne du tableau------//
                //-------------------------------------------------------//
              
      
              table_utilisateur[0].innerHTML = `<thead> <tr>  <td> ID </td> <td> Édition </td> </tr> </thead> <tbody> </tbody>`
              Première_ligne = table_utilisateur[0].children[0].children[0]   
              Première_ligne.innerHTML  = `<tr> <td> ID </td> <td> Édition </td> </tr>`
            
              console.log(Données)
              Données.variables.forEach(colonne =>{
               
                 let td = document.createElement('td') 
                  td.innerHTML =`${colonne}`
                  td.className = `${colonne}thead`

                  //----Masquer les colonnes servant à filtrer les données, pour le choix utilisateur
                  if(colonne[0] === "catégorie"|| colonne[0] === "nom_fr" || colonne[0] === "nom_en" || colonne[0] === "cas" || colonne[0] === "symbole_formule" || colonne[0] === "mots_clés" || colonne[0] === "symbole_formule_composé"){  td.style.display = "none"}
                
                 //----Ajout final de la case dans la première ligne
                  Première_ligne.appendChild(td)
            
                  
                 
              }
                

                    
                    
                
      
              ) 
      
            
              //----Éviter un allongement infini du tableau paramètre pour les critères //

              corp_table_paramètres_critères = document.getElementsByClassName("body_table_paramètres_critères")[0] 
      
              corp_table_paramètres_critères.innerHTML = ``


               //-------------------------------------------------------//
               //-----Construction du corps du tableau----- //
               //-------------------------------------------------------//
      
      
              bouton_modifier  =  "bouton_modifier" + "_" + table_HTML_à_afficher
              bouton_supprimer =   "bouton_supprimer" + "_" + table_HTML_à_afficher
              id = 1
      
              if(table_HTML_à_afficher === "TABLE_toxicite_invertebres_aquatiques_COMPO"){Collecteur_figure_ECOTOX = {}}
              if(table_HTML_à_afficher ===  "TABLE_composition_substances" ){ 
      
                
                
               Diagramme_compo = []
               Collecteur_figure1_MC = {}
               Collecteur_figure1_MC.ListeNom = []
               Collecteur_figure1_MC.ListeMOY = []
               Collecteur_figure1_MC.ListeMIN = []
               Collecteur_figure1_MC.ListeMAX = []
               Collecteur_figure1_MC.ListeCVAA = []
               Collecteur_donnés_avis_EAU = []
               Collecteur_AVIS.DonnéesAVIS = []
      
      
                  console.log("DIAGRAMME : ", FILTRE_SUBSTANCE,  Diagramme_compo  )
                
               
              }
             
            
      
              function AjouterLigneTable(Nom_sous_section_table, filtre_sous_section){
      
 
      compteur = 0  //-----sert à compter les colonnes, dans le but de les identifier dans le code ---- //
      
      zone_rapport = document.getElementsByClassName("section_rapport")[0]
      zone_rapport.innerHTML = ""
      
      
      Utilisateur[table_HTML_à_afficher].forEach(ligne =>{
      
        petit_collecteur_criteres = {}
        petit_collecteur_criteres[ligne.nom_composé] = {}
        petit_collecteur_criteres[ligne.nom_composé]["choix_avancé_criteres"] = {}
        petit_collecteur_criteres[ligne.nom_composé]["CVAC"] = "N.D"
        petit_collecteur_criteres[ligne.nom_composé]["CVAA"] = "N.D"
        petit_collecteur_criteres[ligne.nom_composé]["VAFe"] = "N.D"
      
       
      
        if(table_HTML_à_afficher === "TABLE_toxicite_invertebres_aquatiques_COMPO"){Collecteur_figure_ECOTOX = {}}
        if(table_HTML_à_afficher === "TABLE_composition_substances"){
      
          if (ligne.nom_substance === FILTRE_SUBSTANCE ){ 
            Collecteur_figure1_MC.compteur = 0
            Liste_pour_diagramme_compo = {}
          Liste_pour_diagramme_compo["Nom"] = ligne.nom_composé
        
          Collecteur_figure1_MC.ListeNom.push(ligne.nom_composé)
               
               Collecteur_donnés_avis_EAU = []
               Collecteur_donnés_avis_EAU.push(compteur)
               Collecteur_donnés_avis_EAU.push(ligne.nom_composé)
               Collecteur_donnés_avis_EAU.push("mg/L")
              
              }
             
     
        }
      
                  CVACT = 0
                  CVAAT = 0
                  VAFET = 0
                  compteur_colonnes = 0
                  données_ligne = Object.values(ligne)
      
                  //console.log("insertion de la ligne : ", id, ligne, données_ligne)
                  let ligne_à_ajouter = document.createElement('tr')   
      
                   //-----Ajout des colonnes id et édition avec les boutons modifer, supprimer
      
                  ligne_à_ajouter.innerHTML = ` 
                      <td> ${id}</td>
                       <td > 
                          <button  href = "♯" type = "button" class = ${bouton_modifier} id = ${id}> <strong> Modifier </strong> </button > 
                          
                          <button  href = "♯" type = "button" class = ${bouton_supprimer} id = ${id}> <strong> Supprimer </strong> </button > 
                       </td>   
                       ` 
      
                 
                        
                  données_ligne.forEach(colonne =>{
      
                      let td = document.createElement('td') 
                      td.innerHTML =`${colonne}`

                       //-----Pour masquer certaines colonnes

                      if (compteur_colonnes === 0 || compteur_colonnes === 1||compteur_colonnes === 2||compteur_colonnes === 3 ||
                      compteur_colonnes === 4 || compteur_colonnes === 5 ){td.style.display = "none"}

                      if (table_HTML_à_afficher === "TABLE_composition_substances"){
                        if (compteur_colonnes === 8){td.style.display = "none"}
                      }
                      
                      
                      if(colonne === "-150" || colonne === -150){
                         td.innerHTML =`code -150 = Aucune donnée disponible`
                      }
      
                      if(colonne === "-200" ||colonne === -200 ){
                         td.innerHTML =`code -200 = < limites de détection`
                      }
      
                      if(table_HTML_à_afficher === "TABLE_composition_substances") { if(compteur_colonnes === 10 || compteur_colonnes === 11 || compteur_colonnes === 12 ){
      
      
      
                        if(compteur_colonnes === 10){
      
      if (ligne.nom_substance === FILTRE_SUBSTANCE ){ 
        
        if(td.innerHTML.length !== 0 ){ 
          Collecteur_figure1_MC.ListeMIN.push(parseFloat(td.innerHTML))}
          Collecteur_donnés_avis_EAU.push(parseFloat(td.innerHTML))
      
        }
      
      
      }
      
      
                        if(compteur_colonnes === 11){
      
                          if (ligne.nom_substance === FILTRE_SUBSTANCE ){ 
                            
                            if(td.innerHTML.length !== 0 ){ 
                              Liste_pour_diagramme_compo['Valeur moyenne'] =  parseFloat(td.innerHTML)
                            
                              Collecteur_figure1_MC.ListeMOY.push(parseFloat(td.innerHTML))
                              Collecteur_donnés_avis_EAU.push(parseFloat(td.innerHTML))
                            }
                            
                             
               
                            
                            }
      
                        
                      }
                        
      
      
                      
                      if(compteur_colonnes === 12){
      
      if (ligne.nom_substance === FILTRE_SUBSTANCE ){ 
        
        if(td.innerHTML.length !== 0 ){ 
          Collecteur_figure1_MC.ListeMAX.push(parseFloat(td.innerHTML))}
          Collecteur_donnés_avis_EAU.push(parseFloat(td.innerHTML))
      
        }
      
      
      }
      
      
                             
                        verifier_criteres(ligne.cas_composé)
                        if (résultat.length !== 0 && table_HTML_à_afficher === "TABLE_composition_substances"){
      
      
                          résultat.forEach(ligne_res =>{ 
      
      
                            if (ligne_res.valeur && ligne_res.valeur !== "" && ligne_res.exposant && ligne_res.exposant !== "" ){
      
      
                          //---------------------------------------------------------------------------------------------- 
                          //----- Choix plus avancé des critères, avec récupération des notes et des références associées--
                          //------------------------------------------------------------------------------------------------
                          liste_note = []
                          liste_ref = []

                          if(table_HTML_à_afficher === "TABLE_composition_substances"){
      
                              //----- NOTES
      
                              tableau_crinote_filtré = Importation["table_crinote"].filter((ligne_crinote)=>  (ligne_crinote.CODE_CRIT === ligne_res.code_crit) )

                             
      
                              if ( tableau_crinote_filtré &&  tableau_crinote_filtré.length !== 0 &&  table_HTML_à_afficher === "TABLE_composition_substances" ){ 
                                
                                code_note = [] 
                                for(let note = 0; note <=   tableau_crinote_filtré.length - 1 ; note ++) { 
                                 
                                  code_note.push( tableau_crinote_filtré[note].CODE_NOTE) }
                                   liste_note = []
                                  code_note.forEach(notes=>{
      
                                    tableau_notes_filtré = Importation["table_notes"].filter((ligne_note)=>  (ligne_note.CODE_NOTE === notes) )
                                   
                                    liste_note.push(tableau_notes_filtré[0].DESC_NOTE)
      
                                  })
                                
                                   
                              }
                                 
                              

                              //----- RÉFÉRENCES
      
                              tableau_criref_filtré = Importation["table_criref"].filter((ligne_criref)=>  (ligne_criref.CODE_CRIT === ligne_res.code_crit) )
      
                              if (tableau_criref_filtré && tableau_criref_filtré.length  !== 0 &&  table_HTML_à_afficher === "TABLE_composition_substances"  ){  
                                code_ref= [] 
                                for(let ref = 0; ref <=  tableau_criref_filtré.length - 1 ; ref ++) { code_ref.push( tableau_criref_filtré[ref].CODE_REF) }
                                liste_ref = []
                                code_ref.forEach(refs =>{
                                  tableau_ref_filtré = Importation["table_refer"].filter((ligne_note)=>  (ligne_note.CODE_REF === refs) )
                                    
                                    liste_ref.push([tableau_ref_filtré[0].ABREV_AUT, tableau_ref_filtré[0].AUTEUR, tableau_ref_filtré[0].ANNEE, tableau_ref_filtré[0].TITRE, tableau_ref_filtré[0].EDITEUR ])
                                })
                                
      
                              }
                          
                              //----- Incorporation finale dans le petit collecteur pour transfert dans l'avis
      
                              Caractéristiques_du_critere = {}
                              Caractéristiques_du_critere.abrev = ligne_res.abrev_usag
                              Caractéristiques_du_critere.form = ligne_res.desc_forme
                              if(liste_note){ Caractéristiques_du_critere.notes = liste_note}
                              if(liste_ref){Caractéristiques_du_critere.références =  liste_ref}
                              
      
                              petit_collecteur_criteres[ligne.nom_composé]["choix_avancé_criteres"][ligne_res.code_crit] = Caractéristiques_du_critere
      
      
                               //----- Incorporation finale sous la table des compositions, pour permettre à l'utilisateur de faire son choix
                               
                               corp_table_paramètres_critères = document.getElementsByClassName("body_table_paramètres_critères")[0]
                               corp_table_paramètres_critères.inn
                               nouvelle_ligne = document.createElement("tr")
                               nouvelle_ligne.class = ligne_res.code_crit + ligne.nom_composé
                               valeur_reel = (parseFloat(ligne_res.valeur.replace(',', '.'))) * 10 **(parseFloat(ligne_res.exposant.replace(',', '.')))
                               indiquer_choix = ''
                               if (Selection_utilisateur_codecri[ligne.cas_composé + ligne_res.abrev_usag]){"Choix de l'utilisateur"}
                               else {Selection_utilisateur_codecri[ligne.cas_composé + ligne_res.abrev_usag] = [ligne_res.code_crit, (parseFloat(ligne_res.valeur.replace(',', '.'))) * 10 **(parseFloat(ligne_res.exposant.replace(',', '.')))]}
                               
                               
      
                               if(Selection_utilisateur_codecri[ligne.cas_composé + ligne_res.abrev_usag]  && Selection_utilisateur_codecri[ligne.cas_composé + ligne_res.abrev_usag][0] === ligne_res.code_crit  ){
                                 indiquer_choix = ' Sélectionné '
                                 nouvelle_ligne.style.color = "red"
                               }
                              
      
                               nouvelle_ligne.innerHTML = `
                               
                                  <td>${ligne.nom_composé} </td>
                                  <td>${ligne.cas_composé}</td>
                                  <td>${ligne_res.abrev_usag}</td>
                                  <td>${valeur_reel + " " + ligne_res.desc_unite}</td>
                                  <td>${liste_note} </td>
                                  <td>${ligne_res.desc_forme} </td>
                                  <td>${ligne_res.code_crit + indiquer_choix} </td>
                                  <td class = "Refp"> ${liste_ref}</td>
                                              
                               `
                               nouvelle_ligne.addEventListener("click", () => {
                                Selection_utilisateur_codecri[ligne.cas_composé + ligne_res.abrev_usag] = [ligne_res.code_crit, (parseFloat(ligne_res.valeur.replace(',', '.'))) * 10 **(parseFloat(ligne_res.exposant.replace(',', '.')))]
                                console.log(ligne_res.abrev_usag, ligne.nom_composé, ligne_res.code_crit, (parseFloat(ligne_res.valeur.replace(',', '.'))) * 10 **(parseFloat(ligne_res.exposant.replace(',', '.'))))
                                readTodos("SQL_composition_substances", "TABLE_composition_substances")
                                })
                                
                                  //----- condition avec compteur colonne pour éviter ajout infinie de ligne
                              
                                
                               if ( compteur_colonnes === 10  && ligne.nom_substance === FILTRE_SUBSTANCE  && table_HTML_à_afficher === "TABLE_composition_substances" ) { corp_table_paramètres_critères.appendChild(nouvelle_ligne) }
                              
                             
      
                              }
                         
                            //---------------------------------------------------------------------------------------------- 
                            //----- Coloration des cases pour le mode analyse
                            //------------------------------------------------------------------------------------------------
      
      
      
      valeur_reel = (parseFloat(ligne_res.valeur.replace(',', '.'))) * 10 **(parseFloat(ligne_res.exposant.replace(',', '.')))
      
      if (ligne.nom_substance === FILTRE_SUBSTANCE ){ 
      
      
     
       
         if(Selection_utilisateur_codecri[ligne.cas_composé + ligne_res.abrev_usag]){
      
          
          valeur_reel = Selection_utilisateur_codecri[ligne.cas_composé + ligne_res.abrev_usag][1]
      
        }
         else {console.log("existe PAS")}
        
        if ( valeur_reel ){  petit_collecteur_criteres[ligne.nom_composé][ligne_res.abrev_usag] = valeur_reel}
         
       }
           
      couleur_moy = "hsl(0, 0%, 100%)"


      //----- Pour les autres composés

 
      
      if (   parseFloat( td.innerHTML) === valeur_reel ){couleur_moy = "hsl(41, 100%, 95%)"
      }
      if (  parseFloat(td.innerHTML) > valeur_reel){couleur_moy = "hsl(0, 100%, 95%)"
      }
      if (   parseFloat(td.innerHTML) < valeur_reel) {couleur_moy = "hsl(80, 100%, 90%)"
      }
      
      //----- Pour les métaux 
 
      function Comparer_avec_les_critères_calculés(critères){

        if (   parseFloat( td.innerHTML) === critères ){couleur_moy = "hsl(41, 100%, 95%)"
      }
      if (  parseFloat(td.innerHTML) > critères){couleur_moy = "hsl(0, 100%, 95%)"
      }
      if (   parseFloat(td.innerHTML) < critères) {couleur_moy = "hsl(80, 100%, 90%)"
      }
               

      }

      if( ligne_res.abrev_usag === "CVAC" ||ligne_res.abrev_usag === "CVAA" ||ligne_res.abrev_usag === "VAFe" ){

           function Colorer(VAFe, CVAA, CVAC, cas1, cas2){

            if( ligne.cas_composé === cas1|| ligne.cas_composé === cas2 ){
          couleur_moy = "hsl(0, 0%, 100%)"
          if(ligne_res.abrev_usag === "VAFe"){Comparer_avec_les_critères_calculés(VAFe) }
          if(ligne_res.abrev_usag === "CVAA"){Comparer_avec_les_critères_calculés(CVAA) }
          if(ligne_res.abrev_usag === "CVAC"){Comparer_avec_les_critères_calculés(CVAC) }

        }

           }


        if( ligne.cas_composé === "7440-47-3"|| ligne.cas_composé === "007440-47-3" ){
          couleur_moy = "hsl(0, 0%, 100%)"
          if(ligne_res.abrev_usag === "VAFe"){Comparer_avec_les_critères_calculés(VAFe_calculéeChrome) }
          if(ligne_res.abrev_usag === "CVAA"){Comparer_avec_les_critères_calculés(CVAA_calculéChrome) }
          if(ligne_res.abrev_usag === "CVAC"){Comparer_avec_les_critères_calculés(CVAC_calculéChrome) }

        }
        if( ligne.cas_composé === "7440-22-4"|| ligne.cas_composé === "007440-22-4" ){
        
          if(ligne_res.abrev_usag === "VAFe"){Comparer_avec_les_critères_calculés(VAFe_calculéeArgent) }
          if(ligne_res.abrev_usag === "CVAA"){Comparer_avec_les_critères_calculés(CVAA_calculéArgent) }
          
        }
      
        Colorer(VAFe_calculéeBaryum,CVAA_calculéBaryum,CVAC_calculéBaryum,"7440-39-3", "007440-39-3")
        Colorer(VAFe_calculéeBéryllium, CVAA_calculéBéryllium, CVAC_calculéBéryllium, "7440-41-7", "007440-41-7" )
        Colorer(VAFe_calculéeCadmium, CVAA_calculéCadmium, CVAC_calculéCadmium, "7440-43-9", "007440-43-9")
        Colorer(VAFe_calculéeCuivre, CVAA_calculéCuivre, CVAC_calculéCuivre, "7440-50-8", "007440-50-8")
        Colorer(VAFe_calculéeManganèse, CVAA_calculéManganèse, CVAC_calculéManganèse, "7439-96-5", "007439-96-5" )
        Colorer(VAFe_calculéeNickel, CVAA_calculéNickel, CVAC_calculéNickel, "7440-02-0", "007440-02-0" )
        Colorer(VAFe_calculéePlomb, CVAA_calculéPlomb, CVAC_calculéPlomb, "7439-92-1", "007439-92-1" )
        Colorer(VAFe_calculéeZinc, CVAA_calculéZinc, CVAC_calculéZinc, "7440-66-6", "007440-66-6")
      




      }
     

   


      
      } 
      
      
      
      
      if (Mode_Analyse.choix_paramètreTD === ligne_res.abrev_usag ) {
        
        td.style.backgroundColor =  couleur_moy
      
        if (ligne.nom_substance === FILTRE_SUBSTANCE ){
      
       
            }
      }
                          })
      
                        }
      
                      }}
      
      
      
          
      
                      //--Incorporation finale de la colonne
      
                     ligne_à_ajouter.appendChild(td)
                      compteur_colonnes =  compteur_colonnes +1 
      
      
      
      
      
                 }) 
      
                    //--Filtrer la ligne 
              
                 FILTRE_FINAL = Utilisateur
                
               
                 if(table_HTML_à_afficher === "TABLE_criteres_de_qualite_eaux" ){

                  note_TC =  document.getElementById('inf_note')
                    note_TC.innerHTML = `<strong> Note : </strong> clickez sur une ligne `

                    abr =  document.getElementById('inf_abrev')
                    abr.innerHTML = `<strong> Abrev : </strong> clickez sur une ligne `

                    ref_TC =  document.getElementById('inf_ref')
                    ref_TC.innerHTML = `<strong> Références : </strong> clickez sur une ligne`

                  ligne_à_ajouter.addEventListener("click", () => {

                    //----- NOTES
      
                    tableau_crinote_filtré = Importation["table_crinote"].filter((ligne_crinote)=>  (ligne_crinote.CODE_CRIT === ligne.code) )

console.log('table brute 1 ',  tableau_crinote_filtré )

if ( tableau_crinote_filtré &&  tableau_crinote_filtré.length !== 0  ){ 
  
  code_note = [] 
  for(let note = 0; note <=   tableau_crinote_filtré.length - 1 ; note ++) { 
   
    code_note.push( tableau_crinote_filtré[note].CODE_NOTE) }
     liste_note = []
    code_note.forEach(notes=>{

      tableau_notes_filtré = Importation["table_notes"].filter((ligne_note)=>  (ligne_note.CODE_NOTE === notes) )
     
      liste_note.push(tableau_notes_filtré[0].DESC_NOTE)

    })
  
     
}
   
console.log('table brute 1CLICK ', liste_note )

//----- RÉFÉRENCES

tableau_criref_filtré = Importation["table_criref"].filter((ligne_criref)=>  (ligne_criref.CODE_CRIT ===  ligne.code) )

if (tableau_criref_filtré && tableau_criref_filtré.length  !== 0  ){  
  code_ref= [] 
  for(let ref = 0; ref <=  tableau_criref_filtré.length - 1 ; ref ++) { code_ref.push( tableau_criref_filtré[ref].CODE_REF) }
  liste_ref = []
  code_ref.forEach(refs =>{
    tableau_ref_filtré = Importation["table_refer"].filter((ligne_note)=>  (ligne_note.CODE_REF === refs) )
      
      liste_ref.push([tableau_ref_filtré[0].ABREV_AUT, tableau_ref_filtré[0].AUTEUR, tableau_ref_filtré[0].ANNEE, tableau_ref_filtré[0].TITRE, tableau_ref_filtré[0].EDITEUR ])
  })

}
                    texte_note = ""
                    texte_ref = ""
                    liste_note.forEach(selection_note =>{
                      texte_note = texte_note + " " + selection_note
                    })
                    liste_ref.forEach(selection_ref =>{
                      texte_ref =  texte_ref + " " + selection_ref
                    })


                    console.log('table brute 2CLICK ',  liste_ref )
                    console.log("click")
                    abrev_TC =  document.getElementById('inf_abrev')
                    abrev_TC.innerHTML = `<strong> Abrev : </strong> ${ligne.abrev} - ${ligne.valeur} ${ligne.unité} `

                    note_TC =  document.getElementById('inf_note')
                    note_TC.innerHTML = `<strong> Note : </strong> ${texte_note}`

                    ref_TC =  document.getElementById('inf_ref')
                    ref_TC.innerHTML = `<strong> Références : </strong> ${ texte_ref }`



                  })
                 }

                 
                 if (ligne.catégorie !== FILTRE_FINAL.type || ligne.nom_fr !== FILTRE_FINAL.nom || ligne.nom_en !== FILTRE_FINAL.nom_En|| ligne.cas !== FILTRE_FINAL.cas || ligne.symbole_formule !== FILTRE_FINAL.symbole ||ligne.mots_clés !== FILTRE_FINAL.description){ ligne_à_ajouter.style.display = "none"}
                
      
                 if (table_HTML_à_afficher === "TABLE_composition_substances" || table_HTML_à_afficher === "TABLE_Propriete_physique_et_chimique_substance" || table_HTML_à_afficher === "TABLE_ecotox_substances_organismes_aquatiques" || table_HTML_à_afficher === "TABLE_ecotox_substances_organisme_terrestre"){
                  
                 if (Selection_Utilisateur.choix_substances  !== "neutre"){
      
                 if (ligne.nom_substance !== FILTRE_SUBSTANCE ){ ligne_à_ajouter.style.display = "none"}
      
      
                 if(table_HTML_à_afficher === "TABLE_composition_substances") {
      
                 Collecteur_de_couleurs = {}
      
         //----------------------------------------------------------------------------------//
         //--Ecriture du Rapport ------------------------------------------------------------//
         // ----------------------------------------------------------------------------------//
      
                if (ligne.nom_substance === FILTRE_SUBSTANCE ){ 
        
          if(Rapport.état === "ON"){ 
           
            zone_rapport = document.getElementsByClassName("section_rapport")[0]
            verifier_criteres(ligne.cas_composé)
      
      
      //----------------------------------------------------------------------------------//
      //---écriture du rapport  criteres de qualité --------------------------------------//
      //----------------------------------------------------------------------------------//
      
      
      if (résultat.length !== 0){

        chaine = ""
        chaine_min = ""
        chaine_max = ""
        
        résultat.forEach(ligne_res =>{
          A = "  <br> [ "
          B = "donnée non disponible"
          C = "donnée non disponible"
          D = "donnée non disponible"
          E = "donnée non disponible"
          F = " ]"
      
          couleur_moy =  "hsl(0, 0%, 48%)"
          couleur_min =  "hsl(0, 0%, 48%)"
          couleur_max =  "hsl(0, 0%, 48%)"
      
      
      
          if (ligne_res.valeur && ligne_res.valeur !== "" && ligne_res.exposant && ligne_res.exposant !== "" ){
      
            valeur_reel = (parseFloat(ligne_res.valeur.replace(',', '.'))) * 10 **(parseFloat(ligne_res.exposant.replace(',', '.')))
      
         


                  
            if ( ligne.valeur_moy === valeur_reel ){couleur_moy = "hsl(52, 100%, 50%)"
            }
            if ( ligne.valeur_moy > valeur_reel){couleur_moy = "hsl(0, 100%, 85%)"
            }
            if ( ligne.valeur_moy < valeur_reel ){couleur_moy = "hsl(114, 69%, 34%)"
            }
              

            if ( ligne.valeur_min === valeur_reel ){couleur_min = "hsl(52, 100%, 50%)"
            }
            if ( ligne.valeur_min > valeur_reel){couleur_min = "hsl(0, 100%, 85%)"
            }
            if ( ligne.valeur_min < valeur_reel ){couleur_min = "hsl(114, 69%, 34%)"
            }

            if ( ligne.valeur_max === valeur_reel ){couleur_max = "hsl(52, 100%, 50%)"
            }
            if ( ligne.valeur_max > valeur_reel){couleur_max = "hsl(0, 100%, 85%)"
            }
            if ( ligne.valeur_max < valeur_reel ){couleur_max = "hsl(114, 69%, 34%)"
            }



            if (  ligne.valeur_min  <=  0  ){couleur_min=  "hsl(0, 0%, 48%)"}
            if (  ligne.valeur_moy  <=  0  ){couleur_moy=  "hsl(0, 0%, 48%)"}
            if (  ligne.valeur_max  <=  0  ){couleur_max =  "hsl(0, 0%, 48%)"}
      
      
            Collecteur_de_couleurs[ligne_res.abrev_usag] = couleur_moy
            
          } 
      
          Mode_Analyse.choix_paramètre = ""
      
      
      
          if (Mode_Analyse.choix_paramètre === ligne_res.abrev_usag ) { ligne_à_ajouter.style.backgroundColor =  couleur_moy
      
      
            console.log("analyse", ligne_à_ajouter[0])
            console.log("analyse", ligne_à_ajouter.innerHTML)
      
           }
                
         
      
          if (ligne_res.abrev_usag && ligne_res.abrev_usag !== "" ){ B =  `<strong style = "color :  ${couleur_moy}"> ${ligne_res.abrev_usag } </strong>`} 
          if (ligne_res.abrev_usag && ligne_res.abrev_usag !== "" ){ Bmin =  `<strong style = "color :  ${couleur_min}"> ${ligne_res.abrev_usag } </strong>`} 
          if (ligne_res.abrev_usag && ligne_res.abrev_usag !== "" ){ Bmax =  `<strong style = "color :  ${couleur_max}"> ${ligne_res.abrev_usag } </strong>`} 

          if (ligne_res.valeur && ligne_res.valeur !== "" ){ C = ligne_res.valeur } 
          if (ligne_res.exposant && ligne_res.exposant !== "" ){ D  = ligne_res.exposant } 
          if (ligne_res.desc_unite && ligne_res.desc_unite !== "" ){ E = ligne_res.desc_unite } 
          if (ligne_res.code_crit && ligne_res.code_crit !== "" ){G = `${ligne_res.code_crit} ` } 
       

         
    
          chaine = chaine +"  "+ A +"  "+ B +"  "+ "=" +"  "+ C +"  "+"*" + "10" +"  "+"^" +"  ("+  D +") "+ E+"  "+ F + " CODE : " + G
          chaine_min =   chaine_min  +"  "+ A +"  "+ Bmin +"  "+ "=" +"  "+ C +"  "+"*" + "10" +"  "+"^" +"  ("+  D +")  "+ E+"  "+ F  + " CODE : " + G
          chaine_max =   chaine_max  +"  "+ A +"  "+ Bmax +"  "+ "=" +"  "+ C +"  "+"*" + "10" +"  "+"^" +"  ("+  D +")  "+ E+"  "+ F  + " CODE : " + G
      
           couleur_moy = ""
      
      
        })
      
      
      
      
        if (ligne.cas_composé){ 
      
      rapport_min = document.createElement('div') 
      rapport_min.innerHTML = `<p style ="font-size: 15px;"> <strong style = "font-size: 20px; color :  hsl(212, 65%, 63%)"> ${ligne.nom_composé} </strong>  ${ligne.cas_composé}  (${ligne.symbole_formule_composé}) :  <strong> valeur min :  ${ligne.valeur_min} mg/L </strong>  ${chaine_min} </p>`
      zone_rapport.appendChild(rapport_min) 
      
      
      tests = document.createElement('div') 
      tests.innerHTML = `<p style ="font-size: 15px;">  <strong style = "font-size: 20px; color :  hsl(212, 65%, 63%)"> ${ligne.nom_composé} </strong>  ${ligne.cas_composé}   (${ligne.symbole_formule_composé}) :  <strong>  valeur moy :  ${ligne.valeur_moy} mg/L </strong>   ${chaine} </p>`
      
      
      tests.addEventListener("click", () => {
        
           document.getElementsByClassName('Paramètre_ecotox_formu')[0].style.display = "inline"
   

           console.log("OBJET", Importation["import_ecotox"])
         
          List_ecotoxrapide =    Importation["import_ecotox"].filter((ligne_tableau)=>  (
  
  ligne_tableau.cas  === NORMALISER_CAS(ligne.cas_composé)
   ) )


               console.log("LISTE FILTRE , ",   List_ecotoxrapide)

               Corp_table_ecotox = document.getElementsByClassName("body_table_ecotox_rapide")[0]
               Corp_table_ecotox.innerHTML = ``

           



               List_ecotoxrapide.forEach(entré_ecotox  => {


                if(entré_ecotox['valeur_moy']){ valeur_reel_moy = (parseFloat(entré_ecotox['valeur_moy'].replace(',', '.'))) 
      console.log("VALEUR MOY ; ",valeur_reel_moy, valeur_reel_moy +1 )

       couleur_moy_er = 'hsl(0, 0%, 100%)'
                  
      if ( valeur_reel_moy > 0  && valeur_reel_moy < 0.1 ){couleur_moy_er = "hsl(15, 100%, 40%)"
            }
            if ( valeur_reel_moy > 0.1  && valeur_reel_moy <= 1){couleur_moy_er = "hsl(36, 100%, 50%)"
            }
            if ( valeur_reel_moy > 1  && valeur_reel_moy <= 10){couleur_moy_er = "hsl(60, 100%, 70%)"
            }
            if ( valeur_reel_moy > 10  && valeur_reel_moy <= 100){couleur_moy_er = "hsl(90, 100%, 60%)"
            }
            if ( valeur_reel_moy > 100 ){couleur_moy_er = "hsl(120, 100%, 30%)"
            }

        

   }




            let ligne = document.createElement('tr') 
            ligne.innerHTML =`                
            <td>${entré_ecotox['categorie']}</td>
            <td>${entré_ecotox['nom_fr']}</td>
            <td>${entré_ecotox['nom_en']}</td>
            <td>${entré_ecotox['cas']}</td>
            <td>${entré_ecotox['mots_cles']}</td>
            <td>${entré_ecotox['symbole_formule']}</td>
            <td>${entré_ecotox['groupe_organisme']}</td>
            <td strong style = "background-color :  ${couleur_moy_er}" >${entré_ecotox['espece']}</td>
            <td strong style = "background-color :  ${couleur_moy_er}" >${entré_ecotox['nom_commun']}</td>
            <td strong style = "background-color :  ${couleur_moy_er}" >${entré_ecotox['parametre']}</td>
            <td strong style = "background-color :  ${couleur_moy_er}" >${entré_ecotox['cible']}</td>
            <td>${entré_ecotox['duree_exposition']}</td>
            <td>${entré_ecotox['unite_duree']}</td>
            <td>${entré_ecotox['valeur_min']}</td>
            <td strong style = "background-color :  ${couleur_moy_er}">${entré_ecotox['valeur_moy']}</td>
            <td>${entré_ecotox['valeur_max']}</td>
            <td>${entré_ecotox['unite_valeur']}</td>
            <td>${entré_ecotox['stade_de_vie']}</td>
            <td>${entré_ecotox['type_d_exposition']}</td>
            <td>${entré_ecotox['milieu_de_test']}</td>
            <td>${entré_ecotox['effet_details']}</td>
            <td>${entré_ecotox['base_de_donnees']}</td>
              <td>${entré_ecotox['reference_citation']}</td> 
                <td>${entré_ecotox['reference_titre']}</td>                   
            `
         
 
           
             
              Corp_table_ecotox.appendChild(ligne)
           
         couleur_moy_er = 'hsl(0, 0%, 100%)'











               })









          })

      
      
      zone_rapport.appendChild(tests) 
      chaine =""
      
      
      rapport_max = document.createElement('div') 
      rapport_max .innerHTML = `<p style ="font-size: 15px;"> <strong style = "font-size: 20px; color :  hsl(212, 65%, 63%)"> ${ligne.nom_composé} </strong>   ${ligne.cas_composé} (${ligne.symbole_formule_composé}) : <strong>  valeur max :  ${ligne.valeur_max} mg/L  </strong>   ${chaine_max}   </p>`
      zone_rapport.appendChild( rapport_max ) 
      
      
      }
      
             }
             
             if (résultat.length === 0){
              tests = document.createElement('div') 
      tests.innerHTML = `<p style ="font-size: 15px;"> <strong style = "color :  hsl(0, 100%, 50%)">${ligne.nom_composé}   ${ligne.cas_composé} (${ligne.symbole_formule_composé}) : <strong> </strong>  "Pas de critères disponibles !" </strong>  </p>`
       zone_rapport.appendChild(tests) 
       
      tests.addEventListener("click", () => {
        
        document.getElementsByClassName('Paramètre_ecotox_formu')[0].style.display = "inline"


        console.log("OBJET", Importation["import_ecotox"])
      
       List_ecotoxrapide =    Importation["import_ecotox"].filter((ligne_tableau)=>  (

ligne_tableau.cas  === NORMALISER_CAS(ligne.cas_composé)
) )


            console.log("LISTE FILTRE , ",   List_ecotoxrapide)

            Corp_table_ecotox = document.getElementsByClassName("body_table_ecotox_rapide")[0]
            Corp_table_ecotox.innerHTML = ``

        



            List_ecotoxrapide.forEach(entré_ecotox  => {


             if(entré_ecotox['valeur_moy']){ valeur_reel_moy = (parseFloat(entré_ecotox['valeur_moy'].replace(',', '.'))) 
   console.log("VALEUR MOY ; ",valeur_reel_moy, valeur_reel_moy +1 )

    couleur_moy_er = 'hsl(0, 0%, 100%)'
               
   if ( valeur_reel_moy > 0  && valeur_reel_moy < 0.1 ){couleur_moy_er = "hsl(15, 100%, 40%)"
         }
         if ( valeur_reel_moy > 0.1  && valeur_reel_moy <= 1){couleur_moy_er = "hsl(36, 100%, 50%)"
         }
         if ( valeur_reel_moy > 1  && valeur_reel_moy <= 10){couleur_moy_er = "hsl(60, 100%, 70%)"
         }
         if ( valeur_reel_moy > 10  && valeur_reel_moy <= 100){couleur_moy_er = "hsl(90, 100%, 60%)"
         }
         if ( valeur_reel_moy > 100 ){couleur_moy_er = "hsl(120, 100%, 30%)"
         }

     

}




         let ligne = document.createElement('tr') 
         ligne.innerHTML =`                
         <td>${entré_ecotox['categorie']}</td>
         <td>${entré_ecotox['nom_fr']}</td>
         <td>${entré_ecotox['nom_en']}</td>
         <td>${entré_ecotox['cas']}</td>
         <td>${entré_ecotox['mots_cles']}</td>
         <td>${entré_ecotox['symbole_formule']}</td>
         <td>${entré_ecotox['groupe_organisme']}</td>
         <td strong style = "background-color :  ${couleur_moy_er}" >${entré_ecotox['espece']}</td>
         <td strong style = "background-color :  ${couleur_moy_er}" >${entré_ecotox['nom_commun']}</td>
         <td strong style = "background-color :  ${couleur_moy_er}" >${entré_ecotox['parametre']}</td>
         <td strong style = "background-color :  ${couleur_moy_er}" >${entré_ecotox['cible']}</td>
         <td>${entré_ecotox['duree_exposition']}</td>
         <td>${entré_ecotox['unite_duree']}</td>
         <td>${entré_ecotox['valeur_min']}</td>
         <td strong style = "background-color :  ${couleur_moy_er}">${entré_ecotox['valeur_moy']}</td>
         <td>${entré_ecotox['valeur_max']}</td>
         <td>${entré_ecotox['unite_valeur']}</td>
         <td>${entré_ecotox['stade_de_vie']}</td>
         <td>${entré_ecotox['type_d_exposition']}</td>
         <td>${entré_ecotox['milieu_de_test']}</td>
         <td>${entré_ecotox['effet_details']}</td>
         <td>${entré_ecotox['base_de_donnees']}</td>
           <td>${entré_ecotox['reference_citation']}</td> 
             <td>${entré_ecotox['reference_titre']}</td>                   
         `
      

        
          
           Corp_table_ecotox.appendChild(ligne)
        
      couleur_moy_er = 'hsl(0, 0%, 100%)'











            })









       })

      
             }  
      
      //----------------Définition d'une fonction pour le Calcule automatique  des critères ---------
      //----------------------------------------------------------------------------------------//-
      
        function Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculée, CVAA_calculé, CVAC_calculé,  CAS1, CAS2,  Nom_Auto  ) {
      
            
      
       if (ligne.cas_composé === CAS1|| ligne.cas_composé === CAS2 ){
              tests = document.createElement('div') 
              
      
           
      
      
        if (VAFe_calculée !== 'Pas de formule' ){
          VAFe_calculée =  VAFe_calculée.toPrecision(3)
          petit_collecteur_criteres[ligne.nom_composé]["VAFe"]  = VAFe_calculée}
          
      
      
      if ( CVAA_calculé !== 'Pas de formule'){
        CVAA_calculé = CVAA_calculé.toPrecision(3)
        petit_collecteur_criteres[ligne.nom_composé]["CVAA"]  = 
        CVAA_calculé}
      
      
      if ( CVAC_calculé !== 'Pas de formule'){
        CVAC_calculé =  CVAC_calculé.toPrecision(3)
        petit_collecteur_criteres[ligne.nom_composé]["CVAC"]  = 
        CVAC_calculé}
      

      
      tests.innerHTML = `<p style ="font-size: 15px;"> <strong style = "color : hsl(288, 23%, 39%)">  (ph = ${Dureté_utilisateur.ph} / Dureté = ${Dureté_utilisateur.dureté} mg/L) =====> Calcule automatique pour le composé ${Nom_Auto} : VAFe = ${VAFe_calculée} mg/L, CVAA =  ${CVAA_calculé} mg/L, CVAC =  ${CVAC_calculé} mg/L (Annexe 12) </p>`
   
      if(DuMAX_utilisateur.value !== "" & DuMIN_utilisateur.value !== ""){

            if(Critères_MIN[CAS1]){console.log('verifiction, ',Critères_MAX, Critères_MIN, Critères_MAX[CAS1], Critères_MAX[CAS1] )
            table_Intervalle_critère = document.createElement('div') 
           table_Intervalle_critère.innerHTML = `
      <table style="font-size: 15px">
           <tr style="font-size: 15px;background-color: hsl(213, 11%, 65%);color: #ffffff;">
            <th>Dureté (mg/L)</th>
            <th>VAFe (mg/L)</th>
            <th>CVAA (mg/L)</th>
            <th>CVAC (mg/L)</th>
          </tr>
           <tr>
            <td> ${DuMIN_utilisateur.value}</td>
            <td> ${Critères_MIN[CAS1]["VAFe"]} </td>
            <td> ${Critères_MIN[CAS1]["CVAA"]}</td>
             <td> ${Critères_MIN[CAS1]["CVAC"]}</td>
          </tr>
           <tr>
            <td> ${Dureté_utilisateur.dureté}</td>
            <td> ${VAFe_calculée} </td>
            <td> ${CVAA_calculé}</td>
             <td> ${CVAC_calculé}</td>
          </tr>
          <tr>
            <td> ${DuMAX_utilisateur.value }</td>
            <td> ${Critères_MAX[CAS1]["VAFe"]}</td>
            <td> ${Critères_MAX[CAS1]["CVAA"]}</td>
            <td> ${Critères_MAX[CAS1]["CVAC"]}</td>
          </tr>
     </table>
           `
           zone_rapport.appendChild(table_Intervalle_critère)
          }
           
            
      
     
           }
      
          
      zone_rapport.appendChild(tests)
    
      
    
      
     
      //-Argent Fin--------------------------------------
      
      
      
      
       
      
             }  
      
                  //----------------Calcule automatique critères
      
        }
      
      
   
        //-Chrome
      
      
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux( VAFe_calculéeChrome,CVAA_calculéChrome,CVAC_calculéChrome,  "7440-47-3", "007440-47-3",  "Chrome" )
      
      
        //-Argent
        
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéeArgent,CVAA_calculéArgent,CVAC_calculéArgent,"7440-22-4", "007440-22-4",  "Argent" )
      
      
         
        //-Baryum
      
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéeBaryum,CVAA_calculéBaryum,CVAC_calculéBaryum,"7440-39-3", "007440-39-3",  "Baryum" )
      
      
         //-Béryllium
        
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéeBéryllium, CVAA_calculéBéryllium, CVAC_calculéBéryllium, "7440-41-7", "007440-41-7",  "Béryllium" )
      
      
         //-Cadmium
       
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéeCadmium, CVAA_calculéCadmium, CVAC_calculéCadmium, "7440-43-9", "007440-43-9",  "Cadmium" )
      
      
      
       //- Cuivre
       
       
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéeCuivre, CVAA_calculéCuivre, CVAC_calculéCuivre, "7440-50-8", "007440-50-8",  "Cuivre" )
      
      
         
      //- Manganèse
      
       
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéeManganèse, CVAA_calculéManganèse, CVAC_calculéManganèse, "7439-96-5", "007439-96-5",  "Manganèse" )
      
      
      
         //- Nickel
      
       
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéeNickel, CVAA_calculéNickel, CVAC_calculéNickel, "7440-02-0", "007440-02-0",  "Nickel" )
      
         
         //- Plomb
      
  
       
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéePlomb, CVAA_calculéPlomb, CVAC_calculéPlomb, "7439-92-1", "007439-92-1",  "Plomb" )
      
         //- Zinc
      
        
         Calculer_Automatiquement_Les_critères_de_qualité_pour_les_eaux(VAFe_calculéeZinc, CVAA_calculéZinc, CVAC_calculéZinc, "7440-66-6", "007440-66-6",  "Zinc" )
      
      
      liste_lignes_rapport = tableau.filter((ligne_tableau)=>  (ligne_tableau.nom_substance === FILTRE_SUBSTANCE) )
      nombre_lignes_rapport =  liste_lignes_rapport.length
      
        
       
      
      
      }
      
      compteur = compteur + 1
      if (compteur === (nombre_lignes_rapport - 1 )){Rapport.état === "OFF"}
        
      
      }}
                
       
       } }

       
      
      
       //}
              //----------------------------------------------------------------------------------//
              //--Ajout final ligne ------------------------------------------------------------//
             // ----------------------------------------------------------------------------------//
              cop = ligne_à_ajouter
                  table_utilisateur[0].children[1].appendChild(ligne_à_ajouter)
      
                
      
                  if( FILTRE_SUBSTANCE && FILTRE_SUBSTANCE.length !== 0 &&  table_HTML_à_afficher === "TABLE_composition_substances"){  if (ligne.nom_substance === FILTRE_SUBSTANCE ){Diagramme_compo.push(Liste_pour_diagramme_compo)} }
                
                  if (FILTRE_SUBSTANCE && ligne.nom_substance === FILTRE_SUBSTANCE  &&  table_HTML_à_afficher === "TABLE_composition_substances"){
      
                  
                    // console.log("AFFICHER", Collecteur_deCrietres2)
                    // console.log("AFFICHER", Collecteur_deCrietres2)
                  Grand_collecteur_criteres[ligne.nom_composé] = petit_collecteur_criteres
                   
                    Collecteur_AVIS.DonnéesAVIS.push(Collecteur_donnés_avis_EAU)
                    }
               
                       id = id + 1
                          
               }) }
      
               //--Construction du Diagramme --------------------------------------
      
         
           // fig1(Utilisateur.nom)
      
      //-----------------------------------------------------------------------



               //-------------------------------------------------------//
               //-----Construction des figures et graphiques---- //
               //-------------------------------------------------------//
      
       //--Construction FIgure1 Zone composition--------------------------------------
      
      
          
           //-----------------------------------------------------------------------
      
           if(table_HTML_à_afficher === "TABLE_composition_substances"){
            if ( FILTRE_SUBSTANCE ){console.log(" Les données pour la Fig 1 sont : ", Collecteur_figure1_MC)
              
              
            }
      
            }
             
      
      
              
          //--Construction du Diagramme --------------------------------------
           //-----------------------------------------------------------------------
           if(table_HTML_à_afficher === "TABLE_toxicite_invertebres_aquatiques_COMPO"){
      
      
            am5.ready(function() {
      
      // Create root element
      // https://www.amcharts.com/docs/v5/getting-started/#Root_element
      am5.array.each(am5.registry.rootElements, 
         function(root) {
            if (root.dom.id == "chartdiv2") {
               root.dispose();
            }
         }
      );
      var root = am5.Root.new("chartdiv2");
      
      // Create custom theme
      // https://www.amcharts.com/docs/v5/concepts/themes/#Quick_custom_theme
      const myTheme = am5.Theme.new(root);
      myTheme.rule("Label").set("fontSize", 10);
      myTheme.rule("Grid").set("strokeOpacity", 0.06);
      
      // Set themes
      // https://www.amcharts.com/docs/v5/concepts/themes/
      root.setThemes([
        am5themes_Animated.new(root),
        myTheme
      ]);
      
      // Data
      var temperatures = {
        "Poissons": [
          ["Mykiss",0, 300.61, 1000.61, 2000 ],
          ["Austria", 0, 2000, "X", 500],
          ["Belgium", 0, 1500.37, 400.61, 650],
        ],
        "Invertébrés": [
          ["Algeria", 0, 1000.72, 300.03 ],
          ["Angola",0, 500.14, 200.62],
          ["Botswana", 0,  1000.09, 200.2],
          ],
        "Algues": [
          ["Argentina", 0, 100.27, 0.53],
          ["Belize", 0, 610.95, 1000.66,],
          ["Bolivia", 0, 1000.52, 10.68],
          
        ],
        
      }
      
      // Modify defaults
      root.numberFormatter.set("numberFormat", "+ #.0mg/L|#.0mg/L|0.0mg/L");
      
      var startYear = 1;
      var endYear = 4;
      var currentYear = 1;
      
      var div = document.getElementById("chartdiv2");
      document.getElementById("chartdiv2").style.display = "none"
      
      
      var colorSet = am5.ColorSet.new(root, {});
      
      
      // Create chart
      // https://www.amcharts.com/docs/v5/charts/radar-chart/
      var chart = root.container.children.push(am5radar.RadarChart.new(root, {
        panX: false,
        panY: false,
        wheelX: "panX",
        wheelY: "zoomX",
       
        innerRadius: am5.percent(40),
        radius: am5.percent(65),
        startAngle: 270 - 170,
        endAngle: 270 + 170
      }));
      
      
      // Add cursor
      // https://www.amcharts.com/docs/v5/charts/radar-chart/#Cursor
      var cursor = chart.set("cursor", am5radar.RadarCursor.new(root, {
        behavior: "zoomX",
        radius: am5.percent(40),
        innerRadius: -25
      }));
      cursor.lineY.set("visible", false);
      
      
      // Create axes and their renderers
      // https://www.amcharts.com/docs/v5/charts/radar-chart/#Adding_axes
      var xRenderer = am5radar.AxisRendererCircular.new(root, {
        minGridDistance: 10
      });
      
      xRenderer.labels.template.setAll({
        radius: 10,
        textType: "radial",
        fontSize: "25px",
        centerY: am5.p50
      });
      
      var yRenderer = am5radar.AxisRendererRadial.new(root, {
        axisAngle: 90
      });
      
      yRenderer.labels.template.setAll({
        centerX: am5.p50
      });
      
      var categoryAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {
        maxDeviation: 0,
        categoryField: "country",
        
        renderer: xRenderer
      }));
      
      var valueAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
        min: 0,
        max: 4000,
        extraMax: 0.1,
        
        
        renderer: yRenderer
      }));
      
      
      // Create series
      // https://www.amcharts.com/docs/v5/charts/radar-chart/#Adding_series
      var series = chart.series.push(am5radar.RadarColumnSeries.new(root, {
        calculateAggregates: true,
        name: "Series",
        
        xAxis: categoryAxis,
        yAxis: valueAxis,
        valueYField: "value" + currentYear,
        categoryXField: "country",
        tooltip: am5.Tooltip.new(root, {
          labelText: "{categoryX}: {valueY}"
         
          
        })
      }));
      
      series.columns.template.set("strokeOpacity", 0);
      
      
      // Set up heat rules
      // https://www.amcharts.com/docs/v5/concepts/settings/heat-rules/
      series.set("heatRules", [{
        target: series.columns.template,
        key: "fill",
        min: am5.color(0x673AB7),
        max: am5.color(0xF44336),
        
        dataField: "valueY"
        
      }]);
      
      // Add scrollbars
      // https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/
      chart.set("scrollbarX", am5.Scrollbar.new(root, { orientation: "horizontal" }));
      chart.set("scrollbarY", am5.Scrollbar.new(root, { orientation: "vertical" }));
      
      // Add year label
      var yearLabel = chart.radarContainer.children.push(am5.Label.new(root, {
        fontSize: "2em",
        text: currentYear.toString(),
        centerX: am5.p50,
        centerY: am5.p50,
        fill: am5.color(0x673AB7)
      }));
      
      
      // Generate and set data
      // https://www.amcharts.com/docs/v5/charts/radar-chart/#Setting_data
      var data = generateRadarData();
      series.data.setAll(data);
      categoryAxis.data.setAll(data);
      
      series.appear(1000);
      chart.appear(1000, 100);
      
      function generateRadarData() {
        var data = [];
        var i = 0;
        for (var continent in temperatures) {
          var continentData = temperatures[continent];
      
          continentData.forEach(function(country) {
            var rawDataItem = { "country": country[0] }
      
            for (var y = 2; y < country.length; y++) {
              rawDataItem["value" + (startYear + y - 2)] = country[y];
            }
      
            data.push(rawDataItem);
          });
      
          createRange(continent, continentData, i);
          i++;
      
        }
        return data;
      }
      
      
      function createRange(name, continentData, index) {
        var axisRange = categoryAxis.createAxisRange(categoryAxis.makeDataItem({above:true}));
        axisRange.get("label").setAll({ text: name });
        // first country
        axisRange.set("category", continentData[0][0]);
        // last country
        axisRange.set("endCategory", continentData[continentData.length - 1][0]);
      
        // every 3rd color for a bigger contrast
        var fill = axisRange.get("axisFill");
        fill.setAll({
          toggleKey: "active",
          fontSize: "55px",
          cursorOverStyle: "pointer",
          fill: colorSet.getIndex(index * 3),
          visible: true,
          innerRadius: -35
        });
        axisRange.get("grid").set("visible", false);
      
        var label = axisRange.get("label");
        label.setAll({
          fill: am5.color(0xffffff),
          textType: "circular",
          radius: -30
        });
      
        fill.events.on("click", function(event) {
          var dataItem = event.target.dataItem;
          if (event.target.get("active")) {
            categoryAxis.zoom(0, 1);
          }
          else {
            categoryAxis.zoomToCategories(dataItem.get("category"), dataItem.get("endCategory"));
          }
        });
      }
      
      
      // Create controls
      var container = chart.children.push(am5.Container.new(root, {
        y: am5.percent(95),
        centerX: am5.p50,
        x: am5.p50,
        width: am5.percent(80),
        layout: root.horizontalLayout
      }));
      
      var playButton = container.children.push(am5.Button.new(root, {
        themeTags: ["play"],
        centerY: am5.p50,
        marginRight: 15,
        icon: am5.Graphics.new(root, {
          themeTags: ["icon"]
        })
      }));
      
      playButton.events.on("click", function () {
        if (playButton.get("active")) {
          slider.set("start", slider.get("start") + 0.0001);
        }
        else {
          slider.animate({
            key: "start",
            to: 1,
            duration: 15000 * (1 - slider.get("start"))
          });
        }
      })
      
      var slider = container.children.push(am5.Slider.new(root, {
        orientation: "horizontal",
        start: 0.5,
        centerY: am5.p50
      }));
      
      slider.on("start", function (start) {
        if (start === 1) {
          playButton.set("active", false);
        }
      });
      
      slider.events.on("rangechanged", function () {
        updateRadarData(startYear + Math.round(slider.get("start", 0) * (endYear - startYear)));
      });
      
      function updateRadarData(year) {
        if (currentYear != year) {
          currentYear = year;
          yearLabel.set("text", currentYear.toString());
          am5.array.each(series.dataItems, function (dataItem) {
            var newValue = dataItem.dataContext["value" + year];
            dataItem.set("valueY", newValue);
            dataItem.animate({ key: "valueYWorking", to: newValue, duration: 500 });
          });
        }
      }
      
      }); // end am5.ready()
      
      
      
           }
      
      
      
           
      
              if(table_HTML_à_afficher === "TABLE_composition_substances"){
      
            if (FILTRE_SUBSTANCE){
              if (FILTRE_SUBSTANCE === "neutre"){
                
                // document.getElementsByClassName('Section_Composition').style.display = "none" activer apres // 
}
      
              Afficher_nom_substance_selectionnée = document.getElementById("CompositionS")
              Afficher_nom_substance_selectionnée.innerHTML =  `<h2 class = titre_section id = "CompositionS"> --- Composition : <strong style = " font-size: 40px; color :  hsl(212, 65%, 63%)"> ${FILTRE_SUBSTANCE}</strong> --- </h2>
      `
      
              //  console.log("Données pour le diagramme : ",  Diagramme_compo)
              //  console.log("grand collecteur", Grand_collecteur_criteres["1-Acetoxyethylene"])
              //  console.log("test", Collecteur_figure1_MC.ListeNom[0])
              
      
      
      am4core.ready(function() {
      
      // Themes begin
      am4core.useTheme(am4themes_animated);
      // Themes end
      
      var chart = am4core.create("chartdiv", am4charts.PieChart3D);
      chart.hiddenState.properties.opacity = 0; // this creates initial fade-in
      
      chart.legend = new am4charts.Legend();
      console.log('entré DG ', Diagramme_compo[2])
      
      chart.data =  Diagramme_compo;
      
      var series = chart.series.push(new am4charts.PieSeries3D());
      series.dataFields.value = "Valeur moyenne";
      series.dataFields.category = "Nom";
      
      }); // end am4core.ready()
      
      
      
      
            }
      
       
              }
      
                AjouterLigneTable()
      
      
             
    
    
      
             
      
      
      
      
      
      
      
                 // Figure 3
           if(table_HTML_à_afficher === "TABLE_composition_substances"){
            if ( FILTRE_SUBSTANCE ){
      
              if(Grand_collecteur_criteres){console.log("Données pour le diagramme : ",  Diagramme_compo[0])
           
       
      
        Choix_CrietreUtilisateur_D = 'CVAA'
      
        if (Mode_Analyse.choix_paramètreTD){ Choix_CrietreUtilisateur_D = Mode_Analyse.choix_paramètreTD}
      
        //console.log("est ici", Mode_Analyse, Grand_collecteur_criteres["Cuivre"]["Cuivre"][Choix_CrietreUtilisateur_D],  Collecteur_figure1_MC.ListeNom[ Collecteur_figure1_MC.ListeNom[0]]);
      
        Série_criteres = []
        Collecteur_figure1_MC.ListeNom.forEach(nomCOMPO =>{
           C = 0
      
           if(Grand_collecteur_criteres[nomCOMPO][nomCOMPO][Choix_CrietreUtilisateur_D]){}
          Série_criteres.push(Grand_collecteur_criteres[nomCOMPO][nomCOMPO][Choix_CrietreUtilisateur_D])
      
      
      
        })
      
      
      }
            }
      
           }
      
           if(table_HTML_à_afficher === "TABLE_composition_substances"){
            if ( FILTRE_SUBSTANCE ){
      
           let chartConfig = {
        type: 'area',
        globals: {
          fontFamily: 'Roboto',
        },
        backgroundColor: '#fff',
        title: {
          text: '',
          adjustLayout: true,
          backgroundColor: 'none',
          fontColor: '#05636c',
          fontSize: '24px',
          height: '25px',
          y: '15px',
        },
        plot: {
          tooltip: {
            text: 'concentration %t de %v mg/L  pour le composé : %data-days',
            borderRadius: '5px',
            fontFamily: 'Roboto',
            fontSize: '15px',
            padding: '10px',
            textAlign: 'left',
          },
          lineWidth: '2px',
          marker: {
            size: '1px',
            visible: false,
          },
        },
        plotarea: {
          adjustLayout: true,
          marginBottom: 'dynamic',
          marginLeft: 'dynamic',
          marginRight: 'dynamic',
          marginTop: '15%',
        },
        scaleX: {
          guide: {
            lineWidth: '0px',
          },
          item: {
            fontColor: '#05636c',
            textAlign: 'center',
          },
          itemsOverlap: true,
          label: {
            text: 'Composés chimiques',
            fontSize: '20px',
            fontWeight: 'normal',
            offsetX: '10%',
          },
          labels:  Collecteur_figure1_MC.ListeNom,
          maxItems: 12,
          fontSize: '14px',
          maxLabels: 12,
          tick: {
            lineWidth: '2px',
          },
          zooming: true,
        },
        scaleY: {
          values: '0:5:0.5',
          guide: {
            alpha: 0.2,
            lineStyle: 'dashed',
            lineWidth: '0px',
          },
          item: {
            fontColor: '#05636c',
            fontWeight: 'normal',
          },
          label: {
            text: 'Concentration (mg/L)',
            fontSize: '20px',
          },
        },
        crosshairX: {
          lineColor: '#898989',
          lineStyle: 'dashed',
          lineWidth: '1px',
          marker: {
            size: '25px',
            visible: true,
          },
          plotLabel: {
            visible: false,
          },
        },
        labels: [
          {
            text: 'MAX: %plot-2-value',
            bold: false,
            color: '#8da0cb',
            defaultValue: '',
            fontSize: '14px',
            fontWeight: 'bold',
            textAlign: 'left',
            width: '120px',
            x: '20%',
            y: '50px',
          },
          {
            text: 'MOY: %plot-1-value',
            bold: false,
            color: '#66c2a5',
            defaultValue: '',
            fontSize: '14px',
            fontWeight: 'bold',
            textAlign: 'left',
            width: '120px',
            x: '45%',
            y: '50px',
          },
          {
            text: ` ${Choix_CrietreUtilisateur_D}: %plot-0-value`,
            bold: false,
            color: '#fc8d62',
            defaultValue: '',
            fontSize: '14px',
            fontWeight: 'bold',
            textAlign: 'left',
            width: '120px',
            x: '70%',
            y: '50px',
          },
        ],
        series: [
          {
            text: Choix_CrietreUtilisateur_D,
            values: Série_criteres,
            alphaArea: '.3',
            aspect: 'spline',
            backgroundColor: '#fc8d62',
            dataDays:  Collecteur_figure1_MC.ListeNom,
            fontFamily: 'Roboto',
            fontSize: '25px',
            lineColor: '#fc8d62',
          },
          {
            text: 'MOY',
            values: Collecteur_figure1_MC.ListeMOY,
            alphaArea: '.3',
            aspect: 'spline',
            backgroundColor: '#66c2a5',
            dataDays:  Collecteur_figure1_MC.ListeNom,
            fontFamily: 'Roboto',
            fontSize: '25px',
            lineColor: '#66c2a5',
          },
          {
            text: 'MAX',
            values:Collecteur_figure1_MC.ListeMAX,
            alphaArea: '0.2',
            aspect: 'spline',
            backgroundColor: '#8da0cb',
            dataDays:  Collecteur_figure1_MC.ListeNom,
            fontFamily: 'Roboto',
            fontSize: '25px',
            lineColor: '#8da0cb',
          },
        ],
        utc: true,
      };
      

        //En l'absence de connexion internet, block le reste du code (modification, suppression etc)
      zingchart.render({
        id: 'myChart',
        data: chartConfig,
        height: '60%',
        width: '100%',
        zoom :'40%'
      });
      
      } } 


   //cons

      
     
      


       console.log("Construction du graphique",Grand_collecteur_criteres)

       DATAVAFe = []
       DATACVAA = []
       DATACVAC = []

       DATA_min = []
       DATA_moy = []
       DATA_max = []

       if(FILTRE_SUBSTANCE !== "X"){


       Array.from(Array(Collecteur_AVIS.DonnéesAVIS.length), (item, index)=>([
            index + 1,
            Collecteur_AVIS.DonnéesAVIS[index][1],
            "mg/L",
            Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['CVAC'],
            Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['CVAA'],
            Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['VAFe'],
            Collecteur_AVIS.DonnéesAVIS[index][3],
            Collecteur_AVIS.DonnéesAVIS[index][4],
            Collecteur_AVIS.DonnéesAVIS[index][5],

            DATAVAFe.push( { x:  Collecteur_AVIS.DonnéesAVIS[index][1], y:  Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['VAFe']}),
            DATACVAA.push( { x:  Collecteur_AVIS.DonnéesAVIS[index][1], y:   Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['CVAA']}),
            DATACVAC.push( { x:  Collecteur_AVIS.DonnéesAVIS[index][1], y:  Grand_collecteur_criteres[Collecteur_AVIS.DonnéesAVIS[index][1]][Collecteur_AVIS.DonnéesAVIS[index][1]]['CVAC']}),

            DATA_min.push( { x:  Collecteur_AVIS.DonnéesAVIS[index][1], y:  Collecteur_AVIS.DonnéesAVIS[index][3]}),
            DATA_moy.push( { x:  Collecteur_AVIS.DonnéesAVIS[index][1], y:   Collecteur_AVIS.DonnéesAVIS[index][4]}),
            DATA_max.push( { x:  Collecteur_AVIS.DonnéesAVIS[index][1], y:  Collecteur_AVIS.DonnéesAVIS[index][5]}),
     
            console.log("Construction du graphique",   Collecteur_AVIS.DonnéesAVIS[index][1], Collecteur_AVIS.DonnéesAVIS[index][3],  Collecteur_AVIS.DonnéesAVIS[index][4],  DATAVAFe ),
           
        ]))


        const config = { 
            type: 'scatter', 
            data: { 
                datasets: [{ 
                    label: 'VAFe', 
                    data: DATAVAFe, 
                    backgroundColor: 'rgb(240, 66, 29)', 
                }, { 
                    label: 'CVAA', 
                    data: DATACVAA, 
                    backgroundColor: 'rgb(255, 139, 0)', 
                },
                { 
                    label: 'CVAC', 
                    data: DATACVAC , 
                    backgroundColor: 'rgb(255, 215, 51)', 
                },
                { 
                    label: 'MIN', 
                    data:  DATA_min , 
                    backgroundColor: 'rgb(203, 203, 203)', 
                },
                { 
                    label: 'MOY', 
                    data: DATA_moy , 
                    backgroundColor: 'rgb(137, 137, 137 )', 
                },
                { 
                    label: 'MAX', 
                    data:  DATA_max , 
                    backgroundColor: 'rgb(68, 68, 68)', 
                },
              
              
              
              
              ], 
                
                
                
            }, 
            options: { 
                scales: { 
                    x: { 
                        type: 'category', 
                        position: 'bottom', 
                        title: { 
                            display: true, 
                            text: 'Composé chimique', 
                        }, 
                    }, 
                    y: { 
                        type: 'linear', 
                        position: 'left', 
                        title: { 
                            display: true, 
                            text: 'mg/L', 
                        }, 
                    }, 
                  
                }, 
                elements: { 
                    point: { 
                        radius: 9, 
                        hoverRadius: 20, 
                    }, 
                }, 
                plugins: { 
                    title: { 
                        display: true, 
                        text: FILTRE_SUBSTANCE, 
                    }, 
                }, 
            }, 
        }; 
        const ctx2 = document.getElementById( 
            'coursesChart').getContext('2d'); 
          var  Graphique  = Chart.getChart("coursesChart")
           if ( Graphique ){
            Graphique.destroy()
           }

      
       Graphique  = new Chart(ctx2, config); 
        
        
      // Figure 3

    }
      
               
              //--------Construction du corps des formulaires pour la modification, la supression et l'ajout de données----- //
      
      
              formulaire_table_modifier =  "formulaire_table_modifier" + "_" + table_HTML_à_afficher
              boutons_formulaire_modifier =   "boutons_formulaire_modifier" + "_" + table_HTML_à_afficher
              input_modifier = "input_modifier" + "_" + table_HTML_à_afficher
      
              formulaire_table_supprimer = "formulaire_table_supprimer" + "_" + table_HTML_à_afficher
              boutons_formulaire_supprimer = "boutons_formulaire_supprimer" + "_" + table_HTML_à_afficher
              input_supprimer = "input_supprimer" + "_" + table_HTML_à_afficher
      
              formulaire_table_ajouter = "formulaire_table_ajouter" + "_" + table_HTML_à_afficher
              boutons_formulaire_ajouter = "boutons_formulaire_ajouter" + "_" + table_HTML_à_afficher
              input_ajouter = "input_ajouter" + "_" + table_HTML_à_afficher
      
      
              function  créer_corp_du_formulaire(class_corp, class_boutons, clase_input){
      
                 //----
              formulaire =  document.createElement('div')
              formulaire.className = class_corp
              formulaire.style.display = "none"
                //----
      
           
      
              formulaire = document.getElementsByClassName(class_corp)
              //console.log(formulaire[0])
              //----formulaire = formulaire_test
              //----consoel.log("dfg", formulaire)
      
              formulaire[0].innerHTML = `<form id = "Modificationformulaire" class = "titre_formulaire" > <h1>  Ajouter une nouvelle ligne de données </h1><div> </div>
              <button href = "♯" class = ${class_boutons} type = "button" id = "bouton_modifier_formulaire"> Confirmer </button> <button  type = "button"  class = ${class_boutons}  id = "bouton_annuler_formulaire"> Annuler </button> </form>`
               
              formulaire_insertion = formulaire[0].children[0].children[1]
      
              a = 0
              
              if  (class_corp !== formulaire_table_supprimer) { Données.variables.forEach(colonne =>{
      
              let input_label = document.createElement('div')
              input_label.innerHTML = `<label style = "font-size : 35px" for =  ${colonne} > ${colonne} : </label>
                  <input   ref= {titleRef} required type = "text" class =  ${clase_input}  id =  ${colonne + table_HTML_à_afficher}  name = "ID_de_la_ligne_à_modifier" > <br>
                  <h2></h2>`
               if (colonne[0] === "catégorie" || colonne[0] === "nom_fr" || colonne[0] === "nom_en" || colonne[0] === "cas" || colonne[0] === "symbole_formule" || colonne[0] === "mots_clés" ){input_label.style.display = "none"}
               
               if(table_HTML_à_afficher === "TABLE_composition_substances" || table_HTML_à_afficher === "TABLE_Propriete_physique_et_chimique_substance" || table_HTML_à_afficher === "TABLE_ecotox_substances_organismes_aquatiques" || table_HTML_à_afficher === "TABLE_ecotox_substances_organisme_terrestre"){  if (colonne[0] === "nom_substance"){input_label.style.display = "none"}}
              
              
               formulaire_insertion.appendChild(input_label)
              
               a = a + 1 }
                 
            )}}
      
      
              créer_corp_du_formulaire(formulaire_table_modifier,boutons_formulaire_modifier, input_modifier)
              créer_corp_du_formulaire(formulaire_table_supprimer,boutons_formulaire_supprimer, input_supprimer)
              créer_corp_du_formulaire(formulaire_table_ajouter, boutons_formulaire_ajouter, input_ajouter)
      
            
             //-------- IMPORTATION AUTO FIN//-------- IMPORTATION AUTO FIN//-------- IMPORTATION AUTO FIN//-------- IMPORTATION AUTO FIN//-------- IMPORTATION AUTO FIN
      
      
              //-------- Boutons annuler du formulaire de modification 
      
      
              function  boutons_annuler(class_corp, class_bouton_annuler){
              
              const bouton_annuler_formulaire = document.getElementsByClassName(class_bouton_annuler)[1]
               bouton_annuler_formulaire.addEventListener("click", () => 
             {
               console.log("données à afficher", données_affichées_formulaire)
               formulaire = document.getElementsByClassName(class_corp)
               formulaire[0].style.display = "none";
               Formulaire_actuel.état = "fermé"
                           }) }
      
      
              boutons_annuler(formulaire_table_modifier,boutons_formulaire_modifier)
              boutons_annuler(formulaire_table_supprimer,boutons_formulaire_supprimer)
              boutons_annuler(formulaire_table_ajouter,boutons_formulaire_ajouter)
              
              //-------- Boutons confirmer du formulaire de modification et ses nodes clones pour éviter la répétition des événements
      
              const bouton_confirmer_formulaire_ajouter =  document.getElementsByClassName(boutons_formulaire_ajouter)[0].cloneNode(true)
              const bouton_confirmer_formulaire_supprime = document.getElementsByClassName(boutons_formulaire_supprimer)[0].cloneNode(true)
              const bouton_confirmer_formulaire_modifie = document.getElementsByClassName(boutons_formulaire_modifier)[0].cloneNode(true)
                
      
              formulaire = document.getElementsByClassName(formulaire_table_ajouter)
                  formulaire[0].style.display = "none" 
                  Liste_des_inputs =  document.getElementsByClassName(input_ajouter)
      
      
              // Couplage des boutons confirmer à leur événement respectif
           
              bouton_confirmer_formulaire_supprime.addEventListener("click", () => { le_bouton_confirmer_supprime()})
              bouton_confirmer_formulaire_modifie.addEventListener("click", () => { le_bouton_confirmer_modifie() })
              bouton_confirmer_formulaire_ajouter.addEventListener("click", () => {
      
              formulaire_erreur = document.getElementsByClassName("formulaire-Erreur")[0]
              corp_formulaire_erreur = document.getElementById("corp_formulaire_erreur")
              Vérification_créer = 'OK'
                          
                            sortie = {}
                  for ( let i = 0;  i <= Liste_des_inputs.length - 1 ; i ++){
                            
                          
                            Liste_des_inputs =  document.getElementsByClassName(input_ajouter)
                            var paramètre = Liste_des_inputs[i].id
                            var valeur = Liste_des_inputs[i].value
                          
                             
                            sortie[paramètre] = valeur

                            //sortie.paramètre = valeur

                            console.log(paramètre, valeur )

                          // Vérifier les inputs avant l'opération ----------D

                 
                 // if( paramètre.includes("unité_valeur") === true ||  paramètre.includes("unité") === true){

                   //if(valeur !== "mg/L" && valeur !== "mg/kg" ){
                    // Vérification_créer = "NON"
                      // let erreur_unitéc = document.createElement('p') 
                      // erreur_unitéc.innerHTML =`Pour faciliter les calcules, l'outil est restreint à deux unités : mg/L et mg/kg. De plus, l'unité doit être indiquée. `
                     //corp_formulaire_erreur.appendChild(erreur_unitéc)

                   // }


               //   }

                  // if([colonne][0] === "unité_durée"){}
                  // if([colonne][0] === "groupe_organisme"){}
                 

                 if(paramètre.includes("valeur_min") === true  || paramètre.includes("valeur_max") === true ||  paramètre.includes("valeur_moy") === true|| paramètre.includes( "durée_exposition") === true){
                 
                     if(valeur !== ""){
           
                   if (isNaN(valeur ) ) {
                    Vérification_créer = "NON"
                       let erreur_valeurs_inputsc = document.createElement('p') 
                       erreur_valeurs_inputsc.innerHTML =`Cette valeur doit être numérique et strictement positive. Les nombres décimaux doivent être écrits avec des points (19.5) et non des virgules (19,5). De plus, attention aux espaces`
                       corp_formulaire_erreur.appendChild(erreur_valeurs_inputsc)
                           }
                               }
                                  }

                
              if(valeur.includes("--") === true || valeur.includes("-- #") === true ){

                        Vérification_créer = "NON"
                      let erreur_caractèresc = document.createElement('p') 
                      erreur_caractèresc.innerHTML =`Veuillez éviter d'insérer les caractères suivants : --, --', -- #,#, delete from, delete`

                    corp_formulaire_erreur.appendChild(erreur_caractèresc)

                 }

               
                 // Vérifier les inputs avant l'opération ----------F
                            
                           
                          
                            
                          }
                        
                        
                        
                        
                        if ( Vérification_créer === 'OK'){
                          formulaire = document.getElementsByClassName(formulaire_table_ajouter)
                          formulaire[0].style.display = "none"
                          Formulaire_actuel.état = "fermé" 
                         
                         
                         
                          sortie["mots_clés"+ table_HTML_à_afficher] = Utilisateur.description
                          sortie["nom_fr"+ table_HTML_à_afficher] = Utilisateur.nom
                          sortie["nom_en"+ table_HTML_à_afficher] = Utilisateur.nom_En 
                          sortie["cas"+ table_HTML_à_afficher] = Utilisateur.cas
                          sortie["symbole_formule"+ table_HTML_à_afficher] = Utilisateur.symbole
                          sortie["catégorie"+ table_HTML_à_afficher] = Utilisateur.type
                          
                          if( table_HTML_à_afficher === "TABLE_composition_substances" || table_HTML_à_afficher === "TABLE_Propriete_physique_et_chimique_substance" || table_HTML_à_afficher === "TABLE_ecotox_substances_organismes_aquatiques" || table_HTML_à_afficher === "TABLE_ecotox_substances_organisme_terrestre"){
                            sortie["nom_substance"+ table_HTML_à_afficher] = Utilisateur.choix_substance
      
                          }
      
      
                          createTodos(table_SQL,table_HTML_à_afficher, sortie)
                         
                          console.log('Nouvel objet AP', sortie)
                        }
                        else {formulaire_erreur.style.display = "inline"}
                          
                      
                      } 
                      
                    )
                     
      
              données_affichées_formulaire = {}
      
              // Envoyer les données à supprimer
              // function le_bouton_confirmer_ajoute(){console.log("ajoute"),  createTodos("table_35")}
      
               // Envoyer les données à supprimer sous forme d'objet
              function le_bouton_confirmer_supprime(){
      
               objet_à_supprimer = données_affichées_formulaire.data
               Données.variables.forEach(colonne =>{
            
                console.log('Données à supprimer : ', objet_à_supprimer[colonne] )
               })

               console.log("Tentative de suppression")
               console.log("L'objet à supprimer est :", objet_à_supprimer)
               formulaire = document.getElementsByClassName(formulaire_table_supprimer)
                 formulaire[0].style.display = "none" 
                 Formulaire_actuel.état = "fermé" 

                deleteTodos(table_SQL, table_HTML_à_afficher, objet_à_supprimer)
               }
      
               // Envoyer les données à modifier sous forme d'objet
      
              function le_bouton_confirmer_modifie(){

                vérification_modification = "OK"
                formulaire_erreur = document.getElementsByClassName("formulaire-Erreur")[0]
                corp_formulaire_erreur = document.getElementById("corp_formulaire_erreur")

                console.log("MODIFICATION EN COURS")

      
                 // Ancient objet à modifier
                 ancien_objet = données_affichées_formulaire.data
      
                 // Nouvel objet à intégrer
                 nouvel_objet = {}
                 Données.variables.forEach(colonne =>{  
                 input = document.getElementById(colonne + table_HTML_à_afficher)
                 nouvel_objet[colonne] = input.value
                


                 // Vérifier les inputs avant l'opération ----------D

                 
                 if(colonne[0] === "catégorie"){
                   if(input.value !== "Mélange complexe" && input.value !== "Composé" ){
                      vérification_modification = "NON"
                      let erreur_catégorie = document.createElement('p') 
                      erreur_catégorie.innerHTML =`Les deux seules valeurs possibles pour la colonne des catégories sont :  Mélange complexe et Composé`
                    corp_formulaire_erreur.appendChild(erreur_catégorie)


                   }

                 }
                 if(colonne[0] === "unité_valeur"  || colonne[0] === "unité"){

                  if(input.value !== "mg/L" && input.value !== "mg/kg" ){
                      vérification_modification = "NON"
                      let erreur_unité = document.createElement('p') 
                      erreur_unité.innerHTML =`Pour faciliter les calcules, l'outil est restreint à deux unités : mg/L (liquides) et mg/kg (solides)`
                    corp_formulaire_erreur.appendChild(erreur_unité)

                   }


                 }

                  // if([colonne][0] === "unité_durée"){}
                  // if([colonne][0] === "groupe_organisme"){}
                 

                 if(colonne[0] === "valeur_min" || colonne[0] === "valeur_max" || colonne[0] === "valeur_moy"|| colonne[0] === "durée_exposition"){
                 
                     if(input.value !== ""){
           
                   if (isNaN(input.value ) ) {
                     vérification_modification = "NON"
                       let erreur_valeurs_inputs = document.createElement('p') 
                       erreur_valeurs_inputs.innerHTML =`Cette valeur doit être numérique et strictement positive. Les nombres décimaux doivent être écrits avec des points (19.5) et non des virgules (19,5). De plus, attention aux espaces`
                       corp_formulaire_erreur.appendChild(erreur_valeurs_inputs)
                           }
                               }
                                  }

                //-----  Permet à l'utilisateur d'entrer des apostrophes, sans générer des erreurs dans la base de donnée postgreSQL

                 if(input.value.includes("'") === true){

                  console.log('Attention apostrophe : ', input.value )
                   
                  
                  input.value = input.value.replaceAll("'", "''")
                  nouvel_objet[colonne] =  input.value
                 
                 
                  console.log('Remplacement apostrophe : ',  nouvel_objet[colonne].replaceAll("'", "''"));

                 }
                 
                 if (isNaN(ancien_objet[colonne]) &&  ancien_objet[colonne].includes("'") === true ) { 
                      
                      ancien_objet[colonne] = ancien_objet[colonne].replaceAll("'", "''")
                      console.log('Ancient objet ICI', ancien_objet[colonne])
                    
                    }           
                
               //------
             
                 if(input.value.includes("--") === true || input.value.includes("-- #") === true || input.value.includes("ABCerreur") === true ){

                vérification_modification = "NON"
                      let erreur_caractères = document.createElement('p') 
                      erreur_caractères.innerHTML =`Veuillez éviter d'insérer les caractères suivants : --, --',',  -- #,#, delete from, delete`

                    corp_formulaire_erreur.appendChild(erreur_caractères)

                 }

                 // Vérifier les inputs avant l'opération ----------F

                 } )

                  if(vérification_modification === "OK"){
                    console.log("Tentative de modification")
                 console.log("L'ancient objet est :", ancien_objet)
                 console.log('Le nouvel objet est :', nouvel_objet)
                  
                 formulaire = document.getElementsByClassName(formulaire_table_modifier)
                
                 Formulaire_actuel.état = "fermé" 
                 formulaire[0].style.display = "none" 
                
                 updateTodos(table_SQL,table_HTML_à_afficher, ancien_objet, nouvel_objet) 
                  }

                else {formulaire_erreur.style.display = "inline"}
             
               
              
              }
      
                  
              
              //--------------------- TOUS LES BOUTONS SUPPRIMER DU TABLEAU
      
                  function tous_les_bouton_supprimer(){
                     
                  const Boutons_supprimer = document.getElementsByClassName(bouton_supprimer)
              
              
                   for ( let i = 0;  i <= Boutons_supprimer.length; i ++){
                   const Boutons_supprimer = document.getElementsByClassName(bouton_supprimer)
                      button =  document.getElementsByClassName(bouton_supprimer)[i]
                      if (button) {
                     button.addEventListener("click", () => {
             
                     //Evenement pour ouvrir le formulaire pour chaques boutons modifier
                     formulaire = document.getElementsByClassName(formulaire_table_supprimer)
                     if (Formulaire_actuel.état !== "ouvert") {
                     formulaire[0].style.display = "inline";
                     Formulaire_actuel.état = "ouvert" 
                    
                      //Récupération des données de la ligne sélectionnée  pour chaques boutons supprimer
                     button =  document.getElementsByClassName(bouton_modifier)[i]
                     if (i <= Données.nombre_de_lignes - 1){ données_associées =  Utilisateur[table_HTML_à_afficher][i]}
                 
      
      
      
      
                     données_affichées_formulaire.data = données_associées
                      data = button.getAttribute("id")
                     console.log('ID du boutons est :', data)
                     console.log('données associées:',  données_associées)
      
                      //Mofication titre du formulaire
                     titre_formulaire = formulaire[0].children[0].children[0]
                     titre_formulaire.innerHTML =`<p style = "font-size : 45px" : > Supprimer la <strong style = " color :  hsl(212, 65%, 63%)" > ligne numéro ${data} </strong></p>`
                     
                      //Chargement automatique des inputs du formulaire
                    
                      Données.variables.forEach(colonne =>{  
                     input = document.getElementById(colonne + table_HTML_à_afficher)
                     if (i <= Données.nombre_de_lignes - 1){ input.value =  Utilisateur[table_HTML_à_afficher][i][colonne]}
                   
                  
                     } )
      
                     
                     bouton_confirmer_formulaire = document.getElementsByClassName(boutons_formulaire_supprimer)[0]
                     bouton_confirmer_formulaire.parentNode.replaceChild(bouton_confirmer_formulaire_supprime, bouton_confirmer_formulaire);
                  
                    
                    }} )};
               
                  
               
                  }     //--- FIN EVEN 
      
               
               
               
               //-----------------------TOUS LES BOUTONS MODIFIER  
                  }
                 
      
                  compteur = {}
                  compteur.nbr = 0
                 
                  function tous_les_bouton_modifier(){ 
                  //-------- : Ouvrir le formulaire avec les liens "modifier" du tableau
      
                  const Boutons_modifier = document.getElementsByClassName(bouton_modifier)
                  
                  
                  
                  for ( let i = 0;  i <= Boutons_modifier.length - 1; i ++){
                         
              
                   
                   
                    button =  Boutons_modifier[i]
                 
                    if (button) {
                  
                    button.addEventListener("click", () => {
                    //Evenement pour ouvrir le formulaire pour chaques boutons modifier   if (id_tableau === Données.nombre_de_lignes){ id_tableau = -1}
      
                    //E id_tableau = id_tableau + 1 if (id_tableau === Données.nombre_de_lignes){ id_tableau = -1}
                    
                   formulaire = document.getElementsByClassName(formulaire_table_modifier)
      
                   if (Formulaire_actuel.état !== "ouvert") {
                     formulaire[0].style.display = "inline";
                     Formulaire_actuel.état = "ouvert"
      
                    //Récupération des données de la ligne sélectionnée  pour chaques boutons modifier  floor(i/ Données.nombre_de_lignes Données.nombre_de_lignes*(Math.floor(i/ Données.nombre_de_lignes))
                    button =  document.getElementsByClassName(bouton_modifier)[i]
      
                    if (i <= Données.nombre_de_lignes - 1){ données_associées = Utilisateur[table_HTML_à_afficher][i]}
                 
                  
                 // console.log('DONNE ASS: ',données_associées )
      
                données_affichées_formulaire.data = données_associées
                const data = button.getAttribute("id")
                //console.log(" Table : ", table_HTML_à_afficher, formulaire[0].innerHTML)
                 console.log('ID du boutons est :', data)
                  console.log('données associées:',  données_associées)
                 
      
                      //Mofication titre du formulaire
                 titre_formulaire = formulaire[0].children[0].children[0]
                 titre_formulaire.innerHTML =`<p style = "font-size : 62px"> Modifier la <strong style = "color :  hsl(212, 65%, 63%)" > ligne numéro ${data} </strong> </p>`
      
                        //Chargement automatique des inputs du formulaire
                        
                      Données.variables.forEach(colonne =>{ 
      
                        
                      
                   input = document.getElementById(colonne + table_HTML_à_afficher)
                   
                   if (i <= Données.nombre_de_lignes - 1){ input.value = Utilisateur[table_HTML_à_afficher][i][colonne]}
                  
                   
      
                
                                                         } )
      
      
      const bouton_confirmer_formulaire = document.getElementsByClassName(boutons_formulaire_modifier)[0]
      
      bouton_confirmer_formulaire.parentNode.replaceChild(bouton_confirmer_formulaire_modifie, bouton_confirmer_formulaire);
      
      
      }} )};
      }
      }                 
                     
                      
                      if(table_HTML_à_afficher !== "TABLE_criteres_de_qualite_eaux")
                           {    tous_les_bouton_modifier()
                            tous_les_bouton_supprimer()   }
                  
      
      
                      //--- AJOUTER UNE NOUVELLE LIGNE DE DONNEES (AJOUTER EVENEMENT AU BOUTON)
      
                      const bouton_ajouter_menu = document.getElementById(Ajouter_une_ligne_de_données)
                      bouton_ajouter_menu.addEventListener("click", () => 
                      {
      
                      console.log(Utilisateur[table_HTML_à_afficher])
                      formulaire = document.getElementsByClassName(formulaire_table_ajouter)
                      if (Formulaire_actuel.état !== "ouvert"){
                      formulaire[0].style.display = "inline" 
                      Formulaire_actuel.état = "ouvert"
      
                    
                      bouton_confirmer_formulaire = document.getElementsByClassName(boutons_formulaire_ajouter)[0]
                      bouton_confirmer_formulaire.parentNode.replaceChild(bouton_confirmer_formulaire_ajouter, bouton_confirmer_formulaire);}
                     
                     
      })
               
      
      
              
           })
      
      
      
             
      
      
      
      
      
      
      
      
      
      }
      catch (e) {
          console.log("Une erreur est survenue dans la lecture de la base de données.")
      
      } } 
       //-------- CREER ----------------------------------------------------- //


         //------Servent à éviter la répétition de certaines fonctions comme la génération des formulaires
      
       Limiteur = 1
       Limiteur2 = 1

        //------------------
       
       function readTodosRechercher(table_SQL, table_HTML_à_afficher, FILTRE) {
      
      try{
         
          fetch("https://outil-ecotox-repository-api2.onrender.com/" + table_SQL)
           .then((response) => response.json())
           .then((tableau)=> {
      
              console.log("readtodosRechercher, Ouvrir la table SQL : ", table_SQL)
              console.log("readtodosRechercher, Ouvrir la table  HTML : ", table_HTML_à_afficher)
      
      
      
              //-------------------------------------------------------------------------------------------------------- //
              //----------Filtration des données en fonction du choix de l'utilisateur ----------------------------- //
              //-------------------------------------------------------------------------------------------------------- //
                
      
              if (table_HTML_à_afficher !== "TABLE_Liste_substances" ){
      
                 tableau_données_filtrées = []
      
             
      
                 tableau.forEach(lignes_tb =>{
      
                  if (Ne_pas_filtrer.état === "OFF"){
      
                  CAS__identifié = "FAUX"
                  if(lignes_tb.cas === FILTRE[1][1] ){  CAS__identifié = "VRAI"}
      
                  if(lignes_tb.cas !== "" & FILTRE[1][1] !== "" ){ 
                       CAS__identifié = "FAUX"
                    if(lignes_tb.cas.includes(FILTRE[1][1] ) === true){ CAS__identifié = "VRAI"}
                  if(FILTRE[1][1].includes(lignes_tb.cas) === true){ CAS__identifié = "VRAI"}}
                 
      
                  if (FILTRE[2][1] === "" || FILTRE[2][1] === " " ){
                  if (lignes_tb.nom_fr === FILTRE[0][1] || CAS__identifié === "VRAI" & lignes_tb.nom_fr !== "x" ){ tableau_données_filtrées.push(lignes_tb)}
                 }
                 else if (lignes_tb.nom_fr === FILTRE[0][1] ||  CAS__identifié === "VRAI" || lignes_tb.mots_clés.includes(FILTRE[2][1] ) === true & lignes_tb.nom_fr !== "x"){tableau_données_filtrées.push(lignes_tb)}}
      
                 if (Ne_pas_filtrer.état === "ON" & lignes_tb.nom_fr !== "x" ){ 
                  tableau_données_filtrées.push(lignes_tb)}
       
              })
      
          
      
      
              if (tableau_données_filtrées.length === 0 ) {tableau_données_filtrées = [tableau[0]] }
      
              }
      
      
              //---------- Ranger les données par ordre de grandeur, ordre alphabétique etc.... --------------------------- //-
      
      
              //----------Pagination des données--------------------------- //-
              //------------------------------------------------------ // class = boutons_pages
             
              
      
              if (table_HTML_à_afficher !== "TABLE_Liste_substances"){
               
      
              nombre_max_de_lignes_affichés = 100
      
              nombre_de_pages = ((tableau_données_filtrées.length)/ nombre_max_de_lignes_affichés)
              
              nombre_de_pages = Math.ceil(nombre_de_pages)
              Liste_des_pages = {}
              
      
              for(let page = 1; page <=  nombre_de_pages ; page ++) 
              {
                borne_sup = page * nombre_max_de_lignes_affichés
                borne_inf = borne_sup - nombre_max_de_lignes_affichés
                Liste_des_pages[page] = [ borne_inf , borne_sup ]
      
                if (Limiteur <=  nombre_de_pages){  zone_pages_liste_générale = document.getElementsByClassName("pagination_Liste_generale")[0]
      
               
                let boutons_page = document.createElement('div') 
                boutons_page.innerHTML =
                 `<button style = "color:  hsl(212, 65%, 63%)" href = "♯" type = "button" class="btn bg-light mb-0 text-end" id = ${page}> <strong> ${page} </strong> </button >`
                  zone_pages_liste_générale.appendChild(boutons_page)
      
              
                  Bouton_Page = document.getElementById(page)
                  Bouton_Page.addEventListener("click", () => {console.log("Selection des pages suivantes : ",   Liste_des_pages[page] )
                        
                                readTodosRechercher(table_SQL, table_HTML_à_afficher, FILTRE)
                                Page_utilisateur.défaut = page
                              
      
                  } )
                  Limiteur = Limiteur + 1
                }
      
              
      
              }
      
              
              
          
              
              
              Page_selectionnée_finale = Page_utilisateur.défaut  //- CHOIX DE LA PAGE ICI 
              if ( Liste_des_pages[Page_selectionnée_finale]){ 
                
                Borne_inf = Liste_des_pages[Page_selectionnée_finale][0]
                Borne_sup = Liste_des_pages[Page_selectionnée_finale][1]
              
      
              
              }
             
      
               
      
              compteur_simple = 0
              données_pages_à_afficher = []
              console.log('état des données : ',  tableau_données_filtrées,  'état des bornes  : ',Borne_inf,Borne_sup )
      
              tableau_données_filtrées.forEach(lignes_t =>{
                if (  compteur_simple >= Borne_inf && compteur_simple < Borne_sup  ){ données_pages_à_afficher.push(lignes_t) }
                compteur_simple = compteur_simple + 1
              } )
      
      
      
             
              Utilisateur[table_HTML_à_afficher] =  données_pages_à_afficher
            } // fin zone table générale
              
            
      
              table_utilisateur = document.getElementsByClassName(table_HTML_à_afficher)
         
              
              //-------- Récupération d'informations sur de la table (lignes, colonnes et variables sur les colonnes)-----------------------------------------
       
                //- tableau = données_pages_à_afficher
                if (table_HTML_à_afficher === "TABLE_Liste_substances"){
              
                Utilisateur[table_HTML_à_afficher] =  tableau }
      
                console.log('état des données  2 : ',      Utilisateur[table_HTML_à_afficher] )
              Données = {}
              if(Utilisateur[table_HTML_à_afficher][0]){  Données.variables = Object.keys(Utilisateur[table_HTML_à_afficher][0]).map((key) => [key])
              Données.nombre_de_colonnes =  Données.variables.length
              Données.nombre_de_lignes = Utilisateur[table_HTML_à_afficher].length
              
      
               console.log("Table des données importées : ",table_HTML_à_afficher, tableau)
               console.log("Nombre de lignes : ",table_HTML_à_afficher, Données.nombre_de_lignes )
               console.log("Nombre de colonnes : ",table_HTML_à_afficher, Données.nombre_de_colonnes)
               console.log("Liste des propriétés (colonnes) : ",table_HTML_à_afficher,  Données.variables)}
            
      
               console.log('état des données  3 : ',     Données.variables )
      
              //--------------------------------------- ------
              //-----Les boutons au dessus des tableaux ------
              //---------------------------------------- ------
      
      
              if (table_HTML_à_afficher !== "TABLE_Liste_substances"){
      
              Ajouter_une_ligne_de_données =  "Ajouter_une_ligne_de_données" + table_HTML_à_afficher
      
           
                boutons = document.getElementsByClassName("boutons_Liste_generale")
                boutons[0].innerHTML = `
              <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter  une ligne de données </button>
              <button class="btn bg-light mb-0 text-end" id =  "chargement"> Charger la ligne sélectionnée  </button>
              <button class="btn bg-light mb-0 text-end" id =  "liste_générale_modifier"> Modifier la ligne sélectionnée  </button>
              `
             }
      
      
      if (table_HTML_à_afficher === "TABLE_Liste_substances"){
      
      Ajouter_une_ligne_de_données =  "Ajouter_une_ligne_de_données" + table_HTML_à_afficher
      
      
        boutons = document.getElementsByClassName("boutons_Liste_substances")
        boutons[0].innerHTML = `
      <button class="btn bg-light mb-0 text-end" id =  ${Ajouter_une_ligne_de_données}> Ajouter  une nouvelle substance </button>
      <button class="btn bg-light mb-0 text-end" id =  "chargement_substance">  Afficher données de la substance </button>
      `
      
      
      }
      
      
          //-----Associer évenements aux boutons------
      
      
      if (table_HTML_à_afficher !== "TABLE_Liste_substances"){
      chargement_données_selectionnée = document.getElementById("chargement")
      
      chargement_données_selectionnée.addEventListener("click", () => {
        console.log("Chargement d'une nouvelle ligne de données")
        
        Utilisateur = Selection_Utilisateur

        document.getElementById("Haut_nom").innerHTML =   Utilisateur.nom 
        document.getElementById("Haut_cas").innerHTML =  Utilisateur.cas
        document.getElementById("Haut_symb").innerHTML = Utilisateur.symbole 


        Chargement_Page(Utilisateur)

        document.getElementById("Z_CGPH").style.display = "none" 
        document.getElementById("Z_PPCMC").style.display = "none"
        document.getElementsByClassName('diagramme_composition')[0].style.display = "none" 
        document.getElementsByClassName("card mb-4 Zone_graphique")[0].style.display = "none" 
       
        Section_Composition.style.display = "none"
        
      
        
       
        Table_actuel.select = "neutre"
        
      })
      
      
      modifier_données_selectionnée = document.getElementById("liste_générale_modifier")
      
      modifier_données_selectionnée.addEventListener("click", () => {
      
        console.log('Objet en cours de modification : ', Modifier,  Modifier.objet)
                       
                       Liste_colonnes = []
                       Liste_colonnes = Object.keys(Modifier.objet).map((key) => [key])
      
      
                      formulaire = document.getElementsByClassName("formulaire_table_modifier" + "_" + Modifier.tablehtml)
                     //Chargement automatique des inputs du formulaire
                           
                     //Mofication titre du formulaire
                     titre_formulaire = formulaire[0].children[0].children[0]
                     titre_formulaire.innerHTML = `Modifier la <strong style = "color :  hsl(212, 65%, 63%)" > ligne numéro ${Modifier.ligne} </strong>`
                     
                      //Chargement automatique des inputs du formulaire
                    
                      Liste_colonnes.forEach(colonne =>{  
                     input = document.getElementById(colonne + Modifier.tablehtml)
                     input.value = Modifier.objet[colonne]
                     } )
      
                     if (Formulaire_actuel.état !== "ouvert") {
                     formulaire[0].style.display = "inline";
                     Formulaire_actuel.état = "neutre" }
      
                     boutons_formulaire_modifier =   "boutons_formulaire_modifier" + "_" +  Modifier.tablehtml
                     const bouton_confirmer_formulaire_modifie = document.getElementsByClassName(boutons_formulaire_modifier)[0].cloneNode(true)
                     bouton_confirmer_formulaire_modifie.addEventListener("click", () => { le_bouton_confirmer_modifie(),  Formulaire_actuel.état = "fermé"  })
      
                     const bouton_confirmer_formulaire = document.getElementsByClassName(boutons_formulaire_modifier)[0]
      
      bouton_confirmer_formulaire.parentNode.replaceChild(bouton_confirmer_formulaire_modifie, bouton_confirmer_formulaire);
      
      
        //--   construire le formulaire 
         //--   Afficher le formulaire 
      
      
      
      })
      
      
      }
      
      
      
      
      
      if (table_HTML_à_afficher === "TABLE_Liste_substances"){
      
      chargement_données_substance = document.getElementById("chargement_substance")
      chargement_données_substance.addEventListener("click", () => {
           Rapport.état = "ON"
        Utilisateur.choix_substance = Selection_Utilisateur.choix_substances
      console.log(" ETAPE 2 :  selection d'une nouvelle substance en cours : ", Utilisateur.choix_substance )
      
      readTodos("SQL_ecotox_substances_organisme_terrestre","TABLE_ecotox_substances_organisme_terrestre")
      readTodos("SQL_ecotox_substances_organismes_aquatiques","TABLE_ecotox_substances_organismes_aquatiques")
      readTodos("SQL_Propriete_physique_et_chimique_substance","TABLE_Propriete_physique_et_chimique_substance")
      readTodos("SQL_composition_substances","TABLE_composition_substances")
      document.getElementsByClassName('Section_Composition')[0].style.display = "inline"
      Section_Données_ecotox_substance.style.display = "none"    
      Section_Propriété_physique_et_chimique_substance.style.display = "none"
      document.getElementById("Z_PPCMC").style.display = "none"
      document.getElementsByClassName('diagramme_composition')[0].style.display = "inline" 
      document.getElementsByClassName("infoCompo")[0].style.display = "inline"
      document.getElementsByClassName("card mb-4 Zone_graphique")[0].style.display = "inline"
      document.getElementById("Z_CGPH").style.display = "inline-flex"


      Table_actuel.select = "neutre"
      
       })
           
               }
      
             
      
      
              //---------------------------------------------------------//
              //-----Construction de la première ligne du tableau--------//
              //---------------------------------------------------------//
      
      
              table_utilisateur[0].innerHTML = `<thead> <tr>  <td  class="text-sm font-weight-normal mb-0"> ID </td  class="text-sm font-weight-normal mb-0"> <td  class="text-sm font-weight-normal mb-0"> Édition </td  class="text-sm font-weight-normal mb-0"> </tr> </thead> <tbody> </tbody>`
              Première_ligne = table_utilisateur[0].children[0].children[0]
      
              if ( Données.variables.length !== 0){Données.variables.forEach(colonne =>{
      
                    let td = document.createElement('td') 
                    td.innerHTML =`${colonne}`
                    Première_ligne.appendChild(td)
      
                    }) }
              
      
              
              
              //---------------------------------------------------------//
              //-----Construction du corp du tableau---------------------//
              //---------------------------------------------------------//
      
              bouton_modifier  =  "bouton_modifier" + "_" + table_HTML_à_afficher
              bouton_supprimer =   "bouton_supprimer" + "_" + table_HTML_à_afficher
              id = 1
      
              Ligne_selectionnée = {}
              Ligne_selectionnée.actuelle = "null"
            
              Utilisateur[table_HTML_à_afficher].forEach(ligne =>{
            
                  données_ligne = Object.values(ligne)
                  let ligne_à_ajouter = document.createElement('tr')   
      
                   //-----Ajout des colonnes id et édition avec les boutons modifer, supprimer, dans la ligne en cours de construction
      
                   ligne_à_ajouter.innerHTML = ` 
                      <td  class="text-sm font-weight-normal mb-0" > ${id}</td>
                       <td  class="text-sm font-weight-normal mb-0" > 
                          <button style = "color:  hsl(212, 65%, 63%)" href = "♯" type = "button" class = ${bouton_modifier} id = ${id}> <strong> Modifier </strong> </button > 
                          
                          <button style = "color:  hsl(212, 65%, 63%)" href = "♯" type = "button" class = ${bouton_supprimer} id = ${id}> <strong> Supprimer </strong> </button > 
                       </td>   
                       ` 
                   //-----Ajout des autres colonnes
      
                  données_ligne.forEach(colonne =>{
      
                      let td = document.createElement('td') 
                      td.innerHTML =`${colonne}`
                      
                     ligne_à_ajouter.appendChild(td)
      
                 }) 
          
              //-----Ajout d'un événement :  Lorsque l'utilisateur click sur la ligne, cette dernière change de couleur, et ...
              // ... le composé/mélange complexe correspondant est sélectionné, afin de pouvoir afficher ses données.
      
      
             ligne_à_ajouter.style["background-color"] =  "#ffffff"
             ligne_à_ajouter.addEventListener("click", () => {console.log("Selection de la ligne :", ligne)
      
             Modifier.objet = ligne
             Modifier.tablehtml = table_HTML_à_afficher
             Modifier.tablesql = table_SQL
             Modifier.ligne = id
              
             if (Formulaire_actuel.état !== "ouvert"){
             if ( Ligne_selectionnée.actuelle !== "null"){Ligne_selectionnée.actuelle.style["background-color"] =  "#ffffff"}
             
              ligne_à_ajouter.style["background-color"] = "#dddddd"
              Ligne_selectionnée.actuelle = ligne_à_ajouter
              Selection_Utilisateur = {}
      
      
              if (table_HTML_à_afficher !== "TABLE_Liste_substances"){
      
              Selection_Utilisateur.type =  ligne.catégorie
              Selection_Utilisateur.nom =  ligne.nom_fr 
              Selection_Utilisateur.nom_En = ligne.nom_en
              Selection_Utilisateur.cas =  ligne.cas
              Selection_Utilisateur.symbole =  ligne.symbole_formule
              Selection_Utilisateur.description = ligne.mots_clés
      
              console.log("Le nouvel Utilisateur est :", Selection_Utilisateur ) }
      
              if (table_HTML_à_afficher === "TABLE_Liste_substances"){
      
                Selection_Utilisateur.choix_substances = ligne.nom_substance
                console.log("Etape 1 :", Selection_Utilisateur.choix_substances )
                
              }
      
            }})
      
            
                //-- Filtrer la ligne  (2eme filtre ): afficher la ligne ou nom en fonction des requetes de recherche de l'utilisateur , qui sont contenue dans l'objet FILTRE
                //-- Ce deuxième filtre ne fait que masquer les lignes ! Chaque tableau doit comporter au moins, une ligne, afin d'éviter les bugs. Ainsi, le premier filtre laissera toujours passer au moins une ligne. Si cette seule ligne ne correspond pas à la requête de recherche de l'utilisateur, elle pourra comme même être masquées grâce à ce deuxième filtre.
      
                   
                if (table_HTML_à_afficher !== "TABLE_Liste_substances"){
      
                  Le_mot_clé_recherché_est_identifié = "FAUX"
                  if(ligne.mots_clés.includes(FILTRE[2][1]) === true){Le_mot_clé_recherché_est_identifié = "VRAI"}
      console.log(ligne.cas, FILTRE[1][1])
      
                  Le_CAS_recherché_est_identifié = "FAUX"
                  if(ligne.cas === FILTRE[1][1] ){ Le_CAS_recherché_est_identifié = "VRAI"}
                  if(ligne.cas.includes(FILTRE[1][1] ) === true){Le_CAS_recherché_est_identifié = "VRAI"}
                  if(FILTRE[1][1].includes(ligne.cas) === true){Le_CAS_recherché_est_identifié = "VRAI"}
      
              
                 if (FILTRE[2][1] === ""){
                  if (ligne.nom_fr !== FILTRE[0][1] && Le_CAS_recherché_est_identifié === "FAUX"){ ligne_à_ajouter.style.display = "none"}
                 }
                 else if (ligne.nom_fr !== FILTRE[0][1] &&  Le_CAS_recherché_est_identifié === "FAUX" &&  Le_mot_clé_recherché_est_identifié === "FAUX" ){ ligne_à_ajouter.style.display = "none"}
         
              }
      
      
               //---- Spécifique à la table affichant la liste des substances
      
              if (table_HTML_à_afficher === "TABLE_Liste_substances"){
              FILTRE_FINAL = Utilisateur
              if (ligne.catégorie !== FILTRE_FINAL.type || ligne.nom_fr !== FILTRE_FINAL.nom || ligne.nom_en !== FILTRE_FINAL.nom_En|| 
              ligne.cas !== FILTRE_FINAL.cas || ligne.symbole_formule !== FILTRE_FINAL.symbole
               ||ligne.mots_clés !== FILTRE_FINAL.description){ ligne_à_ajouter.style.display = "none"}
      
              }
      
      
                // ---- Incorporation finale de la ligne au tableau 
      
              table_utilisateur[0].children[1].appendChild(ligne_à_ajouter)
      
               
                       id = id + 1
      
               }) 
      
      
      
      
      
              //---------------------------------------------------------------------------------------------------------- //
              //------- Construction du corps des formulaires pour la modification, la suppression et l'ajout de données -----//
              //------------------------------------------------------------------------------------------------------------//
      
      
              formulaire_table_modifier =  "formulaire_table_modifier" + "_" + table_HTML_à_afficher
              boutons_formulaire_modifier =   "boutons_formulaire_modifier" + "_" + table_HTML_à_afficher
              input_modifier = "input_modifier" + "_" + table_HTML_à_afficher
      
              formulaire_table_supprimer = "formulaire_table_supprimer" + "_" + table_HTML_à_afficher
              boutons_formulaire_supprimer = "boutons_formulaire_supprimer" + "_" + table_HTML_à_afficher
              input_supprimer = "input_supprimer" + "_" + table_HTML_à_afficher
      
              formulaire_table_ajouter = "formulaire_table_ajouter" + "_" + table_HTML_à_afficher
              boutons_formulaire_ajouter = "boutons_formulaire_ajouter" + "_" + table_HTML_à_afficher
              input_ajouter = "input_ajouter" + "_" + table_HTML_à_afficher
      
               
              function  créer_corp_du_formulaire(class_corp, class_boutons, clase_input){
      
                 //----
              formulaire =  document.createElement('div')
              formulaire.className = class_corp
              formulaire.style.display = "none"
                //----
      
           
      
              formulaire = document.getElementsByClassName(class_corp)
              //console.log(formulaire[0])
              //----formulaire = formulaire_test
              //----consoel.log("dfg", formulaire)
      
              formulaire[0].innerHTML = `<form id = "Modificationformulaire" class = "titre_formulaire" > <h1>  Ajouter une nouvelle ligne de données </h1><div> </div>
              <button href = "♯" class = ${class_boutons} type = "button" id = "bouton_modifier_formulaire"> Confirmer </button> <button  type = "button"  class = ${class_boutons}  id = "bouton_annuler_formulaire"> Annuler </button> </form>`
               
              formulaire_insertion = formulaire[0].children[0].children[1]
      
              a = 0
              
              if  (class_corp !== formulaire_table_supprimer) { Données.variables.forEach(colonne =>{
      
              let input_label = document.createElement('div')
              input_label.innerHTML = `<label for =  ${colonne} Style = "font-size: 25px" > ${colonne} : </label>
                  <input  ref= {titleRef} required type = "text" class =  ${clase_input}  id =  ${colonne + table_HTML_à_afficher}  name = "ID_de_la_ligne_à_modifier" > <br>
                  <h2></h2>`
      
                  if (table_HTML_à_afficher !== "TABLE_Liste_generale"){ if (colonne[0] === "catégorie" || colonne[0] === "nom_fr" || colonne[0] === "nom_en" || colonne[0] === "cas" || colonne[0] === "symbole_formule" || colonne[0] === "mots_clés" ){input_label.style.display = "none"}}
      
                 
              formulaire_insertion.appendChild(input_label)
               a = a + 1 }
                 
            )}}
      
      
              créer_corp_du_formulaire(formulaire_table_modifier,boutons_formulaire_modifier, input_modifier)
              créer_corp_du_formulaire(formulaire_table_supprimer,boutons_formulaire_supprimer, input_supprimer)
              créer_corp_du_formulaire(formulaire_table_ajouter, boutons_formulaire_ajouter, input_ajouter)
      
              
      
              //-------- Boutons annuler du formulaire de modification 
      
      
              function  boutons_annuler(class_corp, class_bouton_annuler){
              
              const bouton_annuler_formulaire = document.getElementsByClassName(class_bouton_annuler)[1]
               bouton_annuler_formulaire.addEventListener("click", () => 
             {
               console.log("données à afficher", données_affichées_formulaire)
               formulaire = document.getElementsByClassName(class_corp)
               if (table_HTML_à_afficher === "TABLE_Liste_generale"){
              
                //readTodos("table_25","table_critères_de_qualité_milieux_aquatiques")
               // readTodos("table_15", "table_critères_de_qualité_milieux_Terrestre")
                //readTodos("SQL_criteres_de_qualite_sediments","TABLE_criteres_de_qualite_sediments")
                 //Chargement_Page(Utilisateur)
      
               formulaire[0].style.display = "none";
               //Table_actuel.select = "neutre";
               Formulaire_actuel.état = "fermé"
                }
      
               if (table_HTML_à_afficher !== "TABLE_Liste_generale"){
                formulaire[0].style.display = "none";
                 Formulaire_actuel.état = "fermé"
                 Table_actuel.select = "neutre"
      
               }
      
      
                           }) }
      
      
              boutons_annuler(formulaire_table_modifier,boutons_formulaire_modifier)
              boutons_annuler(formulaire_table_supprimer,boutons_formulaire_supprimer)
              boutons_annuler(formulaire_table_ajouter,boutons_formulaire_ajouter)
              
              //-------- Boutons confirmer du formulaire de modification et ses nodes clones pour éviter la répétition des événements
      
              const bouton_confirmer_formulaire_ajouter =  document.getElementsByClassName(boutons_formulaire_ajouter)[0].cloneNode(true)
              const bouton_confirmer_formulaire_supprime = document.getElementsByClassName(boutons_formulaire_supprimer)[0].cloneNode(true)
              const bouton_confirmer_formulaire_modifie = document.getElementsByClassName(boutons_formulaire_modifier)[0].cloneNode(true)
                
      
              formulaire = document.getElementsByClassName(formulaire_table_ajouter)
                  formulaire[0].style.display = "none" 
                  Liste_des_inputs =  document.getElementsByClassName(input_ajouter)
      
      
              // Couplage des boutons confirmer à leur événement respectif
           
              bouton_confirmer_formulaire_supprime.addEventListener("click", () => { le_bouton_confirmer_supprime()})
              bouton_confirmer_formulaire_modifie.addEventListener("click", () => { le_bouton_confirmer_modifie() })
              bouton_confirmer_formulaire_ajouter.addEventListener("click", () => {

                formulaire_erreur = document.getElementsByClassName("formulaire-Erreur")[0]
                corp_formulaire_erreur = document.getElementById("corp_formulaire_erreur")
                Vérification_creer_2 = 'OK'
                  
                          
                            sortie = {}
                  for ( let i = 0;  i <= Liste_des_inputs.length - 1 ; i ++){
                            
                            // sortie[Liste_des_inputs[i].id] = Liste_des_inputs [i].value
                            console.log()
                            Liste_des_inputs =  document.getElementsByClassName(input_ajouter)
                            var paramètre = Liste_des_inputs[i].id
                            var valeur = Liste_des_inputs[i].value
                          
                             
                            sortie[paramètre] = valeur
                            
                          
                            
                            
                          }



                          formulaire = document.getElementsByClassName(formulaire_table_ajouter)
                          if (table_HTML_à_afficher === "TABLE_Liste_generale"){
                          Chargement_Page(Utilisateur)
                          readTodos("table_25","table_critères_de_qualité_milieux_aquatiques")
                          readTodos("table_15", "table_critères_de_qualité_milieux_Terrestre")
                          readTodos("SQL_criteres_de_qualite_sediments","TABLE_criteres_de_qualite_sediments")
                          Table_actuel.select = "neutre"
                          formulaire[0].style.display = "none"
                          Formulaire_actuel.état = "fermé" 
                          console.log('----------------Création de la ligne de données suivante ------: ', sortie)
                         
                          createTodos(table_SQL,table_HTML_à_afficher, sortie)}
      
                          if (table_HTML_à_afficher !== "TABLE_Liste_generale"){
                            formulaire[0].style.display = "none"
                          Formulaire_actuel.état = "fermé" 
      
      
                          sortie["mots_clés"+ table_HTML_à_afficher] = Utilisateur.description
                          sortie["nom_fr"+ table_HTML_à_afficher] = Utilisateur.nom
                          sortie["nom_en"+ table_HTML_à_afficher] = Utilisateur.nom_En 
                          sortie["cas"+ table_HTML_à_afficher] = Utilisateur.cas
                          sortie["symbole_formule"+ table_HTML_à_afficher] = Utilisateur.symbole
                          sortie["catégorie"+ table_HTML_à_afficher] = Utilisateur.type
                          
                          createTodos(table_SQL,table_HTML_à_afficher, sortie)}
                      
                      })
      
              données_affichées_formulaire = {}
      
              // Envoyer les données à supprimer
              // function le_bouton_confirmer_ajoute(){console.log("ajoute"),  createTodos("table_35")}
      
               // Envoyer les données à supprimer sous forme d'objet
              function le_bouton_confirmer_supprime(){
      
               objet_à_supprimer = données_affichées_formulaire.data
               console.log("Tentative de suppression")
               console.log("L'objet à supprimer est :", objet_à_supprimer)
               formulaire = document.getElementsByClassName(formulaire_table_supprimer)
                 formulaire[0].style.display = "none" 
                 Formulaire_actuel.état = "fermé" 
                deleteTodos(table_SQL, table_HTML_à_afficher, objet_à_supprimer)
               }
      
               // Envoyer les données à modifier sous forme d'objet
      
              function le_bouton_confirmer_modifie(){
      
                 

                 formulaire_erreur = document.getElementsByClassName("formulaire-Erreur")[0]
                 corp_formulaire_erreur = document.getElementById("corp_formulaire_erreur")
                 Vérification_créer2 = 'OK'

                 // Ancient objet à modifier
                 
                 if (table_HTML_à_afficher === "TABLE_Liste_generale"){ancien_objet  =  Modifier.objet}
                 if (table_HTML_à_afficher !== "TABLE_Liste_generale"){
                  ancien_objet = données_affichées_formulaire.data
                  ancien_objet2 = {}
                  

                
                }
      
                 // Nouvel objet à intégrer
      
                 if (table_HTML_à_afficher !== "TABLE_Liste_generale"){  
                  
                 nouvel_objet = {}
                 nouvel_objet2 = {}
               

                 Liste_colonnes1 = []
                 Liste_colonnes1 = Object.keys(Modifier.objet).map((key) => [key])
             
                 Liste_colonnes1.forEach(colonne =>{  
                 input = document.getElementById(colonne + table_HTML_à_afficher)
                 nouvel_objet[colonne] = input.value

                 if(input.value.includes("--") === true || input.value.includes("-- #") === true ||input.value.includes("delete from") === true || input.value.includes("delete") === true ){
                       
                  Vérification_créer2 = "NON"
                   let erreur_caractères = document.createElement('p') 
                   erreur_caractères.innerHTML =`Veuillez éviter d'insérer les caractères suivants : --, --', -- #,#, delete from, delete`

                   corp_formulaire_erreur.appendChild(erreur_caractères)

                    }

                
                
                //-----  Permet à l'utilisateur d'entrer des apostrophes, sans générer des erreur dans la base de donnée postgreSQL

                 if(input.value.includes("'") === true){

                  console.log('Attention apostrophe : ', input.value )
                   
                  
                  input.value = input.value.replaceAll("'", "''")
                  nouvel_objet[colonne] =  input.value
                 
                 
                  console.log('Remplacement apostrophe : ',  nouvel_objet[colonne].replaceAll("'", "''"));

                 }
                 
                 if (isNaN(ancien_objet[colonne]) &&  ancien_objet[colonne].includes("'") === true ) { 
                      
                      ancien_objet[colonne] = ancien_objet[colonne].replaceAll("'", "''")
                      
                    
                    }           
                
               //------


                 } )}
      
      
                 if (table_HTML_à_afficher === "TABLE_Liste_generale"){  
                  
                  Liste_colonnes = []
                  Liste_colonnes = Object.keys(Modifier.objet).map((key) => [key])
                  
                  nouvel_objet = {}
                  Liste_colonnes.forEach(colonne =>{  
                  input = document.getElementById(colonne + Modifier.tablehtml)
                 nouvel_objet[colonne] = input.value

                 if(input.value.includes("--") === true || input.value.includes("-- #") === true ||input.value.includes("delete from") === true || input.value.includes("delete") === true ){

                  Vérification_créer2 = "NON"
                      let erreur_caractères = document.createElement('p') 
                      erreur_caractères.innerHTML =`Veuillez éviter d'insérer les caractères suivants : --, --', -- #,#, delete from, delete`

                    corp_formulaire_erreur.appendChild(erreur_caractères)

                 }

                  
                //-----  Permet à l'utilisateur d'entrer des apostrophes, sans générer des erreur dans la base de donnée postgreSQL

                 if(input.value.includes("'") === true){

                  console.log('Attention apostrophe : ', input.value )
                   
                  
                  input.value = input.value.replaceAll("'", "''")
                  nouvel_objet[colonne] =  input.value
                 
                 
                  console.log('Remplacement apostrophe : ',  nouvel_objet[colonne].replaceAll("'", "''"));

                 }
                 
                 if (isNaN(ancien_objet[colonne]) &&  ancien_objet[colonne].includes("'") === true ) { 
                      
                      ancien_objet[colonne] = ancien_objet[colonne].replaceAll("'", "''")
                      console.log('Ancient objet ICI', ancien_objet[colonne])
                    
                    }           
                
               //------
                 

                 
                 if(colonne[0] === "catégorie"){
                   if(input.value !== "Mélange complexe" && input.value !== "Composé" ){
                    Vérification_créer2 = "NON"
                      let erreur_catégorie = document.createElement('p') 
                      erreur_catégorie.innerHTML =`Les deux seules valeurs possibles pour la colonne des catégories sont :  Mélange complexe et Composé`
                    corp_formulaire_erreur.appendChild(erreur_catégorie)


                   }

                 }






                 } )}
               
               
      
      
                 console.log("Tentative de modification")
                 console.log("L'ancient objet est :", ancien_objet)
                 console.log('Le nouvel objet est :', nouvel_objet)
                  
                 
                 if (table_HTML_à_afficher === "TABLE_Liste_generale"){formulaire = document.getElementsByClassName("formulaire_table_modifier" + "_" + Modifier.tablehtml)}
                 if (table_HTML_à_afficher !== "TABLE_Liste_generale"){formulaire = document.getElementsByClassName(formulaire_table_modifier)}
                
                 
                 




                 if( Vérification_créer2 === 'OK'){

                 formulaire[0].style.display = "none"
                 Formulaire_actuel.état = "fermé" 
      
                 if (table_HTML_à_afficher === "TABLE_Liste_generale"){
      
      
                    updateTodos("SQL_proprites_physiques_et_chimiques_composes","TABLE_proprites_physiques_et_chimiques_composes", ancien_objet, nouvel_objet)
      
                    updateTodos("SQL_criteres_de_qualite_eaux","TABLE_criteres_de_qualite_eaux", ancien_objet, nouvel_objet)
                    updateTodos("SQL_criteres_de_qualite_sols","TABLE_criteres_de_qualite_sols", ancien_objet, nouvel_objet)
                    updateTodos("SQL_criteres_de_qualite_sediments","TABLE_criteres_de_qualite_sediments", ancien_objet, nouvel_objet)
      
                    updateTodos("SQL_toxicite_invertebres_aquatiques_COMPO","TABLE_toxicite_invertebres_aquatiques_COMPO", ancien_objet, nouvel_objet)
                    updateTodos("SQL_toxicite_poissons_COMPO","TABLE_toxicite_poissons_COMPO", ancien_objet, nouvel_objet)
      
                    updateTodos("SQL_ecotox_substances_organismes_aquatiques","TABLE_ecotox_substances_organismes_aquatiques", ancien_objet, nouvel_objet)
                    updateTodos("SQL_ecotox_substances_organisme_terrestre","TABLE_ecotox_substances_organisme_terrestre", ancien_objet, nouvel_objet)
      
                    updateTodos("SQL_composition_substances","TABLE_composition_substances", ancien_objet, nouvel_objet)
                    updateTodos("SQL_Propriete_physique_et_chimique_substance","TABLE_Propriete_physique_et_chimique_substance", ancien_objet, nouvel_objet)
                   
                    updateTodos("SQL_Liste_substances","TABLE_Liste_substances", ancien_objet, nouvel_objet)
      
                   
                   }

                   if(table_HTML_à_afficher === "TABLE_Liste_substances"){
                    nouvel_objet2['nom_substance'] =  nouvel_objet['nom_substance']
                    ancien_objet2['nom_substance'] = ancien_objet['nom_substance']

                    updateTodos("SQL_composition_substances","TABLE_composition_substances", ancien_objet2, nouvel_objet2) 
                    updateTodos("SQL_ecotox_substances_organismes_aquatiques","TABLE_ecotox_substances_organismes_aquatiques", ancien_objet2, nouvel_objet2)
                    updateTodos("SQL_ecotox_substances_organisme_terrestre","TABLE_ecotox_substances_organisme_terrestre", ancien_objet2, nouvel_objet2)
                    updateTodos("SQL_Propriete_physique_et_chimique_substance","TABLE_Propriete_physique_et_chimique_substance", ancien_objet2, nouvel_objet2)


                   }
               
                   updateTodos(table_SQL,table_HTML_à_afficher, ancien_objet, nouvel_objet) 
                  
                
                  Formulaire_actuel.état = "fermé"  }
                  else {formulaire_erreur.style.display = "inline"}

              
                
               
              
              }
      
                   //--------------------- TOUS LES BOUTONS SUPPRIMER 
                   
                  function tous_les_bouton_supprimer(){
                     
                  const Boutons_supprimer = document.getElementsByClassName(bouton_supprimer)
              
              
                   for ( let i = 0;  i <= Boutons_supprimer.length; i ++){
                   const Boutons_supprimer = document.getElementsByClassName(bouton_supprimer)
                      button =  document.getElementsByClassName(bouton_supprimer)[i]
                      if (button) {
                     button.addEventListener("click", () => {
                     //Evenement pour ouvrir le formulaire pour chaques boutons modifier
                     formulaire = document.getElementsByClassName(formulaire_table_supprimer)
                     if (Formulaire_actuel.état !== "ouvert") {
                     formulaire[0].style.display = "inline";
                     Formulaire_actuel.état = "ouvert" 
                    
                      //Récupération des données de la ligne sélectionnée  pour chaques boutons supprimer
                     button =  document.getElementsByClassName(bouton_modifier)[i]
                     données_associées = Utilisateur[table_HTML_à_afficher][i]
      
                     données_affichées_formulaire.data = données_associées
                     console.log("Button : ", button)
                      data = button.getAttribute("id")
                     console.log('ID du boutons est :', data)
                     console.log('données associées:',  données_associées)
      
                      //Mofication titre du formulaire
                     titre_formulaire = formulaire[0].children[0].children[0]
                     titre_formulaire.innerHTML =`Supprimer la <strong style = "color :  hsl(212, 65%, 63%)" > ligne numéro ${data} </strong>`
                     
                      //Chargement automatique des inputs du formulaire
                    
                      Données.variables.forEach(colonne =>{  
                     input = document.getElementById(colonne + table_HTML_à_afficher)
                     input.value = Utilisateur[table_HTML_à_afficher][i][colonne]
                     } )
      
                     
                     bouton_confirmer_formulaire = document.getElementsByClassName(boutons_formulaire_supprimer)[0]
                     bouton_confirmer_formulaire.parentNode.replaceChild(bouton_confirmer_formulaire_supprime, bouton_confirmer_formulaire);
                  
                    
                    }} )};
               }
      
                //-----------------------TOUS LES BOUTONS MODIFIER  
                  }
      
                  function tous_les_bouton_modifier(){ 
                  //-------- : Ouvrir le formulaire avec les liens "modifier" du tableau
      
                  const Boutons_modifier = document.getElementsByClassName("bouton_modifier" + "_" + table_HTML_à_afficher)
                  Utilisateur[table_HTML_à_afficher + "bouton"] = document.getElementsByClassName("bouton_modifier" + "_" + table_HTML_à_afficher)
      
                  for ( let i = 0;  i <= Boutons_modifier.length; i ++){
                  
                    button =  Boutons_modifier[i]
                  
      
                    if (button) {
                    button.addEventListener("click", () => {
                    //Evenement pour ouvrir le formulaire pour chaques boutons modifier
                    
                   formulaire = document.getElementsByClassName("formulaire_table_modifier" + "_" + table_HTML_à_afficher)
                   console.log("Verification btn modifier : ", formulaire_table_modifier, Utilisateur[table_HTML_à_afficher], table_SQL )
      
                   if (Formulaire_actuel.état !== "ouvert") {
                     formulaire[0].style.display = "inline";
                     Formulaire_actuel.état = "ouvert"
      
                    //Récupération des données de la ligne sélectionnée  pour chaques boutons modifier
                    button =  document.getElementsByClassName("bouton_modifier" + "_" + table_HTML_à_afficher)[i]
                  données_associées = Utilisateur[table_HTML_à_afficher][i]
      
                données_affichées_formulaire.data = données_associées
                console.log("ATRIBUT BOUTON  ", button)
                const data = button.getAttribute("id")
                //console.log(" Table : ", table_HTML_à_afficher, formulaire[0].innerHTML)
                 console.log('ID du boutons est :', data)
                  console.log('données associées:',  données_associées)    
                 
      
       //Mofication titre du formulaire
      titre_formulaire = formulaire[0].children[0].children[0]
      titre_formulaire.innerHTML =` <p style = "font-size : 62px"> Modifier la <strong style = "color :  hsl(212, 65%, 63%)" > ligne numéro ${data} </strong></sp>`
      
       //Chargement automatique des inputs du formulaire
      
       Object.keys(Utilisateur[table_HTML_à_afficher][i]).map((key) => [key]).forEach(colonne =>{  
       input = document.getElementById(colonne + table_HTML_à_afficher)
       console.log("Verification",Utilisateur[table_HTML_à_afficher], table_SQL, colonne )
       input.value = Utilisateur[table_HTML_à_afficher][i][colonne]
      } )
      
      boutons_formulaire_modifier =   "boutons_formulaire_modifier" + "_" +  table_HTML_à_afficher
      const bouton_confirmer_formulaire = document.getElementsByClassName(boutons_formulaire_modifier)[0]
      
      bouton_confirmer_formulaire.parentNode.replaceChild(bouton_confirmer_formulaire_modifie, bouton_confirmer_formulaire);
      
      
      }} )};
      }
      }                 
                      tous_les_bouton_modifier()
                      tous_les_bouton_supprimer()  
      
      
                      //--- AJOUTER UNE NOUVELLE LIGNE DE DONNEES
      
                      const bouton_ajouter_menu = document.getElementById(Ajouter_une_ligne_de_données)
                      bouton_ajouter_menu.addEventListener("click", () => 
      
      
                      { 
                        console.log("Le formulaire est : ", Formulaire_actuel.état)
                      console.log(Utilisateur[table_HTML_à_afficher])
                      formulaire = document.getElementsByClassName("formulaire_table_ajouter" + "_" + table_HTML_à_afficher)
                      console.log("FORMU", table_SQL, table_HTML_à_afficher,   formulaire )
                      if (Formulaire_actuel.état !== "ouvert"){
                      formulaire[0].style.display = "inline" 
                      Formulaire_actuel.état = "ouvert"
                        
                      console.log("BOUTONS", table_SQL, table_HTML_à_afficher,   boutons_formulaire_ajouter )
      
                      boutons_formulaire_ajouter = "boutons_formulaire_ajouter" + "_" + table_HTML_à_afficher
                      
                      bouton_confirmer_formulaire = document.getElementsByClassName(boutons_formulaire_ajouter)[0]
                      bouton_confirmer_formulaire.parentNode.replaceChild(bouton_confirmer_formulaire_ajouter, bouton_confirmer_formulaire);}
                     
      
      })
               
      
      
              
           })
      }
      catch (e) {
          console.log("Une erreur est survenue dans la lecture de la base de données.")
      
      } } 
       
       //-------------------------------------------------------------------- //
          async function createTodos(table, html, output) { 
            
              try{  
              const jsonRequest = {}
              jsonRequest.table = table
              // output = {
               // nom: "TESTRESS",
                // cas: '54-84-8595',
                // vafe: "1.255",
                //cvaa : "1.44",
               // cvac : "555.1457"
             // }
             console.log("Création de la ligne :", output)
      
              jsonRequest.todo  =  output
              //--------------Insertion des nouvelles données par l'utilisateur
              
              //-------------
              let result = await fetch("https://outil-ecotox-repository-api2.onrender.com/", {method: "POST", 
              headers: {"content-type": "application/json"}, body: JSON.stringify(jsonRequest) })
              result = await result.json();
              console.log("Résultat de l'insertion : ", result )
              if (!result.success)  alert("FAILED! ")
      
              
              }
      
              catch (e) {console.log("Une erreur est survenue durant l'insertion dans la base de données, avec : ",output  )}
              finally {//-------------charger le nouveau tableau modifié en fonction de la table concernée
               if (html === "TABLE_Liste_substances"){Chargement_Page(Utilisateur)}
      
               if (html !== "TABLE_Liste_generale" && html !== "TABLE_Liste_substances"){
                console.log("LECTURE UPTADE  READ TODOS DE ", table, html)
                
                readTodos(table, html)

             
               if(Table_actuel.select !== "Liste_generale" ){
      
                if(Table_actuel.select !== "Liste_substances" ){ readTodos("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select) }
               
               }
                  Table_actuel.select = "neutre"
               }
      
              /*
              if (html === "TABLE_Liste_generale"){
                console.log("CREATION LISTE GENERAL", html)
                readTodosRechercher(table, html, Liste_filtre)
      
                if (Table_actuel.select !== "Liste_generale"){
                readTodos("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select)}
                if (Table_actuel.select === "Liste_generale"){
                  readTodosRechercher("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select,  Liste_filtre)}
              }
            
              if (html === "TABLE_Liste_substances"){
      
                readTodosRechercher("SQL_Liste_substances", "TABLE_Liste_substances")
      
                   Table_actuel.select = "neutre"
              }*/
              
      
      
      
            }
      
          }
        //---------------MODIFIER----------------------------------------- //
        //-------------------------------------------------------------------- //
           async function updateTodos(table, html, ancient, nouveau){
      
            try{  
              const jsonRequest = {}
              jsonRequest.table = table
              jsonRequest.old  =  ancient
              jsonRequest.new  =  nouveau
      
           //-------------
           let result = await fetch("https://outil-ecotox-repository-api2.onrender.com/modification", {method: "POST", 
             
              headers: {"content-type": "application/json"}, body: JSON.stringify(jsonRequest) })
              result = await result.json();
              console.log("Résultat de la modification : ", result )
              console.log('requete ici : ',jsonRequest)
              if (!result.success)  alert("FAILED! ")
      
              
            }
            catch (e) {console.log("Une erreur est survenue durant la modification")}
      
      
            finally {
      
              console.log("MODIFICATION DE LA TABLE ", html)
      
             
      
             
             
               if (html !== "TABLE_Liste_generale" && html !== "TABLE_Liste_substances"){
                console.log("LECTURE UPTADE  READ TODOS DE ", table, html)
                
                readTodos(table, html)
      
               if(Table_actuel.select !== "Liste_generale" ){
      
                if(Table_actuel.select !== "Liste_substances" && Table_actuel.select !== "neutre"  ){ readTodos("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select) }
               
               }
                  Table_actuel.select = "neutre"
               }
             
               if (html === "TABLE_Liste_generale"|| html === "TABLE_Liste_substances"){
                console.log('TABLE ACTUELLE uptade',  Table_actuel.select )
      
                if (html === "TABLE_Liste_generale"){
      
              
                readTodosRechercher(table, html, Liste_filtre)
                Utilisateur.type =   nouveau.catégorie
                Utilisateur.nom =   nouveau.nom_fr 
                Utilisateur.nom_En =  nouveau.nom_en
                Utilisateur.cas =   nouveau.cas
                Utilisateur.symbole =   nouveau.symbole_formule
                Utilisateur.description =  nouveau.mots_clés
                Chargement_Page(Utilisateur)
      
                
                
                console.log('TABLE ACTUELLE',  Table_actuel.select )
                Table_actuel.select = "neutre"
                
              
                 }
      
                if (html === "TABLE_Liste_substances"){
      
                  console.log(ancient, nouveau)
                  
                  Chargement_Page(Utilisateur)
                  readTodosRechercher(table, html)
                  Table_actuel.select = "neutre"
                  
                 
                }
                //Chargement_Page(Utilisateur)
                // 
                // console.log("MODIFICATION AVEC TABLE LIST")
                // if (Table_actuel.select !== "Liste_generale"){
                 //readTodos("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select)}
                 //if (Table_actuel.select === "Liste_generale"){
                 // readTodosRechercher("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select, Liste_filtre )
                 // Chargement_Page(Utilisateur)
                  // Table_actuel.select = "neutre"
                 // }
               }
              
               console.log("Table actuel : ",Table_actuel.select,"Formu actuel",  Formulaire_actuel.état )
            }
           }
         
         //---------------SUPPIMER----------------------------------------- //
         //-------------------------------------------------------------------- //
           async function deleteTodos(table, html, objet_supprimer){
      
      try{  
        const jsonRequest = {}
        jsonRequest.table = table
        jsonRequest.supprimer  =  objet_supprimer
        console.log('supression req :', jsonRequest)
      
      //-------------
      let result = await fetch("http://outil-ecotox-repository-api2.onrender.com/suppression", {method: "POST", 
        headers: {"content-type": "application/json"}, body: JSON.stringify(jsonRequest) })
        result = await result.json();
        console.log("Résultat de la suppression: ", result )
        if (!result.success)  alert("FAILED!")
      
      
         if (html !== "TABLE_Liste_generale" || html !== "TABLE_Liste_substances"){
              readTodos(table, html)
              readTodos("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select)}
      
        if (html === "TABLE_Liste_generale"){
                readTodosRechercher(table, html, Liste_filtre)
      
      

               Utilisateur.nom = "Diesel"
               Utilisateur.nom_En ="Diesel fuel oil"
               Utilisateur.description = "[carburant, Produits pétroliers, hydrocarbure]"
               Utilisateur.mots_clés_recherche = "[carburant, Produits pétroliers, hydrocarbure]"
               Utilisateur.cas = "68334-30-5"
               Utilisateur.type = "Mélange complexe"
               Utilisateur.symbole = "X"

              
                Chargement_Page(Utilisateur)
                readTodos("table_25","table_critères_de_qualité_milieux_aquatiques")
                readTodos("table_15", "table_critères_de_qualité_milieux_Terrestre")
                readTodos("SQL_criteres_de_qualite_sediments","TABLE_criteres_de_qualite_sediments")
                Table_actuel.select = "neutre"
      
                if (Table_actuel.select !== "Liste_generale"){
                readTodos("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select)}
                if (Table_actuel.select === "Liste_generale"){
                  readTodosRechercher("SQL_"+ Table_actuel.select, "TABLE_"+ Table_actuel.select, Liste_filtre ) }
              }
        if (html === "TABLE_Liste_substances"){Chargement_Page(Utilisateur)}
      
      }
      catch (e) { console.log("Une erreur est survenue durant la suppression")}
      }
      
      
           //---------------Fin du Script Java --------------------------------------------------------------------- //
       
    

  </script>

</body>

</html>
